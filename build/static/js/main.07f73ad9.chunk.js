(this.webpackJsonpfrontend_mso=this.webpackJsonpfrontend_mso||[]).push([[0],{174:function(e,t){},176:function(e,t){},271:function(e,t,a){e.exports=a(572)},280:function(e,t,a){},372:function(e,t){},384:function(e,t){},385:function(e,t){},572:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),s=(a(276),a(277),a(278),a(279),a(280),a(3)),i=a.n(s),o=a(5),d=a(8),u=a(9),m=a(12),p=a(10),f=a(11),h=a(577),g=a(580),b=a(579),E=a(578),_=a(576),y=a(2),v=a(4),k=a.n(v),x=a(14),w=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onChangeUsername=function(e){a.setState({username:e})},a.onChangePassword=function(e,t){a.setState({password:e})},a.doLogin=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:a.state.username,password:a.state.password},e.prev=1,e.next=4,k.a.post("/login",t).then((function(e){200===e.data.status?(x.Session.start({payload:e.data.dataLogin,expiration:864e5}),window.location.href="/"):a.setState({message:e.data.message,isNotification:!a.state.isNotification})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("failed login ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.forgotPwd=function(){},a.onKeyUpLogin=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===t.keyCode&&a.doLogin();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={username:"",password:"",isLoading:"",isNotification:!1,message:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundImage:"url('/images/home.jpg')"}},r.a.createElement(y.r,{style:{opacity:"0.90",background:"lightblue",height:"100vh"}},r.a.createElement(y.e,{style:{maxWidth:"400px",marginTop:"12.5%",marginBottom:"12.5%"},className:"md-block-centered"},r.a.createElement(y.h,{className:"is-centered",title:r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("h3",null,"Management Information System")),subtitle:"PT MSO Purwokerto"}),r.a.createElement(y.g,null,this.state.isNotification?r.a.createElement("div",{className:"notification is-danger "},e.state.message,r.a.createElement("button",{className:"delete",onClick:function(){return e.setState({isNotification:!1})}})):"",r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Username",placeholder:"e.g ahmad OR meisya77 OR admin ",value:this.state.username,onChange:this.onChangeUsername}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Password",placeholder:"Password",type:"password",value:this.state.password,onChange:this.onChangePassword,onKeyUp:this.onKeyUpLogin})),r.a.createElement(y.f,null,r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.doLogin},"Login"),r.a.createElement(_.a,{to:"/forgot-pwd"},r.a.createElement(y.d,{flat:!0,onClick:this.forgotPwd},"Forgot Password"))))))}}]),t}(n.PureComponent),S=a(17),P=(a(33),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeUsername=function(e){a.setState({username:e})},a.onChangePassword=function(e,t){a.setState({new_password:e})},a.onChangePasswordConfim=function(e,t){a.setState({new_password_confirm:e})},a.confirmReset=function(){a.state.new_password===a.state.new_password_confirm?a.setState({dialogVisible:!0}):a.setState({message:"Invalid Password Confirmation !",isNotification:!0})},a.doCheckUsername=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:a.state.username},e.prev=1,e.next=4,k.a.post("/api/check_username",t).then((function(e){200==e.data.status?1===e.data.data.length?(a.setState({validUsername:!0,_id:e.data.data[0]._id}),a.setState({message:"",isNotification:!1})):a.setState({message:"No User Found!",isNotification:!0}):a.notify("ERROR","Wrong Username!")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.doChange=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.validUsername){e.next=16;break}if(a.state.new_password!==a.state.new_password_confirm){e.next=13;break}return t={password_hash:a.state.new_password},e.prev=3,e.next=6,k.a.put("/api/edit_profile/".concat(a.state._id),t).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.setState({_id:"",validUsername:!1,dialogVisible:!1,username:"",new_password:"",new_password_confirm:""}),a.notify("SUCCESS","Password Reseted!")):a.setState({message:"Failed Reseting Password!",isNotification:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=14;break;case 13:a.setState({message:"Invalid Password Confirmation!",isNotification:!0});case 14:e.next=17;break;case 16:a.setState({message:"No User Found!",isNotification:!0});case 17:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={_id:"",username:"",new_password:"",new_password_confirm:"",isLoading:"",isNotification:!1,validUsername:!1,message:"",dialogVisible:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundImage:"url('/images/home.jpg')"}},r.a.createElement(y.r,{style:{opacity:"0.90",background:"lightblue",height:"100vh"}},r.a.createElement(y.e,{style:{maxWidth:"400px",marginTop:"12.5%",marginBottom:"12.5%"},className:"md-block-centered"},r.a.createElement(y.h,{title:"Forgot Password",subtitle:"PT MSO Purwokerto"}),r.a.createElement(y.g,null,this.state.isNotification?r.a.createElement("div",{className:"notification is-danger "},e.state.message,r.a.createElement("button",{className:"delete",onClick:function(){return e.setState({isNotification:!1})}})):"",this.state.validUsername?r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Reset Password",placeholder:"Reset Password",type:"password",value:this.state.new_password,onChange:this.onChangePassword}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Retype Password",placeholder:"Retype Password",type:"password",value:this.state.new_password_confirm,onChange:this.onChangePasswordConfim}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.confirmReset},"Submit")):r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Username",placeholder:"e.g John Doe",value:this.state.username,onChange:this.onChangeUsername}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.doCheckUsername},"Check")),r.a.createElement(y.d,{flat:!0,onClick:function(){return window.history.go(-1)}},"Cancel")))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.doChange},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure RESET the password?")))}}]),t}(n.PureComponent)),C=a(26),N=(a(111),x.Session.get().payload),O=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).searchModule=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.componentDidMount(),e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/api/modules-by-user-id/".concat(N.userId,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({modules:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={modules:[],total_notifications:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules-by-user-id/".concat(N.userId)).then((function(e){200===e.data.status&&t.setState({modules:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/user/".concat(N.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,a){t.setState({avatar_url:e.avatar_url})}))}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.error("Data Not Loaded ",e.t1);case 16:this.state.modules.map(function(){var e=Object(o.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/notifications-unread-per-user-navbar-total/".concat(N.userId,"?module_id=").concat(a._id)).then((function(e){200===e.data.status&&(t.state.total_notifications[n]=e.data.data[0].total,a.total_notifications=e.data.data[0].total,console.log(a.total_notifications))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Data Not Loaded ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e,this,[[0,5],[8,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=["#ebbe8a","#7bede2","#bff0a3","#edc2c2","#9ec8f7","#be86f7","#e693d8"],a=this.state.modules;return r.a.createElement("div",{style:{backgroundImage:"url('/images/home.jpg')"}},function(){return null===N.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(n.Fragment,null,r.a.createElement(y.F,(l={colored:!0,title:"",style:{backgroundColor:"#4aa6ed"}},Object(C.a)(l,"style",{backgroundColor:"#fff"}),Object(C.a)(l,"actions",[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:e.state.avatar_url})]),l)),r.a.createElement(y.e,{primary:!0,style:{opacity:"0.85",backgroundColor:"rgba(52, 52, 52, alpha)",background:"lightblue",height:"90vh"},className:"md-block-centered"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-1",style:{alignItems:"center"}},r.a.createElement("figure",null,r.a.createElement("img",{width:"100px",src:"/LogoMSObaru.png"}))),r.a.createElement("div",{className:"column is-11"},r.a.createElement("h4",null,r.a.createElement("b",null,"PT MITRANET SOFTWARE ONLINE")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("b",null,"IT Consultant & Software Develpment")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("a",{target:"_blank",href:"https://www.microbanking-online.com"},"www.microbanking-online.com"))))),r.a.createElement(y.g,null,r.a.createElement(y.i,{size:12,className:"box "},r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement(y.D,{leftIcon:r.a.createElement(y.q,null,"search"),className:"md-cell md-cell-tablet--8",placeholder:"Search ...",fullWidth:!0,style:{width:"400px"},onChange:e.searchModule})))))),r.a.createElement(y.i,{size:12,className:"box ",style:{height:300,padding:50}},r.a.createElement("div",{className:"columns  is-multiline",style:{justifyContent:"center"}},a.map((function(e,a){if("Home"!==e.module)return r.a.createElement(_.a,{to:e.link,key:a},r.a.createElement(y.e,{style:{width:.18*window.screen.width,height:.15*window.screen.height,borderRadius:"8px",padding:"20px",alignItems:"center",marginRight:"5px",marginLeft:"5px",marginTop:"5px",backgroundColor:t[a%t.length]}},r.a.createElement("div",{className:"columns",style:{}},r.a.createElement("div",{className:"column is-6"},r.a.createElement("p",{style:{height:"0.8",fontWeight:"bold"}},e.module)," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content",style:{borderRadius:"10px"}},r.a.createElement("img",{className:"image",width:"100%",style:{borderRadius:"10px",maxWidth:"100%",height:"auto",width:"auto"},src:e.icon})))))))})))))));var l}())}}]),t}(n.PureComponent),D=x.Session.get().payload;function j(){return(j=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/user/".concat(D.userId)).then((function(e){if(200===e.data.status&&e.data.data.length>0)return e.data.data[0].avatar_url}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){j.apply(this,arguments)}();var T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e=window.location.href;a.state.log=""!==e.split("/")[3]&&void 0!==e.split("/")[3]&&"setting"!==e.split("/")[3]?"/"+e.split("/")[3]:""},a.state={log:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.avatar;return r.a.createElement(y.w,{style:{marginLeft:"5px"},menuItems:[{leftIcon:"",primaryText:r.a.createElement(_.a,{to:this.state.log+"/setting/profile?user_id="+D.userId,style:{textDecoration:"none"}},"Profile")},{leftIcon:"",primaryText:r.a.createElement(_.a,{to:this.state.log+"/setting/changepwd?user_id="+D.userId,style:{textDecoration:"none"}},"Change Password")},{divider:!0},{primaryText:"Logout",onClick:function(){x.Session.destroy(),x.Session.getSession().isValid||(window.location.href="/")}}],anchor:{x:y.o.HorizontalAnchors.CENTER,y:y.o.VerticalAnchors.BOTTOM},sameWidth:!1,position:y.o.Positions.TOP_RIGHT,animationPosition:"below"},r.a.createElement(y.a,{style:{marginTop:"10px"},component:y.s,iconBefore:!0,label:r.a.createElement(y.q,null)},r.a.createElement(y.s,{label:"Hi, "+D.username},r.a.createElement(y.c,{src:""!==e&&void 0!==e?e:"/avatar/user.png",alt:"user_avatar",role:"presentation"}))))}}]),t}(n.Component),I=x.Session.get().payload,R=[],M=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,k.a.get("/api/modules-by-user-id/".concat(I.userId)).then((function(e){if(200===e.data.status){t=[{primaryText:r.a.createElement("b",null,"Applications")},{primaryText:"",divider:!0}],e.data.data.map((function(e,a){var n={};n.primaryText=r.a.createElement(y.s,{iconBefore:!0,label:r.a.createElement("a",{href:e.link},e.module),style:{marginTop:"20px",marginBottom:"20px"}},r.a.createElement(y.c,{src:e.icon})),t[a+2]=n})),R=t}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(y.w,{label:"Applications",icon:!0,menuItems:R,listStyle:{marginBottom:"20px",marginTop:"20px"},anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.BOTTOM},position:y.w.Positions.TOP_LEFT,animationPosition:"below",listClassName:"tables__with-menus__kebab-list"},r.a.createElement("i",{className:"fa fa-th",style:{marginTop:"6px",marginRight:"10px"}}))}}]),t}(n.Component),A=a(18),F=a.n(A),L=a(7),H=a.n(L),z=x.Session.get().payload,V=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeUsername=function(e){a.setState({username:e})},a.onChangeFullName=function(e){a.setState({full_name:e})},a.onChangePhoneNumber=function(e){a.setState({phone_number:e})},a.onChangeEmail=function(e){a.setState({email:e})},a.onChangeAddress=function(e){a.setState({address:e})},a.save=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:a.state.username,avatar_url:a.state.avatar_url},n={email:a.state.email,phone_number:a.state.phone_number,full_name:a.state.full_name},r={email:a.state.email,phone_number:a.state.phone_number,client_name:a.state.full_name,address:a.state.address},t.updated_by=a.state.created_by,e.prev=4,e.next=7,k.a.put("/api/edit_profile/".concat(a.state._id),t).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.data.status){e.next=24;break}if(null===a.state.employee_id){e.next=12;break}return e.prev=2,e.next=5,k.a.put("/api/employee/".concat(a.state.employee_id),n).then((function(e){200==e.data.status?a.notify("SUCCESS",t.data.message):a.notify("ERROR","FAILED")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=21;break;case 12:if(null===a.state.client_id){e.next=21;break}return e.prev=13,e.next=16,k.a.put("/api/client/".concat(a.state.client_id),r).then((function(e){200==e.data.status?a.notify("SUCCESS",t.data.message):a.notify("ERROR","FAILED")}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:a.componentDidMount(),e.next=25;break;case 24:a.notify("ERROR","FAILED");case 25:case"end":return e.stop()}}),e,null,[[2,7],[13,18]])})));return function(t){return e.apply(this,arguments)}}());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),a.handleLoad=function(e,t){a.setState({avatar_url:t})},a.deleteFile=function(e){a.setState({avatar_url:"",formdata:{}})},a.state={_id:"",client_id:"",avatar_url:"",username:"",employee_id:"",full_name:"",temp_avatar:"",created_by:z.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.user_id}),e.prev=2,e.next=5,k.a.get("/api/user/".concat(t.user_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,username:e.username,employee_id:e.employee_id,client_id:e.client_id,avatar_url:e.avatar_url}),!1}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:if(null===this.state.employee_id){e.next=21;break}return e.prev=11,e.next=14,k.a.get("/api/employee/".concat(this.state.employee_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({full_name:e.full_name,email:e.email,phone_number:e.phone_number}),!1}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:e.next=30;break;case 21:if(null===this.state.client_id){e.next=30;break}return e.prev=22,e.next=25,k.a.get("/api/client/".concat(this.state.client_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({full_name:e.client_name,email:e.email,phone_number:e.phone_number,address:e.address}),!1}))}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:case"end":return e.stop()}}),e,this,[[2,7],[11,16],[22,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Profile"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:9},r.a.createElement(y.D,{label:"Username",placeholder:"Username",value:this.state.username,onChange:this.onChangeUsername,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Full Name",placeholder:"Full Name",value:this.state.full_name,onChange:this.onChangeFullName,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Phone Number",placeholder:"Phone Number",value:this.state.phone_number,onChange:this.onChangePhoneNumber,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Email",placeholder:"Email",value:this.state.email,onChange:this.onChangeEmail,className:"md-cell md-cell--4-tablet md-cell--6"}),null!==this.state.client_id?r.a.createElement(y.D,{rows:3,label:"Address",placeholder:"Address",value:this.state.address,onChange:this.onChangeAddress,className:"md-cell md-cell--4-tablet md-cell--6"}):"",r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.save},"Update Profile")),r.a.createElement(y.i,{size:3},""!==this.state.avatar_url?r.a.createElement("div",null,r.a.createElement("img",{src:""!==this.state.temp_avatar?this.state.temp_avatar:this.state.avatar_url,width:"100vw"}),r.a.createElement("br",null),r.a.createElement(y.j,{className:"state-chip",label:"remove",removable:!0,onClick:function(){return e.deleteFile(e.state.avatar_url)}}),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(y.p,{label:"Select Avatar",id:"a-file-upload",accept:"image/*",name:"images",onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"}}))))))))}}]),t}(n.Component),B=a(29),U=a.n(B),q=(a(37),x.Session.get().payload,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Preferences"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.D,{placeholder:"Old Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{placeholder:"New Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{placeholder:"Confirm New Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit"),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Change"),r.a.createElement(y.d,{raised:!0,onClick:function(){return window.history.go(-1)}},"Cancel")))))}}]),t}(n.Component)),W=x.Session.get().payload,Y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeOldPassword=function(e){a.setState({old_password:e})},a.onChangeNewPassword=function(e){a.setState({new_password:e})},a.onChangeNewPasswordConfim=function(e){a.setState({new_password_confirm:e})},a.confirmReset=function(){a.state.new_password===a.state.new_password_confirm?a.setState({dialogVisible:!0}):a.notify("ERROR","Invalid New Password Confirmation !")},a.checkPassword=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={password_hash:a.state.old_password},e.prev=1,e.next=4,k.a.post("/api/check_password/".concat(a.state._id),t).then((function(e){200==e.data.status&&1===e.data.data.length?a.setState({validOldPassword:!0}):a.notify("ERROR","Wrong Old Password!")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.validOldPassword){e.next=16;break}if(a.state.new_password!==a.state.new_password_confirm){e.next=13;break}return t={password_hash:a.state.new_password,updated_by:a.state.created_by},e.prev=3,e.next=6,k.a.put("/api/edit_profile/".concat(a.state._id),t).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.componentDidMount(),a.setState({validOldPassword:!1,dialogVisible:!1,old_password:"",new_password:"",new_password_confirm:""}),a.notify("SUCCESS","Password Changed!")):a.notify("ERROR","Failed Change Password !");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=14;break;case 13:a.notify("ERROR","Invalid New Password Confirmation !");case 14:e.next=17;break;case 16:a.notify("ERROR","Invalid Old Password !");case 17:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={_id:"",validOldPassword:!1,dialogVisible:!1,old_password:"",new_password:"",new_password_confirm:"",created_by:W.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.a.parse(window.location.search),this.setState({_id:t.user_id});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Change Password"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},this.state.validOldPassword?r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{label:"New Password",placeholder:"New Password",type:"password",value:this.state.new_password,onChange:this.onChangeNewPassword,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{type:"password",label:"Confirm New Password",placeholder:"Confirm New Password",value:this.state.new_password_confirm,onChange:this.onChangeNewPasswordConfim,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.confirmReset},"Change")):r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{placeholder:"Old Password",type:"password",label:"Old Password",value:this.state.old_password,onChange:this.onChangeOldPassword,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.checkPassword},"Submit"))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure CHANGE the password?")))}}]),t}(n.Component),X=a(21),G=a.n(X),K="http://17.5.16.28:9001",J=x.Session.get().payload,Q=[],$=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readNavbarNotif=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={is_read:1};try{k.a.put("/api/read-notification-navbar/".concat(J.userId),t).then((function(e){200===e.data.status&&a.componentDidMount()}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)}))),a.state={isLoading:!0,total_notif:0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===J.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=""!==window.location.href.split("/")[3]&&null!==window.location.href.split("/")[3]&&void 0!==window.location.href.split("/")[3]?"/"+window.location.href.split("/")[3]:"",a=[];a=[{primaryText:r.a.createElement("span",null,r.a.createElement("b",null,"Notifications")," \xa0 ",r.a.createElement(_.a,{to:t+"/notifications"},"See All Notifications"))},{primaryText:"",divider:!0}],k.a.get("/api/notifications-per-user-navbar/".concat(J.userId)).then((function(t){try{200===t.data.status&&(e.setState({isLoading:!1}),t.data.data.map((function(t,n){var l=r.a.createElement("div",{className:"container",style:{padding:"20px",borderRadius:"8px"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("a",{href:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.s,{label:r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name),"\xa0",H()(t.created_at,"dd mmm yy, HH:MM")),r.a.createElement("p",null,t.notification)),iconBefore:!0},r.a.createElement(y.c,{src:t.avatar_url,alt:"user_img"})))))));a[n+1]=l})),Q=a)}catch(n){console.log(n)}}));try{k.a.get("/api/notifications-unread-per-user-navbar-total/".concat(J.userId)).then((function(t){200===t.data.status&&e.setState({total_notif:t.data.data[0].total})}))}catch(n){console.log(n)}}},{key:"render",value:function(){return this.state.isLoading&&(Q=["loading .... "]),r.a.createElement(n.Fragment,null,r.a.createElement(y.w,{label:"ddsg",icon:!0,menuItems:Q,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.BOTTOM},position:y.w.Positions.TOP_RIGHT,animationPosition:"below",listClassName:"tables__with-menus__kebab-list",onMenuBlur:this.readNavbarNotif},r.a.createElement("i",{className:"fa fa-bell has-badge has-badge-large has-badge-warning has-badge-rounded",style:{marginTop:"7px"},"data-badge":this.state.total_notif})))}}]),t}(n.Component),Z=function(e){var t=e.label,a=e.to,n=e.exact,l=e.icon;return r.a.createElement(b.a,{path:a,exact:n},(function(e){var n,c=e.match;return l&&(n=r.a.createElement(y.q,null,l)),r.a.createElement(y.u,{component:_.a,active:!!c,to:a,primaryText:t,leftIcon:n})}))},ee=[{leftIcon:r.a.createElement(y.q,{primary:!0},"create"),primaryText:r.a.createElement("span",{className:"md-text--primary"},"Edit")},{divider:!0},{leftIcon:r.a.createElement(y.q,{error:!0},"delete"),primaryText:r.a.createElement("span",{className:"md-text--error"},"Delete")}],te=(n.Component,a(174),x.Session.get().payload),ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:1,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),ne={routeProps:{path:"/ccs/status",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.componentDidMount(),e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/ccs-status?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",dialogVisible:!0,status:"",label_color:"",description:""})},a.onChangeLabelCOlor=function(e){a.setState({label_color:e})},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-status/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e){return a.setState({status:e.status,label_color:e.label_color,description:e.description}),null}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({_id:t,dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/ccs-status/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!1,status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={status:a.state.status,label_color:a.state.label_color,description:a.state.description},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/ccs-status",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/ccs-status/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,status:"",label_color:"",description:"",module_short_name:"",created_by:te.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-status").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(y.d,{onClick:this.showForm,style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"}),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Status"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{onChange:this.search,placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Status",width:"8%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("p",{style:{color:t.label_color}},t.status)),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement(ae,{id:t._id,setDelete:function(t){return e.setDelete(t)},setUpdate:function(t){return e.setUpdate(t)}})))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Status"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status,onChange:this.onChangeStatus}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Label Color",placeholder:"e.g. red or white or #fff",value:this.state.label_color,onChange:this.onChangeLabelCOlor}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component)},name:"Status"},re=(a(375),x.Session.get().payload),le="";try{k.a.get("/api/get-client-ip").then((function(e){200===e.status&&(le=e.data.IP)}))}catch(Vc){console.log(Vc)}var ce=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={user_id:re.userId,log:""!==t?t:"",app_version:"1.0.0",module_id:""!==a?a:"",from_ip:le},console.log(n),e.prev=2,e.next=5,k.a.post("/api/log",n).then((function(e){e.data.status}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),se=x.Session.get().payload,ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:1,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),oe={routeProps:{path:"/ccs/categories",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.componentDidMount(),e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/ccs-categories?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.onChangeCategory=function(e){a.setState({category:e})},a.onChangeWeight=function(e){a.setState({weight:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-category/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e){return a.setState({category:e.category,description:e.description,weight:e.weight}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({_id:t,dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.delete("/api/ccs-category/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogDeleteVisible:!1,status:"",label_color:"",description:"",_id:"",weight:""})):a.addToast(e.data.message)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),t={weight:a.state.weight,category:a.state.category,description:a.state.description,created_by:a.state.created_by},""!==a.state._id){e.next=13;break}return e.prev=3,e.next=6,k.a.post("/api/ccs-category",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogVisible:!a.state.dialogVisible,category:"",description:"",weight:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/ccs-category/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogVisible:!a.state.dialogVisible,category:"",description:"",_id:"",weight:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.showNotif=function(){var e=r.a.createElement("div",{className:"container",style:{paddingRight:"20px",width:"30vw",height:"15vh",borderRadius:"2vw"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("b",null,"FUll Name"),r.a.createElement("p",null,"data.notification")),r.a.createElement("div",{className:"media-right"},r.a.createElement("p",null))));a.notify("",e)},a.showForm=function(){a.setState({_id:"",dialogVisible:!0,category:"",description:""})},a.state={data:[],toasts:[],_id:"",weight:"",isLoading:!0,dialogVisible:!1,dialogDeleteVisible:!1,category:"",description:"",created_by:se.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-categories").then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:ce("Access Categories Page",t);case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Processing ....")):r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(S.a,null),r.a.createElement(y.d,{onClick:this.showForm,style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"}),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Categories"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{onChange:this.search,placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Status",width:"8%"},{label:"Description",width:"35%"},{label:"Weight",width:"5%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("p",{style:{color:t.label_color}},t.category)),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.weight),r.a.createElement("td",null,r.a.createElement(ie,{id:t._id,setDelete:function(t){return e.setDelete(t)},setUpdate:function(t){return e.setUpdate(t)}})))}))))),r.a.createElement(y.l,{width:"400px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Category"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Category",placeholder:"Category",value:this.state.category,onChange:this.onChangeCategory}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Weight",placeholder:"Weight",type:"number",value:this.state.weight,onChange:this.onChangeWeight})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component)},name:"Categories"},de=x.Session.get().payload,ue=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:1,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),me={routeProps:{path:"/ccs/priorities",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-priorities?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.onChangePriority=function(e){a.setState({priority:e})},a.onChangeMaxRespondTime=function(e){a.setState({max_respond_time:e})},a.onChangeLabelColor=function(e){a.setState({label_color:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-priority/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e){return a.setState({priority:e.priority,label_color:e.label_color,max_respond_time:e.max_respond_time}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({_id:t,dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/ccs-priority/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!1,priority:"",label_color:"",max_respond_time:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={priority:a.state.priority,label_color:a.state.label_color,max_respond_time:a.state.max_respond_time},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/ccs-priority",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,priority:"",label_color:"",max_respond_time:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/ccs-priority/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,priority:"",label_color:"",max_respond_time:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.showForm=function(){a.setState({_id:"",dialogVisible:!0,priority:"",label_color:"",max_respond_time:""})},a.state={data:[],toasts:[],_id:"",dialogVisible:!1,dialogDeleteVisible:!1,status:"",label_color:"",description:"",created_by:de.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-priorities").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.d,{onClick:this.showForm,style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"}),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Priorities"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Priority",width:"8%"},{label:"Max Respond Time (days)",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+t.label_color},t.priority)),r.a.createElement("td",null,t.max_respond_time),r.a.createElement("td",null,r.a.createElement(ue,{id:t._id,setDelete:function(t){return e.setDelete(t)},setUpdate:function(t){return e.setUpdate(t)}})))}))))),r.a.createElement(y.l,{width:"400px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Priority"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Priority",placeholder:"Priority",value:this.state.priority,onChange:this.onChangePriority}),r.a.createElement(y.D,{type:"number",id:"simple-action-dialog-field",label:"Max Respond Time",placeholder:"in days e.g. 1 or 2.5 or 100 etc.",value:this.state.max_respond_time,onChange:this.onChangeMaxRespondTime}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Label Color",placeholder:"e.g. is-warning OR is-success OR is-info OR is-danger OR is-primary ",value:this.state.label_color,onChange:this.onChangeLabelColor})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component)},name:"Priorities"},pe=a(27),fe=(n.Component,a(34)),he=a.n(fe),ge=a(22),be=a.n(ge),Ee=x.Session.get().payload,_e=(n.Component,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.closeDetail=function(){a.props.closeDetail()},a.cancelEditTicket=function(){a.setState({isEditTicket:!1}),a.componentDidMount()},a.successEditTicket=function(){a.setState({isEditTicket:!1}),a.componentDidMount()},a.showForm=function(e){a.setState({formAction:e})},a.finishReply=function(e){a.setState({formAction:e}),a.componentDidMount()},a.finishReject=function(e){a.setState({formAction:e}),a.componentDidMount()},a.finishForward=function(e){a.setState({formAction:e}),a.componentDidMount()},a.setAction=function(e){a.setState({formAction:e})},a.splitAdded=function(e){a.componentDidMount(),a.setState({total_split:e})},a.sendAsLetterConfirm=function(){a.setState({dialogSendAsLetterVisible:!0})},a.sendAsIncomingLetter=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.state.created_by),t={subject:a.state.title,sender:a.state.client_id,file_url:a.state.file_url,created_by:a.state.data[0].created_by},Object(C.a)(t,"file_url",a.state.data[0].file),Object(C.a)(t,"handled_by_user_id",""),Object(C.a)(t,"letter_date",H()(a.state.data[0].created_at,"yyyy-mm-dd")),Object(C.a)(t,"accepted_time",H()(a.state.data[0].created_at,"HH:MM:ss")),Object(C.a)(t,"letter_number","-"),Object(C.a)(t,"status_id",1),Object(C.a)(t,"message",a.state.data[0].description),Object(C.a)(t,"tags",[]),n=t,e.prev=2,e.next=5,k.a.post("/api/sism-letter_in",n).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.data.status){e.next=12;break}return a.setState({dialogSendAsLetterVisible:!1}),e.prev=2,e.next=5,k.a.put("/api/ccs-ticket/".concat(a.state._id),{status_id:9}).then((function(e){200===e.data.status?(a.notify("SUCCESS","Sent as Letter"),a.componentDidMount()):a.notify("ERROR","Failed inserting data")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.og(e.t0);case 10:e.next=13;break;case 12:a.notify("ERROR","Failed inserting data");case 13:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),a.notify("ERROR",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.updateCategory=function(e){a.setState({category_id_edit:e})},a.updatePriority=function(e){a.setState({priority_id_edit:e})},a.updatePriority_Category=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.state.priority_id&&""===a.state.priority_id_edit?a.state.priority_id_edit=a.state.priority_id:a.state.priority_id_edit=a.state.priority_id_edit,""!==a.state.category_id&&""===a.state.category_id_edit?a.state.category_id_edit=a.state.category_id:a.state.category_id_edit=a.state.category_id_edit,""!==a.state.category_id_edit&&""!==a.state.priority_id_edit){e.next=7;break}a.setState({dialogEditCategoryVisible:!1}),alert("Please complete the form."),e.next=16;break;case 7:return t={updated_by:""!==a.state.handled_by_user_id?a.state.handled_by_user_id:Ee.userId,category_id:a.state.category_id_edit,priority_id:a.state.priority_id_edit},e.prev=8,e.next=11,k.a.put("/api/ccs-ticket/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.componentDidMount(),a.notify("SUCCESS",e.data.message),ce("Update Ticket ID "+a.state._id,a.state.module_id),a.setState({dialogEditCategoryVisible:!1,category_id_edit:"",priority_id_edit:""})):a.notify("ERROR","Failed processing data")}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[8,13]])}))),a.rejectReply=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={status_id:7,ticket_id:a.state._id,created_by:n},e.prev=1,e.next=4,k.a.put("/api/ccs-ticket-reply-reject/".concat(t),r).then((function(e){200===e.data.status?(a.componentDidMount(),a.notify("SUCCESS","You Rejected!"),ce("Reject Ticket  Reply ID "+t,a.state.module_id)):a.notify("ERROR","Failed processing data")}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),a.notify("ERROR","Failed processing data");case 10:a.setState({replyAnswer:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),a.saveTimeResolution=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={ticket_id:a.props.ticket_id,handled_by_user_id:Ee.userId,resolution_at:H()(new Date,"yyyy-mm-dd HH:MM:ss")},e.prev=1,e.next=4,k.a.post("/api/ccs-ticket-time-resolution",t).then((function(e){200===e.data.status&&console.log("time resolution saved")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.finishSplit=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={status_id:2,updated_by:a.state.created_by},e.prev=1,e.next=4,k.a.put("/api/ccs-ticket-finish-split/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.componentDidMount(),a.setState({formAction:""}),a.notify("SUCCESS","Ticket Splitted!"),ce("Finish Split Ticket   ID "+a.state._id,a.state.module_id)):a.notify("ERROR","Failed processing data")}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),a.notify("ERROR","Failed processing data");case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.showModalAttachment=function(e){document.getElementById(e).classList.toggle("is-active")},a.editHandler=function(){a.state.formAction="forward",window.scrollTo(0,1500)},a.state={isLoading:!0,failed_loading_data:!1,isEditTicket:!1,_id:"",total_split:0,created_by:"",parent_ticket_id:"",data:[],data_parent:[],child_ticket:[],role:"",attachment:[],answers_attachment:[],modalRating:[],rating:[],reviews:[],answers:[],attachment_parent:[],replyAnswer:!1,rejectAnswer:!1,formAction:"",title:"",file_url:[],client_id_from_user:"",client_id:"",subject:"",priorities:[],categories:[],ticket_forward:[],ticket_forward_from_support:[],ticket_forward_from_supervisor:[],ticket_forward_from_helpdesk:[],priority_id:"",category_id:"",priority_id_edit:"",category_id_edit:"",module_id:"",status_id:"",category:"",priority:"",email:"",label_color_priority:"",ticket_reply_id:"",badRating:!0,dialogFinishSplitVisible:!1,dialogSendAsLetterVisible:!1,dialogEditCategoryVisible:!1,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a.socket=G()(K),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),e.prev=11,e.next=14,k.a.post("/api/role-control-by-link-role-id",{link:"/ccs/task",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(l.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&l.setState({role_read:!0}),"create"===e.type_control&&l.setState({role_create:!0}),"update"===e.type_control&&l.setState({role_update:!0}),"delete"===e.type_control&&l.setState({role_delete:!0})})))}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(console.log("role update ",this.state.role_update),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),!this.props.role.includes("Customer")){e.next=31;break}return e.prev=22,e.next=25,k.a.get("/api/user/".concat(Ee.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){l.setState({client_id_from_user:e.client_id})}))}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:console.log(this.state.client_id_from_user);case 31:return n=F.a.parse(window.location.search),this.setState({_id:n.ticket_id,ticket_reply_id:n.ticket_reply_id}),e.prev=33,e.next=36,k.a.get("/api/ccs-ticket/".concat(n.ticket_id)).then((function(e){200===e.data.status&&e.data.data.length>0?l.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id||"",created_by:e.data.data[0].created_by,title:e.data.data[0].title,category_id:e.data.data[0].category_id,client_id:e.data.data[0].client_id,email:e.data.data[0].email,category:e.data.data[0].category,status_id:e.data.data[0].status_id,label_color_priority:e.data.data[0].label_color_priority,priority_id:e.data.data[0].priority_id,priority:e.data.data[0].priority,handled_by_user_id:e.data.data[0].handled_by_user_id,isLoading:!1}):(console.log("tidak ada tiket"),l.setState({failed_loading_data:!0}))}));case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(33),console.log(e.t3);case 41:if(this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(t._id)).then((function(e){200===e.data.status&&(t.file=e.data.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}()),""===this.state.parent_ticket_id){e.next=54;break}return e.prev=43,e.next=46,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&l.setState({data_parent:e.data.data})}));case 46:return e.next=48,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&l.setState({attachment_parent:e.data.data})}));case 48:e.next=53;break;case 50:e.prev=50,e.t4=e.catch(43),console.log(e.t4);case 53:this.state.data_parent.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(t._id)).then((function(e){200===e.data.status&&(t.file=e.data.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}());case 54:return e.prev=54,e.next=57,k.a.get("/api/ccs-ticket-by-parent_id/".concat(this.state._id)).then((function(e){200===e.data.status&&l.setState({child_ticket:e.data.data})}));case 57:e.next=62;break;case 59:e.prev=59,e.t5=e.catch(54),console.log(e.t5);case 62:return e.prev=62,e.next=65,k.a.get("/api/ccs-ticket-forwarding-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&(l.setState({ticket_forward:e.data.data}),e.data.data.map((function(e,t){return e.role.includes("Implementator")||e.role.includes("Support Pelayanan")?l.state.ticket_forward_from_support[t]=e:e.role.includes("Supervisor CCS")?l.state.ticket_forward_from_supervisor[t]=e:e.role.includes("Help Desk")&&(l.state.ticket_forward_from_helpdesk[t]=e),!1})))}));case 65:e.next=70;break;case 67:e.prev=67,e.t6=e.catch(62),console.log(e.t6);case 70:return this.state.ticket_forward.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-forwarding-file-by-ticket-forwarding-id/".concat(t._id)).then((function(e){200===e.data.status&&(t.file=e.data.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}()),e.prev=71,e.next=74,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return t[a]=n,!1})),l.setState({priorities:t})}}));case 74:e.next=79;break;case 76:e.prev=76,e.t7=e.catch(71),console.log(e.t7);case 79:return e.prev=79,e.next=82,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.category,value:e._id};return t[a]=n,!1})),l.setState({categories:t})}}));case 82:e.next=87;break;case 84:e.prev=84,e.t8=e.catch(79),console.log(e.t8);case 87:case"end":return e.stop()}}),e,this,[[2,7],[11,16],[22,27],[33,38],[43,50],[54,59],[62,67],[71,76],[79,84]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.role.includes("Supervisor CCS")?[{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}},{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")||this.props.role.includes("Support Pelayanan")?this.state.handled_by_user_id===Ee.userId&&[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&this.state.handled_by_user_id===Ee.userId&&[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}],this.state.failed_loading_data?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"FAILED LOADING DATA .... ")):this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading .... ")):r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(S.a,null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}))),r.a.createElement(y.r,{style:{padding:"30px"},ref:function(t){return e.componentRef=t}},this.state.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("style",null," .detail-ticket-id-print-only {\n                                                display : none;\n                                            }\n                                            .pagebreak {\n                                                display : none;\n                                            }\n                                            @media print {\n                                                .detail-ticket-id-print-only {\n                                                    display : block;\n                                                }\n                                                .pagebreak {\n                                                    page-break-before: always;\n                                                }\n                                            }\n                                        "),r.a.createElement(y.i,{size:12,className:"box",style:{borderRadius:"10px"}},r.a.createElement("div",{key:a},r.a.createElement("div",{className:"detail-ticket-id-print-only"},r.a.createElement("h3",null,"Detail #",t._id)),r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:null!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-11"},r.a.createElement("h4",null,t.title),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("p",null,r.a.createElement("b",null,"Added by :")," \xa0 ",r.a.createElement("i",null,null!==t.created_full_name?t.created_full_name:t.created_client_name)),r.a.createElement("p",null,r.a.createElement("b",null,"BPR/Client :")," \xa0",r.a.createElement("i",null,t.client_name))),r.a.createElement("div",{className:"column is-1"},e.state.role_update||t.created_by===Ee.userId&&1===t.status_id&&!e.state.isEditTicket?r.a.createElement("button",{className:"button is-small is-info",onClick:function(){return e.setState({isEditTicket:!0})}},r.a.createElement("i",{className:"fa fa-pencil"}),"\xa0 Edit"):"")),e.state.isEditTicket?r.a.createElement(Ct,{ticket_id:t._id,description:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),cancelEditTicket:function(t){return e.cancelEditTicket(t)},successEditTicket:e.successEditTicket}):r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}})),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Origin Ticket :")," "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:null!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("h4",null,e.title),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("p",null,r.a.createElement("b",null,"Added by :")," \xa0 ",r.a.createElement("i",null,null!==e.created_full_name?e.created_full_name:e.created_client_name)),r.a.createElement("p",null,r.a.createElement("b",null,"BPR/Client :")," \xa0",r.a.createElement("i",null,e.client_name)),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),void 0!==e.file&&e.file.length>0?r.a.createElement(xe,{file:e.file}):"")))}))))):"",r.a.createElement("br",null),void 0!==t.file&&t.file.length>0?r.a.createElement(xe,{file:t.file}):"",r.a.createElement("br",null),(e.state.role_update||e.props.role.includes("Help Desk")&&t.handled_by_user_id===Ee.userId&&4===t.status_id)&&8!==t.status_id?r.a.createElement(n.Fragment,null,r.a.createElement("p",null," ",r.a.createElement("b",null,"Category & Priority")," "),r.a.createElement(y.y,{placeholder:"Update Category",sameWidth:!0,className:"md-cell md-cell--4-tablet md-cell--4",menuItems:e.state.categories,value:e.state.category_id,onChange:e.updateCategory}),r.a.createElement(y.y,{placeholder:"Update Priority",className:"md-cell md-cell--4-tablet md-cell--4",value:e.state.priority_id,sameWidth:!0,menuItems:e.state.priorities,onChange:e.updatePriority}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.setState({dialogEditCategoryVisible:!0})}},"UPDATE"),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:e.state.dialogEditCategoryVisible,onHide:function(){return!e.state.dialogEditCategoryVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:e.updatePriority_Category},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogEditCategoryVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?"))):r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"\xa0"),""!==e.state.category_id?r.a.createElement("div",null,r.a.createElement("b",null,"Category"),"  : ",r.a.createElement("p",null,e.state.category)):"",""!==e.state.priority_id?r.a.createElement("div",null,r.a.createElement("b",null,"Priority"),"  :",r.a.createElement("p",null,r.a.createElement("span",{className:"tag "+e.state.label_color_priority},r.a.createElement("b",null,e.state.priority)))):""),""!==t.status_id?r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px"}},r.a.createElement("b",null,"Status"),"  :",r.a.createElement("p",null,r.a.createElement("b",{style:{color:t.label_color_status}},t.status))):"",e.state.role_update&&8!==t.status_id?""!==t.handled_by&&null!==t.handled_by?r.a.createElement("div",null,r.a.createElement("b",null,"Handled By"),"  : ",r.a.createElement("p",null,r.a.createElement("button",{className:"button is-small",onClick:function(){e.setState({formAction:"forward"}),window.scrollTo(0,1500)}}," ",t.handled_by," \xa0 |  \xa0 ",r.a.createElement("i",{className:"fa fa-pencil"})," \xa0 Edit"))):"":""!==t.handled_by&&null!==t.handled_by?r.a.createElement("div",null,r.a.createElement("b",null,"Handled By"),"  : ",r.a.createElement("p",null,t.handled_by)):"",r.a.createElement(n.Fragment,null),t.status_id>3&&t.status_id<8?r.a.createElement(n.Fragment,null,r.a.createElement("b",null,"Time Left : ")," ",r.a.createElement("p",null," ",t.time_left_adjusted>0?t.time_left_adjusted:t.time_left," days left ")):"",e.props.role.includes("Customer")?"":r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"pagebreak"}," "),r.a.createElement("p",null,r.a.createElement("b",null,"Notes : ")),e.state.ticket_forward.map((function(e,t){return""!==e.note?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"notification",style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("b",null,e.full_name)),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.note}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ke,{file:e.file}):"")))):""}))))))),r.a.createElement("div",{className:"pagebreak"}," "),r.a.createElement(y.i,{size:12},function(){if(5===t.status_id||7===t.status_id||8===t.status_id)return r.a.createElement(ye,{ticket_id:t._id,role:e.props.role,ticket:e.state.data,client_email:e.state.email})}()))}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("section",{className:" md-cell md-cell--12"},function(){if(e.props.role.includes("Supervisor CCS"))switch(e.state.status_id){case 1:return r.a.createElement(n.Fragment,null,e.state.child_ticket.length<=0?r.a.createElement(n.Fragment,null,""===e.state.parent_ticket_id?"split"!==e.state.formAction&&"forward"!==e.state.formAction?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"button ",onClick:e.sendAsLetterConfirm},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter"),"\xa0",r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")):"":"forward"!==e.state.formAction?r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute"):""):r.a.createElement(n.Fragment,null,""===e.state.parent_ticket_id?r.a.createElement(n.Fragment,null,"split"!==e.state.formAction?r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split"):"","\xa0",e.state.child_ticket.length>0?r.a.createElement("button",{className:"button",onClick:function(){return e.setState({dialogFinishSplitVisible:!0})}},r.a.createElement("i",{className:"fa fa-check"}),"\xa0 Finish Split"):""):"",e.state.child_ticket.length>0?r.a.createElement("div",{className:"is-vcentered"},r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"Total Split : "),r.a.createElement("b",null,e.state.child_ticket.length),"\xa0",r.a.createElement("b",null,e.state.child_ticket.length>1?" Splits":" Split"),"\xa0",r.a.createElement(_.a,{to:"/ccs/task?tab_name=available-ticket",className:"button is-small is-light "},"See Splitted"))):""),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:e.state.dialogFinishSplitVisible,onHide:function(){return!e.state.dialogFinishSplitVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:e.finishSplit},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogFinishSplitVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to finish?")),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:e.state.dialogSendAsLetterVisible,onHide:function(){return!e.state.dialogSendAsLetterVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:e.sendAsIncomingLetter},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogSendAsLetterVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to send as Incoming Letter?")));case 3:return"forward"!==e.state.formAction?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"set_handler"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0"):"";default:return""}else if(e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")){if(e.state.handled_by_user_id===Ee.userId&&""!==e.state.category_id&&""!==e.state.priority_id&&4===e.state.status_id)return"reply"!==e.state.formAction&&"forward"!==e.state.formAction?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Finish"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"";if(7===e.state.status_id)return"reply"!==e.state.formAction?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Finish"),"\xa0"):""}else if(e.props.role.includes("Customer")){if((e.state.created_by===Ee.userId||e.state.client_id===e.state.client_id_from_user)&&8===e.state.status_id)return r.a.createElement(_.a,{to:"/ccs/ticket/form"},r.a.createElement("button",{className:"button   "},r.a.createElement(y.q,null,"create"),"\xa0",r.a.createElement("b",null,"Write New Request")))}else if(e.props.role.includes("Specialist")&&e.state.handled_by_user_id===Ee.userId)return 4===e.state.status_id&&"reply"!==e.state.formAction&&"forward"!==e.state.formAction?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Finish"),"\xa0",r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to")):7===e.state.status_id&&"reply"!==e.state.formAction&&"forward"!==e.state.formAction?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Finish")):""}(),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id,splitAdded:function(t){return e.splitAdded(t)},showForm:function(t){return e.showForm(t)},finishSplit:e.finishSplit});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id,finishForward:function(t){return e.finishForward(t)},showForm:function(t){return e.showForm(t)}});case"set_handler":return r.a.createElement(wt,{role:e.props.role,ticket_id:e.state._id,showForm:function(t){return e.showForm(t)}});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id,finishReply:function(t){return e.finishReply(t)},showForm:function(t){return e.showForm(t)}});case"reject":return r.a.createElement(kt,{role:e.props.role,ticket_id:e.state._id,finishReject:function(t){return e.finishReject(t)},showForm:function(t){return e.showForm(t)}});default:return""}}()))))}}]),t}(n.Component)),ye=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.cancelReject=function(){a.setState({rejectAnswer:!1}),a.componentDidMount()},a.cancelEditReply=function(){a.setState({editMode:!1})},a.changeRating=function(e,t){var n=a.state.rating;n[t]=e,a.setState({rating:n}),console.log(a.state.rating[t])},a.changeReview=function(e,t){a.state.reviews[t]=e},a.replyEdited=function(){a.setState({editMode:!1}),a.componentDidMount()},a.acceptReply=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={module_id:a.state.module_id,status_id:8,ticket_id:a.props.ticket_id,created_by:n,updated_by:Ee.userId},e.prev=1,e.next=4,k.a.put("/api/ccs-ticket-reply-accept/".concat(t),r).then(function(){var e=Object(o.a)(i.a.mark((function e(n){var l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.data.status){e.next=33;break}if(a.notify("SUCCESS","You Accepted!"),ce("Accept Ticket  Reply ID "+t,a.state.module_id),!a.props.client_email.includes(",")){e.next=21;break}l=a.props.client_email.split(","),c=0;case 6:if(!(c<l.length)){e.next=19;break}return s={email_to:l[c],subject:"Reply Ticket Notification",message:"<p>Your ticket is already replied. Please check http://17.5.16.28:9001/ccs/ticket/detail?ticket_id=".concat(r.ticket_id," </p>")},e.prev=8,e.next=11,k.a.post("/ccs-send-email",s).then((function(e){200===e.data.status?console.log("sent"):console.log("error send email")}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log(e.t0);case 16:c++,e.next=6;break;case 19:e.next=30;break;case 21:return o={email_to:a.props.client_email,subject:"Reply Ticket Notification",message:"<p>Your ticket is already replied. Please check http://17.5.16.28:9001/ccs/ticket/detail?ticket_id=".concat(r.ticket_id," </p>")},e.prev=22,e.next=25,k.a.post("/ccs-send-email",o).then((function(e){200===e.data.status?console.log("sent"):console.log("error send email")}));case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(22),console.log(e.t1);case 30:a.componentDidMount(),e.next=34;break;case 33:a.notify("ERROR","Failed Accepting ticket");case 34:case"end":return e.stop()}}),e,null,[[8,13],[22,27]])})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),a.notify("ERROR","Failed Accepting ticket");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),a.addRating=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={module_id:a.state.module_id,ticket_reply_id:t,rating:a.state.rating[t],review:a.state.reviews[t],created_by:Ee.userId},!(null===a.state.rating[t]||void 0===a.state.rating[t]||a.state.rating[t]<=0||null===a.state.reviews[t]||void 0===a.state.reviews[t]||a.state.reviews[t]<=0)){e.next=5;break}alert("Invalid Rating."),e.next=14;break;case 5:return e.prev=5,e.next=8,k.a.post("/api/ccs-ticket-rating",n).then((function(e){200===e.data.status?(a.notify("SUCCESS","You Rated This!"),ce("Rate Ticket  Reply ID "+t,a.state.module_id),a.state.modalRating[t]=!1,document.getElementById("modal-"+t).classList.remove("is-active"),a.componentDidMount()):a.notify("ERROR","Failed processing data")}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0),a.notify("ERROR","Failed adding rating ");case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),a.state={ticket:a.props.ticket,module_id:"",rating:[],reviews:[],isLoading:!0,rejectAnswer:!1,editMode:!1,answers:[],modalRating:[],dialogAcceptVisible:!1},a.socket=G()(K),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.props.ticket_id)).then((function(e){200===e.data.status&&(e.data.data.map((function(e,t){return n.state.modalRating[e._id]=!0,!1})),n.setState({answers:e.data.data,isLoading:!1}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:this.state.answers.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-reply-file-by-ticket-id/".concat(t._id)).then((function(e){200===e.data.status&&(t.file=e.data.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}());case 20:case"end":return e.stop()}}),e,this,[[2,7],[11,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Replies :"),e.props.role.includes("Customer")?e.state.answers.length>0?e.state.answers.map((function(t,a){return 8===t.status_id?r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12 ",key:a,id:t._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media "},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.created_by)},r.a.createElement("h5",null,t.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),void 0!==t.file&&t.file.length>0?r.a.createElement(ve,{file:t.file}):"",null!==t.rating&&null!==t.review?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Rating & Review :")),r.a.createElement("article",null,r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url_rating?t.avatar_url_rating:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,t.client_name,"  "),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(he.a,{rating:parseFloat(t.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.review}}))))))):r.a.createElement("div",{id:"modal-"+t._id,className:e.state.modalRating[t._id]?"modal is-active":"modal"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Make Rating")),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("h4",null,r.a.createElement("b",null,"Ticket Request")),e.state.ticket.map((function(e,t){return r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",null,r.a.createElement("b",null,e.title)),r.a.createElement("p",null,r.a.createElement("i",null,e.client_name)),r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("br",null),void 0!==e.file&&e.file.length>0?r.a.createElement(xe,{file:e.file}):"",r.a.createElement("br",null)))})),r.a.createElement("h4",null,r.a.createElement("b",null,"Reply")),r.a.createElement("div",{className:"box  ",key:a,id:t._id},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.created_by)},r.a.createElement("h5",null,t.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),void 0!==t.file&&t.file.length>0?r.a.createElement(ve,{file:t.file}):"")))),r.a.createElement("h4",null,r.a.createElement("b",null,"Rate")),r.a.createElement(he.a,{rating:void 0!==e.state.rating[t._id]?parseFloat(e.state.rating[t._id].toString()):0,starRatedColor:"#f0c260",changeRating:function(a){return e.changeRating(a,t._id)},numberOfStars:5,name:"rating"}),null===e.state.rating[t._id]||void 0===e.state.rating[t._id]||e.state.rating[t._id]<=0?r.a.createElement("p",{style:{color:"red"}},"Rate field is required"):"",r.a.createElement("h4",null,r.a.createElement("b",null,"Review")),r.a.createElement(y.D,{required:!0,rows:2,placeholder:"Review Notes",fullWidth:!0,value:e.state.reviews[t._id],errorText:"Review field is required.",onChange:function(a){return e.changeReview(a,t._id)}}),null===e.state.reviews[t._id]||""===e.state.reviews[t._id]||void 0===e.state.reviews[t._id]||e.state.reviews[t._id].length<=0?r.a.createElement("p",{style:{color:"red"}},"Review field is required"):""),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.addRating(t._id)}},"Submit"))))))))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Data Showed ... "))})):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Data Showed ... ")):e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")||e.props.role.includes("Specialist")?e.state.answers.length>0?e.state.answers.map((function(e,t){switch(e.status_id){case 8:return r.a.createElement(n.Fragment,null,e.created_by===Ee.userId?r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,style:{backgroundColor:"#c4f2bd",borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("h5",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"",null!==e.rating&&null!==e.review?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Rating & Review :")),r.a.createElement("article",null,r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url_rating?e.avatar_url_rating:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.client_name,"  "),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.review}}))))))):"")))):r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("h5",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"",null!==e.rating&&null!==e.review?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Rating & Review :")),r.a.createElement("article",null,r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url_rating?e.avatar_url_rating:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.client_name,"  "),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.review}}))))))):"")))));case 7:return r.a.createElement(n.Fragment,null,e.created_by===Ee.userId?r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,style:{backgroundColor:"#fccfd7",borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("h5",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"")))):r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("h5",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"")))));case 5:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("h5",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"")))));default:return""}})):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Data Showed ... ")):e.props.role.includes("Supervisor CCS")?e.state.answers.length>0?e.state.answers.map((function(t,a){switch(t.status_id){case 8:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12 ",key:a,id:t._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.created_by)},r.a.createElement("b",null,t.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),void 0!==t.file&&t.file.length>0?r.a.createElement(ve,{file:t.file}):"",t.created_by!==Ee.userId?r.a.createElement("p",{style:{fontSize:"8pt",color:"green"}},r.a.createElement("i",null,"You Accepted this.")):"",null!==t.rating&&null!==t.review?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Rating & Review :")),r.a.createElement("article",null,r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url_rating?t.avatar_url_rating:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,t.client_name,"  "),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(he.a,{rating:parseFloat(t.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.review}}))))))):"")))));case 7:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12 ",key:a,id:t._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.created_by)},r.a.createElement("b",null,t.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),void 0!==t.file&&t.file.length>0?r.a.createElement(ve,{file:t.file}):"",t.created_by!==Ee.userId?r.a.createElement("p",{style:{fontSize:"8pt",color:"red"}},r.a.createElement("i",null,"You Rejected this.")):"")))));case 5:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12",key:a,id:t._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==t.avatar_url?t.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.created_by)},r.a.createElement("b",null,t.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(t.created_at,"dd mmm yyyy, HH:MM")),e.state.editMode&&!e.state.rejectAnswer?r.a.createElement(bt,{reply:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),ticket_reply_id:t._id,replyEdited:function(t){return e.replyEdited(t)},ticket_id:t.ticket_id,cancelEditReply:function(t){return e.cancelEditReply(t)},client_email:e.props.client_email}):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.replies}}),e.state.rejectAnswer||e.state.editMode?"":r.a.createElement(n.Fragment,null,void 0!==t.file&&t.file.length>0?r.a.createElement(ve,{file:t.file}):"",r.a.createElement("br",null),r.a.createElement("div",{style:{padding:"1vw"}},e.state.rejectAnswer?"":r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(){return e.setState({dialogAcceptVisible:!0})},className:"button is-small is-success"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-check"})),r.a.createElement("span",{className:"text"},"ACCEPT")),"\xa0",r.a.createElement("button",{onClick:function(){return e.setState({rejectAnswer:!e.state.rejectAnswer})},className:"button is-small is-danger"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-times"})),r.a.createElement("span",{className:"text"},"REJECT"))))),e.state.rejectAnswer&&!e.state.editMode?r.a.createElement(kt,{role:e.props.role,ticket_id:t.ticket_id,ticket_reply_id:t._id,cancelReject:function(t){return e.cancelReject(t)}}):"")),e.state.rejectAnswer?"":r.a.createElement("div",{className:"media-right"},r.a.createElement("button",{className:"button is-small",onClick:function(){return e.setState({editMode:!e.state.editMode})}},r.a.createElement("i",{className:"fa fa-pencil"}),"\xa0 Edit")))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:e.state.dialogAcceptVisible,onHide:function(){return!e.state.dialogAcceptVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.acceptReply(t._id,t.created_by)}},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogAcceptVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?")));default:return""}})):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Data Showed ... ")):e.props.role.includes("Superadmin")||e.props.role.includes("Direktur")?e.state.answers.length>0?e.state.answers.map((function(e,t){switch(e.status_id){case 8:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12 ",key:t,id:e._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("b",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"",e.created_by!==Ee.userId?r.a.createElement("p",{style:{fontSize:"8pt",color:"green"}},r.a.createElement("i",null,"Accepted")):"",null!==e.rating&&null!==e.review?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Rating & Review :")),r.a.createElement("article",null,r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url_rating?e.avatar_url_rating:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.client_name,"  "),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.review}}))))))):"")))));case 7:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12 ",key:t,id:e._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("b",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"",e.created_by!==Ee.userId?r.a.createElement("p",{style:{fontSize:"8pt",color:"red"}},r.a.createElement("i",null,"Rejected")):"")))));case 5:return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"box  md-cell md-cell--12",key:t,id:e._id,style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media columns"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.created_by)},r.a.createElement("b",null,e.full_name,"  ")),r.a.createElement("p",{style:{fontSize:"8pt"}},H()(e.created_at,"dd mmm yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}),r.a.createElement(n.Fragment,null,void 0!==e.file&&e.file.length>0?r.a.createElement(ve,{file:e.file}):"",r.a.createElement("br",null)))))));default:return""}})):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Data Showed ... ")):void 0)}}]),t}(n.Component),ve=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).showModalAttachment=function(e){document.getElementById(e).classList.toggle("is-active")},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),function(){if(e.props.file.length>0)return r.a.createElement("p",null,r.a.createElement("b",null,"Attachments :"))}(),r.a.createElement("div",{className:"columns"},this.props.file.map((function(t,a){if(null!==t.file_url){var n,l=t.file_url.split("."),c=l[l.length-1],s=t.file_url.split("/");return n=t.file_url.replace(s[s.length-1],encodeURIComponent(s[s.length-1])),"png"===c||"jpg"===c||"jpeg"===c||"gif"===c||"bmp"===c?r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},r.a.createElement("img",{src:window.location.origin+n,alt:"File attachment"}),"\xa0"),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}}))):"zip"===c||"rar"===c||"doc"===c||"docx"===c||"xls"===c||"xlsx"===c||"ppt"===c||"pptx"===c?r.a.createElement("span",{className:"tag"},r.a.createElement("a",{href:t.file_url},r.a.createElement("i",{className:"fa fa-download"}),"\xa0",t.file_url)):r.a.createElement("div",{className:"column is-2"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"20vh"}})," \xa0",r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},"Full Size \xa0 ",r.a.createElement("i",{className:"fa fa-expand"})),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}})))}}))),r.a.createElement("br",null))}}]),t}(n.Component),ke=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).showModalAttachment=function(e){document.getElementById(e).classList.toggle("is-active")},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,function(){if(e.props.file.length>0)return r.a.createElement("p",null,r.a.createElement("b",null,"Attachments :"))}(),r.a.createElement("div",{className:"columns"},this.props.file.map((function(t,a){if(null!==t.file_url){var n,l=t.file_url.split("."),c=l[l.length-1],s=t.file_url.split("/");return n=t.file_url.replace(s[s.length-1],encodeURIComponent(s[s.length-1])),"png"===c||"jpg"===c||"jpeg"===c||"gif"===c||"bmp"===c?r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},r.a.createElement("img",{src:window.location.origin+n,alt:"File attachment"}),"\xa0"),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("img",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}}))):"zip"===c||"rar"===c||"doc"===c||"docx"===c||"xls"===c||"xlsx"===c||"ppt"===c||"pptx"===c?r.a.createElement("span",{className:"tag"},r.a.createElement("a",{href:t.file_url},r.a.createElement("i",{className:"fa fa-download"}),"\xa0",t.file_url)):r.a.createElement("div",{className:"column is-2"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"20vh"}})," \xa0",r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},"Full Size \xa0 ",r.a.createElement("i",{className:"fa fa-expand"})),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}})))}}))))}}]),t}(n.Component),xe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).showModalAttachment=function(e){document.getElementById(e).classList.toggle("is-active")},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,function(){if(e.props.file.length>0)return r.a.createElement("p",null,r.a.createElement("b",null,"Attachments :"))}(),r.a.createElement("div",{className:"columns"},this.props.file.map((function(t,a){if(null!==t.file_url){var n,l=t.file_url.split("."),c=l[l.length-1],s=t.file_url.split("/");return n=t.file_url.replace(s[s.length-1],encodeURIComponent(s[s.length-1])),"png"===c||"jpg"===c||"jpeg"===c||"gif"===c||"bmp"===c?r.a.createElement("div",null," ",r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},r.a.createElement("img",{src:window.location.origin+n,alt:"File attachment"}),"\xa0"),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("img",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}}))):"zip"===c||"rar"===c||"doc"===c||"docx"===c||"xls"===c||"xlsx"===c||"ppt"===c||"pptx"===c?r.a.createElement("span",{className:"tag"},r.a.createElement("a",{href:t.file_url},r.a.createElement("i",{className:"fa fa-download"}),"\xa0",t.file_url)):r.a.createElement("div",{className:"column is-2"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"20vh"}})," \xa0",r.a.createElement("a",{onClick:function(){return e.showModalAttachment("modal-"+t._id)}},"Full Size \xa0 ",r.a.createElement("i",{className:"fa fa-expand"})),r.a.createElement("div",{className:"modal",id:"modal-"+t._id},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("iframe",{src:t.file_url,frameborder:"0",style:{width:"100%",height:"85vh"}})," \xa0"),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return e.showModalAttachment("modal-"+t._id)}})))}}))))}}]),t}(n.Component),we=a(30),Se=x.Session.get().payload,Pe=[],Ce=[],Ne=new FormData,Oe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeClientId=function(e){var t=a.state.clients.indexOf(e),n=Ce[t];a.setState({client_id:n}),""===n?a.setState({invalidClientId:!0}):a.setState({invalidClientId:!1})},a.onChangeTitle=function(e){a.setState({title:e}),""===e?a.setState({invalidTitle:!0}):a.setState({invalidTitle:!1})},a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],!1!==a.state.invalidClientId||!1!==a.state.invalidTitle){e.next=30;break}if(a.setState({isProcessing:!0}),r={module_id:a.state.module_id,file_url:a.state.file_url,client_id:a.state.client_id,title:a.state.title,description:n.innerHTML,parent_ticket_id:"",category_id:a.state.category_id,priority_id:a.state.priority_id,handled_by_user_id:a.state.handled_by_user_id},""===a.state._id||void 0===a.state._id){e.next=18;break}return r.updated_by=a.state.created_by,r.status_id=1,e.prev=8,e.next=11,k.a.put("/api/ccs-ticket/".concat(a.state._id),r).then((function(e){if(200===e.data.status){if(a.state.file_url.length>0){a.state.formdata.map((function(e,t){return Ne.append("file",e),!1}));try{k.a.post("/upload-file-ccs",Ne).then((function(e){e.data.success&&a.setState({isProcessing:!1})}))}catch(Vc){console.log(Vc)}}a.notify("SUCCESS",e.data.message)}else a.notify("ERROR","Failed processing data")}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),a.notify("ERROR",e.t0);case 16:e.next=28;break;case 18:return r.created_by=a.state.created_by,r.status_id=1,e.prev=20,e.next=23,k.a.post("/api/ccs-ticket",r).then(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.data.status){if(a.state.file_url.length>0){n=new FormData,a.state.formdata.map((function(e,t){n.append("file",e)})),console.log(n);try{k.a.post("/upload-file-ccs",n).then((function(e){e.data.success&&a.setState({isProcessing:!1})}))}catch(Vc){console.log(Vc)}}a.notify("SUCCESS","Ticket Saved"),ce("Insert New Ticket",a.state.module_id),window.history.go(-1)}else a.notify("ERROR","Failed processing data");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(20),console.log(e.t1);case 28:e.next=32;break;case 30:""===a.state.title?a.setState({invalidTitle:!0}):a.setState({invalidTitle:!1}),""===a.state.client_id?a.setState({invalidClientId:!0}):a.setState({invalidClientId:!1});case 32:case"end":return e.stop()}}),e,null,[[8,13],[20,25]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){e.name,e.size,e.type;var n=e.lastModified;new Date(n);a.setState({file_url:[].concat(Object(we.a)(a.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(a.state.formdata),[e])})},a.deleteFile=function(e){var t=a.state.formdata.filter((function(t){return!t.name.includes(e)}));a.setState({formdata:t});var n=a.state.file_url.indexOf(e);n>-1&&a.state.file_url.splice(n,1)},a.state={_id:"",formdata:[],module_id:"",clients:[],file_url:[],isCustomer:!1,client_id:"",title:"",category_id:"",priority_id:"",description:"",handled_by_user_id:"",created_by:Se.userId,isProcessing:!1,invalidClientId:null,invalidTitle:null},a.onChangeClientId=a.onChangeClientId.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Description",height:"20vh"}),e.next=14,k.a.get("/api/clients").then((function(e){try{200===e.data.status&&(e.data.data.map((function(e,t){if(e.client_code>0){var a={label:e.client_code+" - "+e.client_name,value:e._id};Pe[t]=a.label,Ce[t]=e._id}return!1})),n.setState({clients:Pe}))}catch(Vc){console.log(Vc)}}));case 14:if(!this.props.role.includes("Customer")){e.next=19;break}return this.setState({isCustomer:!0}),e.next=18,k.a.get("/api/user/".concat(Se.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,t){n.setState({client_id:e.client_id})}))}catch(Vc){console.log(Vc)}}));case 18:console.log(this.state.client_id);case 19:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isProcessing?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,{className:"box grid-example md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Form Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement(y.D,{id:"floating-label-counter-field",label:"Title",placeholder:"Title",maxLength:100,className:"md-cell md-cell--bottom",defaultValue:this.state.title,onChange:function(t){return e.onChangeTitle(t)}}),this.state.invalidTitle?r.a.createElement("p",{style:{color:"red"}},"This field should be filled"):"",!1===this.state.isCustomer?r.a.createElement(n.Fragment,null,r.a.createElement(y.y,{id:"select-field-2",label:"BPR/Client",placeholder:"Select BPR/Client",menuItems:this.state.clients,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.TOP},onChange:this.onChangeClientId,filter:y.b.fuzzyFilter,className:"md-cell md-cell--4-tablet md-cell--6"}),this.state.invalidClientId?r.a.createElement("p",{style:{color:"red"}},"This field should be filled"):""):"",r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),this.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit"),r.a.createElement(_.a,{to:"/ccs/task"},r.a.createElement(y.d,{flat:!0},"Cancel")))))}}]),t}(n.Component),De=x.Session.get().payload,je=[],Te=new FormData,Ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeMaxTimeRespond=function(e){a.setState({max_resolution_time:e})},a.onChangeHandlerId=function(e){a.setState({handled_by_user_id:e})},a.onChangeForwardto=function(e){console.log(e),a.setState({handled_by_user_id:e})},a.finishForward=function(){a.props.finishForward("")},a.saveTimeRespond=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Help Desk")){e.next=10;break}return t={ticket_id:a.props.ticket_id,handled_by_user_id:De.userId,respond_at:H()(new Date,"yyyy-mm-dd HH:MM:ss")},e.prev=2,e.next=5,k.a.post("/api/ccs-ticket-time-respond",t).then((function(e){200===e.data.status&&console.log("time respond saved")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.setTicketHandler=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Help Desk")){e.next=10;break}return t={handled_by_user_id:De.userId,status_id:4},e.prev=2,e.next=5,k.a.post("/api/ccs-ticket-set-handler-queued/",t).then((function(e){200===e.data.status&&console.log("ticket forwarded auto")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),a.notify("ERROR",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],r={module_id:a.state.module_id,isAuto:a.state.isAuto,handled_by_user_id:a.state.isAuto?"":a.state.handled_by_user_id,ticket_id:a.props.ticket_id,file_url:a.state.file_url,max_resolution_time:a.state.max_resolution_time},(a.props.role.includes("Help Desk")||a.props.role.includes("Implementator")||a.props.role.includes("Support Pelayanan")||a.props.role.includes("Specialist"))&&(r.isAuto=!1,r.handled_by_user_id=a.state.handled_by_user_id),r.note=void 0!==n&&null!==n?n.innerHTML:"",r.updated_by=a.state.created_by,e.prev=6,e.next=9,k.a.put("/api/ccs-ticket-forward/".concat(a.state._id),r).then((function(e){if(200===e.data.status){a.state.formdata.map((function(e,t){Te.append("file",e)}));try{k.a.post("/upload-file-ccs",Te).then((function(e){e.data.success}))}catch(t){console.log(t)}a.saveTimeRespond(),a.setTicketHandler(),ce("Forward Ticket ID "+a.state._id,a.state.module_id),a.finishForward(),a.notify("SUCCESS","Succesfully Send Ticket")}else a.notify("ERROR","Failed processing data")}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),a.notify("ERROR",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){e.name,e.size,e.type;var n=e.lastModified;new Date(n);a.setState({file_url:[].concat(Object(we.a)(a.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(a.state.formdata),[e])})},a.deleteFile=function(e){var t=a.state.formdata.filter((function(t){return!t.name.includes(e)}));a.setState({formdata:t});var n=a.state.file_url.indexOf(e);n>-1&&a.state.file_url.splice(n,1)},a.showForm=function(){a.props.showForm("")},a.state={_id:a.props.ticket_id,role:"",module_id:"",formdata:[],helpdesk:[],implementator:[],specialists:[],file_url:[],ticket_forward_from_support:[],ticket_forward_from_supervisor:[],ticket_forward_from_helpdesk:[],handled_by_user_id:"",max_resolution_time:"",isAuto:!0,created_by:De.userId},a.onChangeHandlerId=a.onChangeHandlerId.bind(Object(pe.a)(a)),a.onChangeForwardto=a.onChangeForwardto.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),e.prev=12,e.next=15,k.a.get("/api/ccs-ticket/".concat(this.state._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return l.setState({max_resolution_time:e.max_resolution_time}),!1}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:return e.prev=20,e.next=23,k.a.get("/api/helpdesk-users").then((function(e){var t=[];200===e.data.status&&(e.data.data.map((function(e,a){var n={leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),label:e.full_name,value:e._id};return t[a]=n,je[a]=e._id,!1})),l.state.helpdesk=t)}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/support-users?usid=".concat(De.userId)).then((function(e){var t=[];200===e.data.status&&(e.data.data.map((function(e,a){var n={leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),label:e.full_name,value:e._id};return t[a]=n,!1})),l.setState({implementator:t}))}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return e.prev=36,e.next=39,k.a.get("/api/specialist-users").then((function(e){var t=[];200===e.data.status&&(e.data.data.map((function(e,a){var n={leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),label:e.full_name,value:e._id};return t[a]=n,!1})),l.setState({specialists:t}))}));case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(36),console.log(e.t4);case 44:return e.prev=44,e.next=47,k.a.get("/api/ccs-ticket-forwarding-by-ticket-id/".concat(this.state._id)).then((function(e){if(200===e.data.status){var t=[],a=[],n=[];e.data.data.map((function(e,r){return console.log(e.role),e.role.includes("Implementator")||e.role.includes("Support Pelayanan")?t.push(e):e.role.includes("Supervisor CCS")?a.push(e):e.role.includes("Help Desk")&&n.push(e),!1})),l.setState({ticket_forward_from_helpdesk:n,ticket_forward_from_supervisor:a,ticket_forward_from_support:t})}}));case 47:e.next=52;break;case 49:e.prev=49,e.t5=e.catch(44),console.log(e.t5);case 52:this.props.role.includes("Specialist")&&(n=[],this.state.ticket_forward_from_support.map((function(e,t){var a={leftAvatar:r.a.createElement(y.c,{src:null!==e.avatar_url?e.avatar_url:"/avatar/user.png"}),value:e.forwarded_by_user_id,label:e.full_name+" - Support "+(t+1)};return n[t]=a,!1})),this.setState({implementator:n}));case 53:case"end":return e.stop()}}),e,this,[[2,7],[12,17],[20,25],[28,33],[36,41],[44,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,e.props.role.includes("Supervisor CCS")||e.props.role.includes("Superadmin")?r.a.createElement("div",null,r.a.createElement(y.r,{className:"box grid-example md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Distribute Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement(y.z,{id:"checkbox-read-documentation-page",name:"simple-checkboxes[]",label:"Auto Handler ",type:"checkbox",value:"documentation",defaultChecked:!0,onChange:function(){return e.setState({isAuto:!e.state.isAuto})}}),e.state.isAuto?"":r.a.createElement(n.Fragment,null,r.a.createElement(y.y,{id:"select-field-2",label:"Select Handler Manually",placeholder:"Select Handler",menuItems:e.state.helpdesk,onChange:e.onChangeHandlerId,filter:y.b.fuzzyFilter,className:"md-cell md-cell--4-tablet md-cell--6",helpOnFocus:!0,helpText:"Type the Name",errorText:r.a.createElement("span",null,"A ",r.a.createElement("em",null,"real")," value is required for this field")})),r.a.createElement(y.D,{label:"Max Resolution Time in days (Optional)",placeholder:"in Number",className:"md-cell md-cell--4-tablet md-cell--8",type:"number",onChange:e.onChangeMaxTimeRespond,value:e.state.max_resolution_time}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:e.handleSubmit},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:e.showForm},"Cancel")))):e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")?r.a.createElement("div",null,r.a.createElement(y.r,{className:"box grid-example md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Forward Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement(n.Fragment,null,e.state.ticket_forward_from_support.length<1?r.a.createElement(y.y,{id:"select-field-2",label:"Forward to Support",placeholder:"Forward to Support",menuItems:e.state.implementator,onChange:e.onChangeHandlerId,filter:y.b.fuzzyFilter,className:"md-cell md-cell--4-tablet md-cell--6",helpOnFocus:!0}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Forward only to Specialist. Because the ticket forwarded 2 or more  times.")),r.a.createElement(y.y,{id:"select-field-4",label:"Forward to Specialist",placeholder:"Forward to Specialist",menuItems:e.state.specialists,onAutocomplete:e.onChangeForwardto,onChange:e.onChangeForwardto,className:"md-cell md-cell--4-tablet md-cell--6",helpOnFocus:!0,helpText:"Type the Name",errorText:r.a.createElement("span",null,"A ",r.a.createElement("em",null,"real")," value is required for this field")})),r.a.createElement("br",null),r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),e.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:e.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"})),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:e.handleSubmit},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:e.showForm},"Cancel")))):e.props.role.includes("Specialist")?r.a.createElement("div",null,r.a.createElement(y.r,{className:"box grid-example md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Send Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement(y.y,{id:"select-field-5",label:"Send to Support",placeholder:"Send to Support",menuItems:e.state.implementator,onChange:e.onChangeForwardto,className:"md-cell md-cell--4-tablet md-cell--6",helpOnFocus:!0,helpText:"Type the Name",errorText:r.a.createElement("span",null,"A ",r.a.createElement("em",null,"real")," value is required for this field")}),r.a.createElement("br",null),r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),e.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:e.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:e.handleSubmit},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:e.showForm},"Cancel")))):void 0)}}]),t}(n.Component),Re=x.Session.get().payload,Me=new FormData,Ae=function(e){function t(e){var a,n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},n.onChangeTitle=function(e){console.log(e),n.setState({title:e})},n.showForm=function(){n.props.showForm("")},n.finishSplit=function(){n.props.finishSplit(),n.setState({dialogFinishSplitVisible:!1})},n.splitAdded=function(){n.props.splitAdded(n.state.total_split)},n.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=window.document.getElementsByClassName("note-editable")[0],r={client_id:n.state.client_id,file_url:n.state.file_url,title:n.state.title,description:a.innerHTML,category_id:n.state.category_id,status_id:n.state.status_id,priority_id:n.state.priority_id,handled_by_user_id:n.state.handled_by_user_id,parent_ticket_id:n.props.ticket_id},""===n.state._id||void 0===n.state._id){e.next=9;break}return r.updated_by=n.state.created_by,e.next=7,k.a.put("/api/ccs-ticket/".concat(n.state._id),r).then((function(e){try{if(200===e.data.status&&(n.setState({title:"",file_url:[],dialogSplitVisible:!1}),a.innerHTML="",n.state.file_url.length>0)){n.state.formdata.map((function(e,t){Me.append("file",e)}));try{k.a.post("/upload-file-ccs",Me).then((function(e){e.data.success&&n.setState({file_url:[],formdata:[]})}))}catch(Vc){console.log(Vc)}}}catch(Vc){n.showToast(Vc,"danger")}}));case 7:e.next=19;break;case 9:return r.created_by=n.state.created_by,r.status_id=6,e.prev=11,e.next=14,k.a.post("/api/ccs-ticket",r).then((function(e){if(200===e.data.status&&(n.setState({title:"",dialogSplitVisible:!1}),a.innerHTML="",n.state.file_url.length>0)){n.state.formdata.map((function(e,t){Me.append("file",e)}));try{k.a.post("/upload-file-ccs",Me).then((function(e){e.data.success&&n.setState({file_url:[],formdata:[]})}))}catch(Vc){console.log(Vc)}}n.state.total_split+=1,n.splitAdded(),ce("Added  Ticket  Split Parent ID  "+n.props.ticket_id,n.state.module_id)}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),n.showToast(e.t0,"danger");case 19:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t){return e.apply(this,arguments)}}(),n.handleLoad=function(e,t){e.name,e.size,e.type;var a=e.lastModified;new Date(a);n.setState({file_url:[].concat(Object(we.a)(n.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(n.state.formdata),[e])})},n.deleteFile=function(e){var t=n.state.formdata.filter((function(t){return!t.name.includes(e)}));n.setState({formdata:t});var a=n.state.file_url.indexOf(e);a>-1&&n.state.file_url.splice(a,1)},n.state=(a={_id:"",total_split:0,formdata:[],clients:[],client_id:"",file_url:[]},Object(C.a)(a,"client_id",""),Object(C.a)(a,"title",""),Object(C.a)(a,"description",""),Object(C.a)(a,"status_id",6),Object(C.a)(a,"category_id",""),Object(C.a)(a,"priority_id",""),Object(C.a)(a,"handled_by_user_id",""),Object(C.a)(a,"created_by",Re.userId),Object(C.a)(a,"dialogSplitVisible",!1),Object(C.a)(a,"dialogFinishSplitVisible",!1),a),n.onChangeTitle=n.onChangeTitle.bind(Object(pe.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(pe.a)(n)),n.onChangeTitle=n.onChangeTitle.bind(Object(pe.a)(n)),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Description",height:"200"}),e.prev=12,e.next=15,k.a.get("/api/ccs-ticket/".concat(this.props.ticket_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({client_id:e.client_id})}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,this,[[2,7],[12,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Split Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement(y.D,{id:"floating-label-counter-field",label:"Title",placeholder:"Title",maxLength:100,className:"md-cell md-cell--bottom",value:this.state.title,onChange:function(t){return e.onChangeTitle(t)}}),r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),this.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return e.setState({dialogSplitVisible:!0})}},"Submit")," \xa0",r.a.createElement(y.d,{raised:!0,onClick:this.showForm},"Cancel")," \xa0",this.state.total_split>0?r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return e.setState({dialogFinishSplitVisible:!0})}},"FINISH SPLIT"):"")),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogSplitVisible,onHide:function(){return!e.state.dialogSplitVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.handleSubmit},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogSplitVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?")),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogFinishSplitVisible,onHide:function(){return!e.state.dialogFinishSplitVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.finishSplit},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogFinishSplitVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to finish?")),r.a.createElement(S.a,null))}}]),t}(n.Component),Fe=x.Session.get().payload,Le=[],He=new FormData,ze=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.showForm=function(e){a.props.showForm("")},a.onChangeClientId=function(e){var t=a.state.clients.indexOf(e),n=Le[t];console.log(n),a.setState({client_id:n})},a.onChangeTitle=function(e){console.log(e),a.setState({title:e})},a.saveTimeRespond=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Help Desk")){e.next=11;break}if(!(a.state.ticket_replies.length<1)){e.next=11;break}return t={ticket_id:a.props.ticket_id,handled_by_user_id:Fe.userId,respond_at:H()(new Date,"yyyy-mm-dd HH:MM:ss")},e.prev=3,e.next=6,k.a.post("/api/ccs-ticket-time-respond",t).then((function(e){200===e.data.status&&console.log("time respond saved")}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.setTicketHandler=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Help Desk")){e.next=11;break}if(!(a.state.ticket_replies.length<1)){e.next=11;break}return t={handled_by_user_id:Fe.userId,status_id:4},e.prev=3,e.next=6,k.a.post("/api/ccs-ticket-set-handler-queued/",t).then((function(e){200===e.data.status&&console.log("ticket forwarded auto")}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a.notify("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],r={module_id:a.state.module_id,ticket_id:a.props.ticket_id,file_url:a.state.file_url,replies:n.innerHTML,status_id:5},""===a.state._id||void 0===a.state._id){e.next=9;break}return r.updated_by=a.state.created_by,e.next=7,k.a.put("/api/ccs-ticket-reply/".concat(a.state._id),r).then((function(e){try{if(200===e.data.status){if(a.state.file_url.length>0){a.state.formdata.map((function(e,t){He.append("file",e)}));try{k.a.post("/upload-file-ccs",He).then((function(e){e.data.success}))}catch(Vc){console.log(Vc)}}a.notify("SUCCESS",e.data.message),window.location.assign("/ccs/task")}else a.notify("ERROR","Failed Processing data")}catch(Vc){a.notify("ERROR",Vc)}}));case 7:e.next=12;break;case 9:return r.created_by=a.state.created_by,e.next=12,k.a.post("/api/ccs-ticket-reply",r).then((function(e){try{if(200===e.data.status){if(a.state.file_url.length>0){a.state.formdata.map((function(e,t){He.append("file",e)}));try{k.a.post("/upload-file-ccs",He).then((function(e){e.data.success}))}catch(Vc){console.log(Vc)}}a.notify("SUCCESS","You Replied this!"),ce("Reply  Ticket  ID "+a.props.ticket_id,a.state.module_id),a.finishReply(),a.saveTimeRespond(),a.setTicketHandler(),n.innerHTML="",window.history.go(-1)}else a.notify("ERROR","Failed Processing data")}catch(Vc){a.notify("ERROR",Vc)}}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){e.name,e.size,e.type;var n=e.lastModified;new Date(n);a.setState({file_url:[].concat(Object(we.a)(a.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(a.state.formdata),[e])})},a.deleteFile=function(e){var t=a.state.formdata.filter((function(t){return!t.name.includes(e)}));a.setState({formdata:t});var n=a.state.file_url.indexOf(e);n>-1&&a.state.file_url.splice(n,1)},a.finishReply=function(){a.props.finishReply("")},a.state={_id:"",formdata:[],ticket_replies:[],clients:[],file_url:[],client_id:"",title:"",description:"",created_by:Fe.userId},a.onChangeClientId=a.onChangeClientId.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:if(this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),!this.props.role.includes("Help Desk")){e.next=21;break}return e.prev=13,e.next=16,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.props.ticket_id)).then((function(e){200===e.data.status&&n.setState({ticket_replies:e.data.data})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,this,[[2,7],[13,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},this.props.role.includes("Supervisor CCS")?"":r.a.createElement("h2",{className:"md-cell md-cell--12"},"Reply Ticket"),r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),this.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:this.showForm},"Cancel"))))}}]),t}(n.Component),Ve=[],Be=[],Ue=new FormData,qe=(n.Component,a(229),a(31)),We=a(25),Ye=x.Session.get().payload,Xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:a.props.parent_ticket_id,data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.parent_ticket_id;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,void 0!==this.props.child_ticket&&this.props.child_ticket.length>0?this.props.child_ticket.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{style:{paddingLeft:"2.5vw"}},r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,""!==e.full_name_handler&&null!==e.full_name_handler?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name_handler)):""),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy, HH:MM")))))})):"")}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.showDetail=function(e){a.props.showDetail(e)},a.setUpdate=function(e){window.location.assign("/ccs/ticket/form?ticket_id=".concat(e))},a.setDelete=function(e){a.setState({dialogDeleteVisible:!0,_id:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),!a.props.role.includes("Customer")){e.next=44;break}if(n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id),""!==t){e.next=24;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id).concat(n,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id).concat(n,"&currentPage=",1,"&displayPerPage=",100)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1,displayPerPage:100}),e.next=42;break;case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id).concat(n,"&key=").concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(24),console.log(e.t2);case 32:return e.prev=32,e.next=35,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id).concat(n,"&key=").concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 35:e.next=40;break;case 37:e.prev=37,e.t3=e.catch(32),console.log(e.t3);case 40:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1,displayPerPage:100});case 42:e.next=85;break;case 44:if(!a.props.role.includes("Supervisor CCS")){e.next=85;break}if(n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),""!==t){e.next=67;break}return e.prev=47,e.next=50,k.a.get("/api/ccs-ticket-parents-total".concat(n,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 50:e.next=55;break;case 52:e.prev=52,e.t4=e.catch(47),console.log(e.t4);case 55:return e.prev=55,e.next=58,k.a.get("/api/ccs-ticket-parents".concat(n,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 58:e.next=63;break;case 60:e.prev=60,e.t5=e.catch(55),console.log(e.t5);case 63:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1,displayPerPage:100}),e.next=85;break;case 67:return e.prev=67,e.next=70,k.a.get("/api/ccs-ticket-parents-total".concat(n,"&key=").concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 70:e.next=75;break;case 72:e.prev=72,e.t6=e.catch(67),console.log(e.t6);case 75:return e.prev=75,e.next=78,k.a.get("/api/ccs-ticket-parents".concat(n,"&key=").concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 78:e.next=83;break;case 80:e.prev=80,e.t7=e.catch(75),console.log(e.t7);case 83:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1,displayPerPage:100});case 85:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[24,29],[32,37],[47,52],[55,60],[67,72],[75,80]])})));return function(t){return e.apply(this,arguments)}}(),a.handle=function(e){a.props.handle(e)},a.onChangeDateFrom=function(e){a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.onChangeStatusId=function(e){a.setState({status_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!a.props.role.includes("Customer")){e.next=22;break}return t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&key=").concat(a.state.key).concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data.length})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&key=").concat(a.state.key).concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=41;break;case 22:if(!a.props.role.includes("Supervisor CCS")){e.next=41;break}return t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=24,e.next=27,k.a.get("/api/ccs-ticket-parents".concat(t,"&key=").concat(a.state.key,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data.length})}));case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(24),console.log(e.t2);case 32:return e.prev=32,e.next=35,k.a.get("/api/ccs-ticket-parents".concat(t,"&key=").concat(a.state.key,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 35:e.next=40;break;case 37:e.prev=37,e.t3=e.catch(32),console.log(e.t3);case 40:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}());case 41:a.setState({currentPage:1,displayPerPage:100});case 42:case"end":return e.stop()}}),e,null,[[3,8],[11,16],[24,29],[32,37]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",status_id:"",date_from:"",date_to:"",client_id:a.props.role.includes("Customer")?a.state.client_id:""})},a.toggleLoadChild=function(e){var t=a.state.loadChild;t[e]=!t[e],a.setState({loadChild:t}),console.log(a.state.loadChild)},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),!a.props.role.includes("Customer")){e.next=14;break}return n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&key=").concat(a.state.key).concat(n,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=25;break;case 14:if(!a.props.role.includes("Supervisor CCS")){e.next=25;break}return n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=16,e.next=19,k.a.get("/api/ccs-ticket-parents".concat(n,"&key=").concat(a.state.key,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}());case 25:case"end":return e.stop()}}),e,null,[[3,8],[16,21]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets".concat(n,"&key=").concat(a.state.key,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).NO=a+1,r.ID=t._id,r.Title=t.title,r["Parent ID"]=t.parent_ticket_id,t.description.includes("<img ")||t.description.includes("<iframe ")?r.Description="[MEDIA]":r.Description=t.description.replace(/<\/?[^>]+(>|$)/g,""),r["BPR/Client"]=t.client_name,r.Priority=t.priority,r["Handled By"]=t.full_name,r.Status=t.status,r["Respond Time (h:m:s)"]=null!==t.max_respond_at&&""!==t.max_respond_at?H()(t.max_respond_at,"dd mmm yyyy, HH:MM"):"-",r["Resolution Time (h:m:s)"]=null!==t.max_resolution_at&&""!==t.max_resolution_at?H()(t.max_resolution_at,"dd mmm yyyy, HH:MM"):"-",n.push(r),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=n,a.setState({dataToExport:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All Tickets  per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,r+".xlsx");case 20:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Customer")){e.next=13;break}return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets?currentPage=".concat(0,"&displayPerPage=",0,"&client_id=",a.state.client_id).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=24;break;case 13:if(!a.props.role.includes("Supervisor CCS")){e.next=24;break}return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=16,e.next=19,k.a.get("/api/ccs-tickets?currentPage=".concat(0,"&displayPerPage=",0,t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:case"end":return e.stop()}}),e,null,[[3,8],[16,21]])}))),a.beforeGetPrint=function(){Je.loadData()},a.state={data:[],datatoPDF:[],dataToExport:[],dataToExportPDF:[],dialogDeleteVisible:!1,loadChild:[],_id:"",categories:[],clients:[],client_id:"",priorities:[],child_ticket:[],status:[],key:"",status_id:"",category_id:"",priority_id:"",date_from:"",date_to:"",asc:1,isLoading:!0,isFilter:!1,currentPage:1,displayPerPage:100,total_data:0},a.tableData=r.a.createRef(),a.printable=r.a.createRef(),a.socket=G()(K),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("UPDATE_ANSWER",(function(e){a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("QUEUED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.role.includes("Customer")){e.next=24;break}return t="",e.next=4,k.a.get("/api/user/".concat(Ye.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,a){t=e.client_id}))}catch(Vc){console.log(Vc)}}));case 4:return this.setState({client_id:t}),e.prev=5,e.next=8,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/ccs-ticket-parents?client_id=".concat(t,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=51;break;case 24:if(!this.props.role.includes("Supervisor CCS")){e.next=51;break}return"",e.prev=26,e.next=29,k.a.get("/api/ccs-ticket-parents-total?currentPage=0&displayPerPage=0").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(26),console.log(e.t2);case 34:return e.prev=34,e.next=37,k.a.get("/api/ccs-ticket-parents?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 37:e.next=42;break;case 39:e.prev=39,e.t3=e.catch(34),console.log(e.t3);case 42:return this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),e.prev=43,e.next=46,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};t[a]=n}return!1})),a.setState({clients:t})}}));case 46:e.next=51;break;case 48:e.prev=48,e.t4=e.catch(43),console.log(e.t4);case 51:return e.prev=51,e.next=54,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return t[a]=n,!1})),a.setState({priorities:t})}}));case 54:e.next=59;break;case 56:e.prev=56,e.t5=e.catch(51),console.log(e.t5);case 59:return e.prev=59,e.next=62,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.category,value:e._id};return t[a]=n,!1})),a.setState({categories:t})}}));case 62:e.next=67;break;case 64:e.prev=64,e.t6=e.catch(59),console.log(e.t6);case 67:return e.prev=67,e.next=70,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("p",{style:{color:e.label_color}},r.a.createElement("b",null,e.status)),value:e._id};return t[a]=n,!1})),a.setState({status:t})}}));case 70:e.next=75;break;case 72:e.prev=72,e.t7=e.catch(67),console.log(e.t7);case 75:case"end":return e.stop()}}),e,this,[[5,10],[13,18],[26,31],[34,39],[43,48],[51,56],[59,64],[67,72]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;var o=this.state.data;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},e.props.role.includes("Customer")?r.a.createElement("h4",null,"My Tickets"):r.a.createElement("h4",null,"All Tickets"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ke,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),function(){if(e.props.role.includes("Supervisor CCS"))return r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:e.state.clients,onChange:e.onChangeClientId,value:e.state.client_id})}(),function(){if(e.props.role.includes("Supervisor CCS")||e.props.role.includes("Customer"))return r.a.createElement(n.Fragment,null,r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:e.state.priorities,onChange:e.onChangePriorityId,value:e.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:e.state.categories,onChange:e.onChangeCategoryId,value:e.state.category_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Status",fullWidth:!0,menuItems:e.state.status,onChange:e.onChangeStatusId,value:e.state.status_id}))}(),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:this.resetFilter},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),o.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table  is-fullwidth is-striped",ref:e.printable},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"3%"}}),r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"Request Tickets \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Handled by \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"Ticket Status \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("status")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Created at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,o.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.total_child>0?r.a.createElement("a",{onClick:function(){return e.toggleLoadChild(a)}},r.a.createElement(y.q,null,e.state.loadChild[a]?"arrow_drop_down":"arrow_right"," ")):""),r.a.createElement("td",null," ",r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)},r.a.createElement("b",null,t._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):""),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:t.label_color_status}},t.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM")))),e.state.loadChild[a]&&void 0!==t.child_ticket&&t.child_ticket.length>0?r.a.createElement(Xe,{parent_ticket_id:t._id,child_ticket:t.child_ticket,role:e.props.role}):"")})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),Ke=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a.state={data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"All Tickets"),r.a.createElement("table",{className:"table is-fullwidth is-striped is-bordered",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"No "),r.a.createElement("th",{style:{width:"10%"}},"#ID "),r.a.createElement("th",{style:{width:"10%"}},"Parent Ticket #ID "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client "),r.a.createElement("th",{style:{width:"7%"}},"Priority "),r.a.createElement("th",{style:{width:"10%"}},"Handled by "),r.a.createElement("th",{style:{width:"10%"}},"Replied at "))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("b",null,e._id)),r.a.createElement("td",null,r.a.createElement("b",null,e.parent_ticket_id)),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,null!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority):"-"),r.a.createElement("td",null,r.a.createElement("p",{style:{fontSize:"8pt"}},e.full_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm yyyy HH:MM"))))})))))}}]),t}(n.Component),Je=new Ke,Qe=x.Session.get().payload,$e=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),!a.props.role.includes("Customer")){e.next=41;break}if(""!==t){e.next=23;break}return e.prev=5,e.next=8,k.a.get("/api/ccs-tickets-all-completed-total?currentPage=0&displayPerPage=0".concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/ccs-tickets-all-completed?currentPage=1&displayPerPage=100".concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:e.next=39;break;case 23:return e.prev=23,e.next=26,k.a.get("/api/ccs-tickets-all-completed-total?currentPage=0&displayPerPage=0&key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(23),console.log(e.t2);case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-tickets-all-completed?currentPage=1&displayPerPage=100&key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:e.next=76;break;case 41:if(""!==t){e.next=60;break}return e.prev=42,e.next=45,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Qe.userId,"?currentPage=0&displayPerPage=0").concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(42),console.log(e.t4);case 50:return e.prev=50,e.next=53,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=1&displayPerPage=100").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 53:e.next=58;break;case 55:e.prev=55,e.t5=e.catch(50),console.log(e.t5);case 58:e.next=76;break;case 60:return e.prev=60,e.next=63,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Qe.userId,"?currentPage=0&displayPerPage=0&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 63:e.next=68;break;case 65:e.prev=65,e.t6=e.catch(60),console.log(e.t6);case 68:return e.prev=68,e.next=71,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=1&displayPerPage=100&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 71:e.next=76;break;case 73:e.prev=73,e.t7=e.catch(68),console.log(e.t7);case 76:a.setState({currentPage:1,displayPerPage:100});case 77:case"end":return e.stop()}}),e,null,[[5,10],[13,18],[23,28],[31,36],[42,47],[50,55],[60,65],[68,73]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangeDateFrom=function(e){a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),!a.props.role.includes("Customer")){e.next=21;break}return e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-all-completed-total?currentPage=0&displayPerPage=0&key=".concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-tickets-all-completed?currentPage=1&displayPerPage=100&key=".concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:e.next=37;break;case 21:return e.prev=21,e.next=24,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Qe.userId,"?currentPage=0&displayPerPage=0&key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:return e.prev=29,e.next=32,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=1&displayPerPage=100&key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:a.setState({currentPage:1,displayPerPage:100});case 38:case"end":return e.stop()}}),e,null,[[3,8],[11,16],[21,26],[29,34]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:a.props.role.includes("Customer")?a.state.client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){console.log(e),a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),!a.props.role.includes("Customer")){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-all-completed?key=".concat(a.state.key).concat(n,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key),n=[],!a.props.role.includes("Customer")){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-all-completed?currentPage=0&displayPerPage=0".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Priority=e.priority,n["Finished By"]=e.full_name,n["Finished at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),n.Rating=e.rating,t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=0&displayPerPage=0").concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Priority=e.priority,n["Finished at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),n.Rating=e.rating,t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",r="",r=a.props.role.includes("Customer")?"All On Finished  Tickets per ".concat(H()(new Date,"dd-mm-yyyy")):"All My Finished Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(n),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 31:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Customer")){e.next=13;break}return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-all-completed?currentPage=0&displayPerPage=0&client_id=".concat(a.state.client_id).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=23;break;case 13:return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=15,e.next=18,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=0&displayPerPage=0").concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,8],[15,20]])}))),a.state={isLoading:!0,isFilter:!1,data:[],dataToExportPDF:[],priorities:[],categories:[],status:[],status_id:"",category_id:"",priority_id:"",date_from:"",date_to:"",key:"",client_id:"",filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",total_data:0,asc:1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.role.includes("Customer")){e.next=23;break}return t="",e.next=4,k.a.get("/api/user/".concat(Qe.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,a){return t=e.client_id,!1}))}catch(Vc){console.log(Vc)}}));case 4:return this.setState({client_id:t}),e.prev=5,e.next=8,k.a.get("/api/ccs-tickets-all-completed-total?client_id=".concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(t,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:e.next=47;break;case 23:return e.prev=23,e.next=26,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Qe.userId,"?currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(23),console.log(e.t2);case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-tickets-my-completed/".concat(Qe.userId,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:return e.prev=39,e.next=42,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};t[a]=n}return!1})),a.setState({clients:t})}}));case 42:e.next=47;break;case 44:e.prev=44,e.t4=e.catch(39),console.log(e.t4);case 47:return e.prev=47,e.next=50,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("p",{style:{color:e.label_color}},e.status),value:e._id};return t[a]=n,!1})),a.setState({status:t})}}));case 50:e.next=55;break;case 52:e.prev=52,e.t5=e.catch(47),console.log(e.t5);case 55:return e.prev=55,e.next=58,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return t[a]=n,!1})),a.setState({priorities:t})}}));case 58:e.next=63;break;case 60:e.prev=60,e.t6=e.catch(55),console.log(e.t6);case 63:return e.prev=63,e.next=66,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.category,value:e._id};return t[a]=n,!1})),a.setState({categories:t})}}));case 66:e.next=71;break;case 68:e.prev=68,e.t7=e.catch(63),console.log(e.t7);case 71:this.props.getTotalCompleted(this.state.data.length);case 72:case"end":return e.stop()}}),e,this,[[5,10],[13,18],[23,28],[31,36],[39,44],[47,52],[55,60],[63,68]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,{style:{overflowX:"scroll"}},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",overflowX:"scroll",borderRadius:"10px"}},r.a.createElement("h4",null,"Finished Tickets"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ze,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,client_id:this.state.client_id,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),function(){if(!e.props.role.includes("Customer"))return r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:e.state.clients,onChange:e.onChangeClientId,value:e.state.client_id})}(),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:this.state.priorities,onChange:this.onChangePriorityId,value:this.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:this.state.categories,onChange:this.onChangeCategoryId,value:this.state.category_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:this.resetFilter},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:" table  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"8%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),e.props.role.includes("Customer")?r.a.createElement("th",{style:{width:"10%"}},"Handled By \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "):"",r.a.createElement("th",{style:{width:"10%"}},"Finished at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("resolution_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Rating \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("rating")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title))),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),e.props.role.includes("Customer")?r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):""):"",r.a.createElement("td",null,r.a.createElement("p",null,null!==t.resolution_at?H()(t.resolution_at,"dd mmm yyyy, HH:MM"):H()(t.updated_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,t.rating>0?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{rating:parseFloat(t.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})):""))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),Ze=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a.state={data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"2.5% "}},r.a.createElement("h4",null,"Finished Tickets"),r.a.createElement("table",{className:" table  is-fullwidth is-striped is-bordered",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}}," No "),r.a.createElement("th",{style:{width:"10%"}}," #ID "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request"),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client  "),r.a.createElement("th",{style:{width:"7%"}},"Priority "),this.props.role.includes("Customer")?r.a.createElement("th",{style:{width:"8%"}},"Handled By  "):"",r.a.createElement("th",{style:{width:"7%"}},"Finished at  "),r.a.createElement("th",{style:{width:"16%"}},"Rating "))),r.a.createElement("tbody",null,this.props.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("b",null,t._id)," "),r.a.createElement("td",null,r.a.createElement("b",null,t.title),r.a.createElement("p",null,"Content: "),t.description.includes("<img ")||t.description.includes("<iframe ")?r.a.createElement("p",null,"MEDIA"):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}})),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),e.props.role.includes("Customer")?r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("p",null,t.full_name):""):"",r.a.createElement("td",null,r.a.createElement("p",null,null!==t.resolution_at?H()(t.resolution_at,"dd mmm yyyy, HH:MM"):H()(t.updated_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,t.rating>0?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{rating:parseFloat(t.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})):""))})))))}}]),t}(n.Component),et=x.Session.get().payload,tt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&client_id=").concat(a.state.filter_client_id),""!==t){e.next=22;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(et.userId,"?currentPage=",0,"&displayPerPage=",0).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:e.next=38;break;case 22:return e.prev=22,e.next=25,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(et.userId,"?key=").concat(t,"&currentPage=",0,"&displayPerPage=",0).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:return e.prev=30,e.next=33,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?key=").concat(t,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 33:e.next=38;break;case 35:e.prev=35,e.t3=e.catch(30),console.log(e.t3);case 38:a.setState({currentPage:1,displayPerPage:100});case 39:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[22,27],[30,35]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.onChangeClientId=function(e){a.setState({filter_client_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&client_id=").concat(a.state.filter_client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(et.userId,"?key=").concat(a.state.key,"&currentPage=",0,"&displayPerPage=",0).concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?key=").concat(a.state.key,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.setState({currentPage:1,displayPerPage:100});case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])}))),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.resetFilter=function(){a.setState({filter_category_id:"",filter_priority_id:"",filter_from_date:"",filter_to_date:"",filter_client_id:""})},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),"",n="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&client_id=").concat(a.state.filter_client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&client_id=").concat(a.state.filter_client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key).concat(n)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map((function(e,t){var a={};a.NO=t+1,a.ID=e._id,a.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?a.Description="[MEDIA]":a.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),a["BPR/Client"]=e.client_name,a.Priority=e.priority,a["Rejected at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),n[t]=a})),t=n,a.setState({dataToExport:n})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All My Rejected Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 20:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&client_id=").concat(a.state.filter_client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?currentPage=",0,"&displayPerPage=",0).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],isLoading:!0,isFilter:!1,filter_from_date:"",filter_client_id:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",key:"",asc:1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(et.userId,"?currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-my-rejected/".concat(et.userId,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:return e.prev=32,e.next=35,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a[t]=n}return!1})),t.setState({clients:a})}}));case 35:e.next=40;break;case 37:e.prev=37,e.t4=e.catch(32),console.log(e.t4);case 40:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21],[24,29],[32,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h4",null,"Rejected Tickets"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(at,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeFormDate,value:this.state.filter_from_date}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeToDate,value:this.state.filter_to_date}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:this.state.clients,onChange:this.onChangeClientId,value:this.state.filter_client_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:this.state.priorities,onChange:this.onChangePriorityId,value:this.state.filter_priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:this.state.categories,onChange:this.onChangeCategoryId,value:this.state.filter_category_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:this.resetFilter},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ...",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"40%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Rejected at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("rejected_at")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm yyyy, HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),at=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Rejected Tickets"),r.a.createElement("table",{className:"table   is-fullwidth is-striped is-bordered",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}}," No  "),r.a.createElement("th",{style:{width:"10%"}}," #ID  "),r.a.createElement("th",{style:{width:"44%"}},"Ticket Request"),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client "),r.a.createElement("th",{style:{width:"7%"}},"Priority "),r.a.createElement("th",{style:{width:"10%"}},"Handled By "),r.a.createElement("th",{style:{width:"12%"}},"Rejected at "))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null," ",r.a.createElement("b",null,e._id)," "),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,e.full_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm yyyy, HH:MM"))))})))))}}]),t}(n.Component),nt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),""!==t){e.next=22;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-approval-total?key=".concat(a.state.key).concat(n,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-approval?key=".concat(a.state.key).concat(n,"&currentPage=1&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:e.next=38;break;case 22:return e.prev=22,e.next=25,k.a.get("/api/ccs-tickets-approval-total?key=".concat(t).concat(n,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:return e.prev=30,e.next=33,k.a.get("/api/ccs-tickets-approval?key=".concat(t).concat(n,"&currentPage=1&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 33:e.next=38;break;case 35:e.prev=35,e.t3=e.catch(30),console.log(e.t3);case 38:a.setState({currentPage:1,displayPerPage:100});case 39:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[22,27],[30,35]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeDateFrom=function(e){a.setState({filter:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-approval-total?key=".concat(a.state.key).concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-approval?key=".concat(a.state.key).concat(t,"&currentPage=1&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.setState({currentPage:1,displayPerPage:100});case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-approval?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key),n=[],e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-approval?currentPage=0&displayPerPage=0".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Priority=e.priority,n["Handled By"]=e.full_name,n["Replied at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",r="All Approval Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(n),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 19:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.componentDidUpdate=function(){},a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),a.setState({load:!0}),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-approval?currentPage=0&displayPerPage=0".concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.afterGetContent=function(){a.componentDidMount()},a.state={load:!1,data:[],dataToExport:[],dataToExportPDF:[],categories:[],priorities:[],isLoading:!0,isFilter:!1,category_id:"",priority_id:"",date_from:"",date_to:"",client_id:"",asc:1,key:"",currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-approval-total?currentPage=0&displayPerPage=0").then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-approval?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:return e.prev=32,e.next=35,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a[t]=n}return!1})),t.setState({clients:a})}}));case 35:e.next=40;break;case 37:e.prev=37,e.t4=e.catch(32),console.log(e.t4);case 40:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21],[24,29],[32,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h4",null,"Approval Requests"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(rt,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,load:this.state.load,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:this.state.clients,onChange:this.onChangeClientId,value:this.state.client_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:this.state.priorities,onChange:this.onChangePriorityId,value:this.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:this.state.categories,onChange:this.onChangeCategoryId,value:this.state.category_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.filter()}},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:function(){return e.resetFilter()}},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("ticket_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Handled by \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Replied at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},"  ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,null!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority):"-"),r.a.createElement("td",null,r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name))),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm yyyy HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),rt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({load:!1,data:[]});case 1:case"end":return e.stop()}}),e)}))),a.state={load:!1,data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Approval Request Tickets"),r.a.createElement("table",{className:"table is-fullwidth is-striped is-bordered",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"No"),r.a.createElement("th",{style:{width:"10%"}},"#ID "),r.a.createElement("th",{style:{width:"36%"}},"Ticket Request "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client "),r.a.createElement("th",{style:{width:"7%"}},"Priority "),r.a.createElement("th",{style:{width:"10%"}},"Handled by "),r.a.createElement("th",{style:{width:"12%"}},"Replied at "))),r.a.createElement("tbody",{id:"bodytable"},this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("b",null,e._id)),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,null!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority):"-"),r.a.createElement("td",null,r.a.createElement("p",{style:{fontSize:"8pt"}},e.full_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm yyyy HH:MM"))))})))))}}]),t}(n.Component),lt=(new rt,x.Session.get().payload),ct=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),""!==t){e.next=42;break}if(!a.props.role.includes("Customer")){e.next=23;break}return e.prev=5,e.next=8,k.a.get("/api/ccs-tickets-all-onprogress-total?currentPage=0&displayPerPage=0".concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/ccs-tickets-all-onprogress?currentPage=1&displayPerPage=100".concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:e.next=39;break;case 23:return e.prev=23,e.next=26,k.a.get("/api/ccs-tickets-my-handle-total/".concat(lt.userId,"?currentPage=0&displayPerPage=0").concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(23),console.log(e.t2);case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?currentPage=1&displayPerPage=100").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:a.setState({currentPage:1,displayPerPage:100}),e.next=77;break;case 42:if(!a.props.role.includes("Customer")){e.next=61;break}return e.prev=43,e.next=46,k.a.get("/api/ccs-tickets-all-onprogress-total?currentPage=0&displayPerPage=0".concat(n,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 46:e.next=51;break;case 48:e.prev=48,e.t4=e.catch(43),console.log(e.t4);case 51:return e.prev=51,e.next=54,k.a.get("/api/ccs-tickets-all-onprogress?currentPage=1&displayPerPage=100".concat(n,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 54:e.next=59;break;case 56:e.prev=56,e.t5=e.catch(51),console.log(e.t5);case 59:e.next=77;break;case 61:return e.prev=61,e.next=64,k.a.get("/api/ccs-tickets-my-handle-total/".concat(lt.userId,"?key=").concat(t,"&currentPage=0&displayPerPage=0").concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 64:e.next=69;break;case 66:e.prev=66,e.t6=e.catch(61),console.log(e.t6);case 69:return e.prev=69,e.next=72,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?key=").concat(t,"&currentPage=1&displayPerPage=100").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 72:e.next=77;break;case 74:e.prev=74,e.t7=e.catch(69),console.log(e.t7);case 77:a.setState({currentPage:1,displayPerPage:100});case 78:case"end":return e.stop()}}),e,null,[[5,10],[13,18],[23,28],[31,36],[43,48],[51,56],[61,66],[69,74]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeDateFrom=function(e){console.log(e+1),a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),!a.props.role.includes("Customer")){e.next=21;break}return e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-all-onprogress-total?key=".concat(a.state.key).concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-tickets-all-onprogress?key=".concat(a.state.key).concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:e.next=37;break;case 21:return e.prev=21,e.next=24,k.a.get("/api/ccs-tickets-my-handle-total/".concat(lt.userId,"?key=").concat(a.state.key).concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:return e.prev=29,e.next=32,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?key=").concat(a.state.key).concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:a.setState({currentPage:1,displayPerPage:100}),console.log(t);case 39:case"end":return e.stop()}}),e,null,[[3,8],[11,16],[21,26],[29,34]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:a.props.role.includes("Customer")?a.state.client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),!a.props.role.includes("Customer")){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-all-onprogress?key=".concat(a.state.key).concat(n,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key),n=[],!a.props.role.includes("Customer")){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-all-onprogress?currentPage=0&displayPerPage=0".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Priority=e.priority,n["Handled By"]=e.full_name,n["Handled at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?currentPage=0&displayPerPage=0").concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Priority=e.priority,n["Handled By"]=e.full_name,n["Handled at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",r="",r=a.props.role.includes("Customer")?"All On Progress  Tickets per ".concat(H()(new Date,"dd-mm-yyyy")):"All My Handled Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(n),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 31:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Customer")){e.next=13;break}return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-all-onprogress?currentPage=0&displayPerPage=0&client_id=".concat(a.state.client_id).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key),e.prev=14,e.next=17,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?currentPage=0&displayPerPage=0").concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={isLoading:!0,isFilter:!1,data:[],dataToExportPDF:[],dataToExport:[],priorities:[],categories:[],status:[],category_id:"",priority_id:"",date_from:"",date_to:"",client_id:"",asc:1,key:"",currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("TICKET_FORWARDED",(function(e){e===lt.userId&&a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.role.includes("Customer")){e.next=29;break}return t="",e.prev=2,e.next=5,k.a.get("/api/user/".concat(lt.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,a){t=e.client_id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return this.setState({client_id:t}),e.prev=11,e.next=14,k.a.get("/api/ccs-tickets-all-onprogress-total?client_id=".concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return e.prev=19,e.next=22,k.a.get("/api/ccs-tickets-all-onprogress?client_id=".concat(t,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:e.next=53;break;case 29:return e.prev=29,e.next=32,k.a.get("/api/ccs-tickets-my-handle-total/".concat(lt.userId,"?currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:return e.prev=37,e.next=40,k.a.get("/api/ccs-tickets-my-handle/".concat(lt.userId,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 40:e.next=45;break;case 42:e.prev=42,e.t4=e.catch(37),console.log(e.t4);case 45:return e.prev=45,e.next=48,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};t[a]=n}return!1})),a.setState({clients:t})}}));case 48:e.next=53;break;case 50:e.prev=50,e.t5=e.catch(45),console.log(e.t5);case 53:return e.prev=53,e.next=56,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return t[a]=n,!1})),a.setState({priorities:t})}}));case 56:e.next=61;break;case 58:e.prev=58,e.t6=e.catch(53),console.log(e.t6);case 61:return e.prev=61,e.next=64,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.category,value:e._id};return t[a]=n,!1})),a.setState({categories:t})}}));case 64:e.next=69;break;case 66:e.prev=66,e.t7=e.catch(61),console.log(e.t7);case 69:case"end":return e.stop()}}),e,this,[[2,7],[11,16],[19,24],[29,34],[37,42],[45,50],[53,58],[61,66]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h4",null,"On Progress Tickets"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(st,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,client_id:this.state.client_id,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),function(){if(!e.props.role.includes("Customer"))return r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:e.state.clients,onChange:e.onChangeClientId,value:e.state.client_id})}(),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,onChange:this.onChangePriorityId,menuItems:this.state.priorities,value:this.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,onChange:this.onChangeCategoryId,menuItems:this.state.categories,value:this.state.category_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:this.resetFilter},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"38%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),e.props.role.includes("Customer")?r.a.createElement("th",{style:{width:"15%"}},"Handled by \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))):r.a.createElement("th",{style:{width:"15%"}},"handling time \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("time_left")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handled at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title))," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),e.props.role.includes("Customer")?r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):""):r.a.createElement("td",null,t.time_left_adjusted>0?t.time_left_adjusted:t.time_left," days left"),r.a.createElement("td",null,r.a.createElement("p",null,H()(t.updated_at,"dd mmm HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),st=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"2.5% "}},r.a.createElement("h4",null,"On Progress Tickets"),r.a.createElement("table",{className:"table   is-fullwidth is-striped is-bordered",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"4%"}},"No"),r.a.createElement("th",{style:{width:"10%"}}," #ID  "),r.a.createElement("th",{style:{width:"38%"}},"Ticket Request"),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client "),r.a.createElement("th",{style:{width:"8%"}},"Priority "),this.props.role.includes("Customer")?r.a.createElement("th",{style:{width:"15%"}},"Handled by "):r.a.createElement("th",{style:{width:"15%"}},"handling time"),r.a.createElement("th",{style:{width:"15%"}},"Handled at "))),r.a.createElement("tbody",null,this.props.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("b",null,t._id)," "),r.a.createElement("td",null,r.a.createElement("b",null,t.title),r.a.createElement("p",null,"Content: "),t.description.includes("<img ")||t.description.includes("<iframe ")?r.a.createElement("p",null,"MEDIA"):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}})),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),e.props.role.includes("Customer")?r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("p",null,t.full_name):""):r.a.createElement("td",null,t.time_left_adjusted>0?t.time_left_adjusted:t.time_left," days left"),r.a.createElement("td",null,r.a.createElement("p",null,H()(t.updated_at,"dd mmm HH:MM"))))})))))}}]),t}(n.Component),it=(new st,x.Session.get().payload),ot=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),""!==t){e.next=22;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-my-finished-total/".concat(it.userId,"?currentPage=0&displayPerPage=0").concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=",1,"&displayPerPage=",100).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:e.next=38;break;case 22:return e.prev=22,e.next=25,k.a.get("/api/ccs-tickets-my-finished-total/".concat(it.userId,"?currentPage=0&displayPerPage=0&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:return e.prev=30,e.next=33,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=",1,"&displayPerPage=",100,"&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 33:e.next=38;break;case 35:e.prev=35,e.t3=e.catch(30),console.log(e.t3);case 38:a.setState({currentPage:1,displayPerPage:100});case 39:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[22,27],[30,35]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeDateFrom=function(e){a.setState({filter:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-finished-total/".concat(it.userId,"?currentPage=0&displayPerPage=0&key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=",1,"&displayPerPage=",100,"&key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.setState({currentPage:1,displayPerPage:100});case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key).concat(n)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map((function(e,t){var a={};a.NO=t+1,a.ID=e._id,a.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?a.Description="[MEDIA]":a.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),a["BPR/Client"]=e.client_name,a.Priority=e.priority,a["Closed at"]=H()(e.updated_at,"dd mmm yyyy HH:MM"),n[t]=a})),t=n,a.setState({dataToExport:n})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:console.log(t),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All My Closed Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 21:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=",0,"&displayPerPage=",0).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],isLoading:!0,isFilter:!1,category_id:"",priority_id:"",date_from:"",date_to:"",client_id:"",asc:1,key:"",currentPage:1,displayPerPage:100},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-finished-total/".concat(it.userId,"?currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-my-finished/".concat(it.userId,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:return e.prev=32,e.next=35,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a[t]=n}return!1})),t.setState({clients:a})}}));case 35:e.next=40;break;case 37:e.prev=37,e.t4=e.catch(32),console.log(e.t4);case 40:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21],[24,29],[32,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h4",null,"Closed Ticket"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(dt,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:this.state.clients,onChange:this.onChangeClientId,value:this.state.client_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:this.state.priorities,onChange:this.onChangePriorityId,value:this.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:this.state.categories,onChange:this.onChangeCategoryId,value:this.state.category_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.filter()}},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:function(){return e.resetFilter()}},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"40%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Closed at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),dt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Closed Tickets"),r.a.createElement("table",{className:"table  is-bordered is-fullwidth is-striped",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}}," No  "),r.a.createElement("th",{style:{width:"10%"}}," #ID  "),r.a.createElement("th",{style:{width:"40%"}},"Ticket Request "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client  "),r.a.createElement("th",{style:{width:"7%"}},"Priority "),r.a.createElement("th",{style:{width:"10%"}},"Handled By  "),r.a.createElement("th",{style:{width:"12%"}},"Closed at "))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("b",null,e._id)," "),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,e.full_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.updated_at,"dd mmm HH:MM"))))})))))}}]),t}(n.Component),ut=x.Session.get().payload,mt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=12;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,7],[12,17]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.onChangeClientId=function(e){a.setState({filter_client_id:e})},a.onChangeStatusId=function(e){a.setState({filter_status_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&status_id=").concat(a.state.filter_status_id,"&client_id=").concat(a.state.filter_client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId,"?key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.resetFilter=function(){a.setState({filter_category_id:"",filter_priority_id:"",filter_from_date:"",filter_to_date:"",filter_client_id:"",filter_status_id:""})},a.setActivePage=function(e){a.setState({currentPage:e})},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.data.length/a.state.displayPerPage);a.setState({currentPage:e})},a.setPageStart=function(){a.setState({currentPage:1})},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.data.length/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n})},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t})},a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&status_id=").concat(a.state.filter_status_id,"&client_id=").concat(a.state.filter_client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId,"?key=").concat(a.state.key).concat(n)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map((function(e,t){var a={};a.NO=t+1,a.ID=e._id,a.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?a.Description="[MEDIA]":a.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),a["BPR/Client"]=e.client_name,a.Priority=e.priority,a["Forwarded to"]=e.full_name,a["Forwarded at"]=H()(e.forwarded_at,"dd mmm yyyy HH:MM"),a.Status=e.status,n[t]=a})),t=n,a.setState({dataToExport:n})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:console.log(t),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All My Forwarded Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 21:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.filter_from_date,"&date_to=").concat(a.state.filter_to_date,"&category_id=").concat(a.state.filter_category_id,"&priority_id=").concat(a.state.filter_priority_id,"&status_id=").concat(a.state.filter_status_id,"&client_id=").concat(a.state.filter_client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId,"??currentPage=",0,"&displayPerPage=",0).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],isFilter:!1,priorities:[],categories:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",date_to:"",date_from:"",category_id:"",priority_id:"",status_id:"",client_id:"",asc:1,key:"",currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-forward/".concat(ut.userId)).then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("b",{style:{color:e.label_color}},e.status),value:e._id};return a[t]=n,!1})),t.setState({status:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a.push(n)}return!1})),t.setState({clients:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:return e.prev=32,e.next=35,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 35:e.next=40;break;case 37:e.prev=37,e.t4=e.catch(32),console.log(e.t4);case 40:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21],[24,29],[32,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.data.length/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;var o=(this.state.currentPage-1)*this.state.displayPerPage,d=o+this.state.displayPerPage-1;return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")?r.a.createElement("h4",null,"Forwarded Tickets"):e.props.role.includes("Specialist")?r.a.createElement("h4",null,"Canceled Tickets"):void 0,r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(pt,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",value:this.state.filter_from_date,onChange:this.onChangeFormDate}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",value:this.state.filter_to_date,onChange:this.onChangeToDate}),r.a.createElement(y.y,{leftIcon:"view_list",label:"BPR/CLient",fullWidth:!0,menuItems:this.state.clients,value:this.state.filter_client_id,onChange:this.onChangeClientId}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",fullWidth:!0,menuItems:this.state.priorities,value:this.state.filter_priority_id,onChange:this.onChangePriorityId}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",fullWidth:!0,menuItems:this.state.categories,value:this.state.filter_category_id,onChange:this.onChangeCategoryId}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Status",fullWidth:!0,menuItems:this.state.status,value:this.state.filter_status_id,onChange:this.onChangeStatusId}),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:this.resetFilter},"Reset"))):"",r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"Sent to \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}}," Status \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("status")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Sent at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("forwarded_at")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return t<=d&&t>=o?r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,e.full_name)),r.a.createElement("td",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.forwarded_at,"dd mmm yyyy HH:MM")))):""})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),pt=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Forwarded Tickets"),r.a.createElement("table",{className:"table is-bordered is-fullwidth is-striped",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}}," #ID "),r.a.createElement("th",{style:{width:"10%"}}," No "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Reques> "),r.a.createElement("th",{style:{width:"15%"}},"BPR/Clie> "),r.a.createElement("th",{style:{width:"7%"}},"Priorit>"),r.a.createElement("th",{style:{width:"10%"}},"Sent t>"),r.a.createElement("th",{style:{width:"10%"}}," Status "),r.a.createElement("th",{style:{width:"15%"}},"Sent a>"))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("b",null,e._id)),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,e.full_name)),r.a.createElement("td",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.forwarded_at,"dd mmm yyyy HH:MM"))))})))))}}]),t}(n.Component),ft=x.Session.get().payload,ht=[],gt=new FormData,bt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeClientId=function(e){var t=a.state.clients.indexOf(e),n=ht[t];console.log(n),a.setState({client_id:n})},a.onChangeTitle=function(e){console.log(e),a.setState({title:e})},a.replyEdited=function(){a.props.replyEdited(a.props.ticket_reply_id)},a.saveTimeResolution=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticket_id:a.props.ticket_id,handled_by_user_id:t,resolution_at:H()(new Date,"yyyy-mm-dd HH:MM:ss")},e.prev=1,e.next=4,k.a.post("/api/ccs-ticket-time-resolution",n).then((function(e){200===e.data.status&&console.log("time resolution saved")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],r={module_id:a.state.module_id,ticket_id:a.props.ticket_id,file_url:a.state.file_url,replies:n.innerHTML,status_id:8,created_by:a.state.created_by},""===a.props.ticket_reply_id||void 0===a.props.ticket_reply_id){e.next=15;break}return r.updated_by=ft.userId,e.prev=5,e.next=8,k.a.put("/api/ccs-ticket-reply/".concat(a.props.ticket_reply_id),r).then(function(){var e=Object(o.a)(i.a.mark((function e(t){var n,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.data.status){e.next=37;break}if(!(a.state.file_url.length>0)){e.next=5;break}return a.state.formdata.map((function(e,t){gt.append("file",e)})),e.next=5,k.a.post("/upload-file-ccs",gt).then((function(e){try{e.data.success}catch(Vc){console.log(Vc)}}));case 5:if(!a.props.client_email.includes(",")){e.next=23;break}n=a.props.client_email.split(","),l=0;case 8:if(!(l<n.length)){e.next=21;break}return c={email_to:n[l],subject:"Reply Ticket Notification",message:"<p>Your ticket is already replied. Please check http://17.5.16.28:9001/ccs/ticket/detail?ticket_id=".concat(r.ticket_id," </p>")},e.prev=10,e.next=13,k.a.post("/ccs-send-email",c).then((function(e){200===e.data.status?console.log("sent"):console.log("error send email")}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log(e.t0);case 18:l++,e.next=8;break;case 21:e.next=32;break;case 23:return s={email_to:a.props.client_email,subject:"Reply Ticket Notification",message:"<p>Your ticket is already replied. Please check http://17.5.16.28:9001/ccs/ticket/detail?ticket_id=".concat(r.ticket_id," </p>")},e.prev=24,e.next=27,k.a.post("/ccs-send-email",s).then((function(e){200===e.data.status?console.log("sent"):console.log("error send email")}));case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(24),console.log(e.t1);case 32:a.replyEdited(),a.notify("SUCCESS",t.data.message),ce("Edit Ticket Reply ID "+a.props.ticket_reply_id,a.state.module_id),e.next=38;break;case 37:a.notify("ERROR","Failed Processing data");case 38:case"end":return e.stop()}}),e,null,[[10,15],[24,29]])})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),a.notify("ERROR",e.t0);case 13:e.next=16;break;case 15:a.notify("ERROR","Unable Processing data");case 16:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){e.name,e.size,e.type;var n=e.lastModified;new Date(n);a.setState({file_url:[].concat(Object(we.a)(a.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(a.state.formdata),[e])})},a.deleteFile=function(e){var t=a.state.formdata.filter((function(t){return!t.name.includes(e)}));a.setState({formdata:t});var n=a.state.file_url.indexOf(e);n>-1&&a.state.file_url.splice(n,1)},a.cancelEditReply=function(){a.props.cancelEditReply(!1)},a.state={_id:"",formdata:[],files:[],clients:[],file_url:[],module_id:"",client_id:"",title:"",description:"",created_by:"",dialogVisible:!1},a.onChangeClientId=a.onChangeClientId.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),console.log(this.props.ticket_reply_id),e.prev=13,e.next=16,k.a.get("/api/ccs-ticket-reply/".concat(this.props.ticket_reply_id)).then((function(e){200===e.data.status&&n.setState({created_by:e.data.data[0].created_by})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return console.log(this.state.created_by),e.prev=22,e.next=25,k.a.get("/api/ccs-ticket-reply-file-by-ticket-id/".concat(this.props.ticket_reply_id)).then((function(e){200===e.data.status&&n.setState({files:e.data.data})}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:case"end":return e.stop()}}),e,this,[[2,7],[13,18],[22,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"summernote"},this.props.reply),r.a.createElement("br",null),this.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),this.state.files.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.file_url,removable:!0,onClick:function(){return e.deleteFile(t.file_url)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return e.setState({dialogVisible:!0})}},"Save & Accept"),r.a.createElement(y.d,{raised:!0,onClick:this.cancelEditReply},"Cancel"))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.handleSubmit},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?")),r.a.createElement(S.a,null))}}]),t}(n.Component),Et=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),""!==t){e.next=22;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-tickets-queued-total?currentPage=0&displayPerPage=0".concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(1,"&displayPerPage=",100,n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:e.next=38;break;case 22:return e.prev=22,e.next=25,k.a.get("/api/ccs-tickets-queued-total?currentPage=0&displayPerPage=0&key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log(e.t2);case 30:return e.prev=30,e.next=33,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(1,"&displayPerPage=",100,"&key=",t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 33:e.next=38;break;case 35:e.prev=35,e.t3=e.catch(30),console.log(e.t3);case 38:a.setState({currentPage:1,displayPerPage:100});case 39:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[22,27],[30,35]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeDateFrom=function(e){a.setState({filter:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-queued-total?currentPage=0&displayPerPage=0&key=".concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(1,"&displayPerPage=",100,"&key=",a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.setState({currentPage:1,displayPerPage:100});case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,l,c,s,o,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],"",r="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(r)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.NO=a+1,n.ID=e._id,n.Title=e.title,e.description.includes("<img ")||e.description.includes("<iframe ")?n.Description="[MEDIA]":n.Description=e.description.replace(/<\/?[^>]+(>|$)/g,""),n["BPR/Client"]=e.client_name,n.Status=e.status,n["Created at"]=H()(e.created_at,"dd mmm yyyy HH:MM"),t[a]=n})),n=t,a.setState({dataToExport:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",l="All  Queued Tickets per ".concat(H()(new Date,"dd-mm-yyyy")),c=We.utils.json_to_sheet(n),s={Sheets:{data:c},SheetNames:["data"]},o=We.write(s,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,l+".xlsx");case 20:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-queued?currentPage=0&displayPerPage=0".concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],dataToExport:[],dataToExportPDF:[],isLoading:!0,clients:[],priorities:[],category_id:"",priority_id:"",date_from:"",date_to:"",client_id:"",total_data:0,asc:1,key:"",isFilter:!1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("QUEUED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a.printable=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-queued-total?currentPage=0&displayPerPage=0").then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-queued?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a[t]=n}return!1})),t.setState({clients:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h4",null,"Queued Tickets"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:10}),r.a.createElement(y.i,{size:2},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return e.setState({isFilter:!e.state.isFilter})}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(_t,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role})))),this.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:this.onChangeDateTo,value:this.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:this.state.clients,onChange:this.onChangeClientId,value:this.state.client_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return e.filter()}},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:function(){return e.resetFilter()}},"Reset"))):"",r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table is-fullwidth is-striped",ref:e.printable},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"60%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"Ticket Status"),r.a.createElement("th",{style:{width:"20%"}},"Created at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id,"&ticket_reply_id=").concat(e._id)},"  ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("p",{style:{color:e.label_color_status}},r.a.createElement("b",null,e.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),_t=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Queued Tickets"),r.a.createElement("table",{className:"table is-fullwidth is-striped is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"No"),r.a.createElement("th",{style:{width:"10%"}},"#ID"),r.a.createElement("th",{style:{width:"55%"}},"Ticket Request  "),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client "),r.a.createElement("th",{style:{width:"20%"}},"Ticket Status"),r.a.createElement("th",{style:{width:"20%"}},"Created at "))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("b",null,e._id)),r.a.createElement("td",null,r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("p",{style:{color:e.label_color_status}},r.a.createElement("b",null,e.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy HH:MM"))))})))))}}]),t}(n.Component),yt=x.Session.get().payload,vt=new FormData,kt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeTitle=function(e){console.log(e),a.setState({title:e})},a.finishReject=function(){a.props.finishReject("")},a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],r={module_id:a.state.module_id,ticket_id:a.props.ticket_id,file_url:a.state.file_url,replies:n.innerHTML,status_id:7,created_by:a.state.created_by},""===a.state._id||void 0===a.state._id){e.next=9;break}return r.updated_by=a.state.updated_by,e.next=7,k.a.put("/api/ccs-ticket-reply/".concat(a.state._id),r).then((function(e){try{200===e.data.status?(a.state.file_url.length>0&&(a.state.formdata.map((function(e,t){vt.append("file",e)})),k.a.post("/upload-file-ccs",vt).then((function(e){try{e.data.success}catch(Vc){console.log(Vc)}}))),a.rejectReply(),a.cancelReject()):a.notify("ERROR","Failed Processing data")}catch(Vc){a.notify("ERROR",Vc)}}));case 7:e.next=12;break;case 9:return r.created_by=a.state.updated_by,e.next=12,k.a.post("/api/ccs-ticket-reply",r).then((function(e){try{200===e.data.status?(a.state.file_url.length>0&&(a.state.formdata.map((function(e,t){vt.append("file",e)})),k.a.post("/upload-file-ccs",vt).then((function(e){try{e.data.success}catch(Vc){console.log(Vc)}}))),a.rejectReply(),a.cancelReject()):a.notify("ERROR","Failed Processing data")}catch(Vc){a.notify("ERROR",Vc)}}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){e.name,e.size,e.type;var n=e.lastModified;new Date(n);a.setState({file_url:[].concat(Object(we.a)(a.state.file_url),[e.name]),formdata:[].concat(Object(we.a)(a.state.formdata),[e])})},a.deleteFile=function(e){var t=a.state.formdata.filter((function(t){return!t.name.includes(e)}));a.setState({formdata:t});var n=a.state.file_url.indexOf(e);n>-1&&a.state.file_url.splice(n,1)},a.cancelReject=function(){a.props.cancelReject(!1)},a.rejectReply=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={status_id:7,module_id:a.state.module_id,ticket_id:a.props.ticket_id,created_by:a.state.created_by,updated_by:yt.userId},e.prev=1,e.next=4,k.a.put("/api/ccs-ticket-reply-reject/".concat(a.props.ticket_reply_id),r).then((function(e){200===e.data.status?(a.notify("SUCCESS","You Rejected!"),ce("Reject  Ticket Reply ID "+a.props.ticket_reply_id,a.state.module_id),a.componentDidMount()):a.notify("ERROR","Failed processing data")}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),a.notify("ERROR","Failed processing data");case 10:a.setState({replyAnswer:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),a.state={_id:"",formdata:[],clients:[],file_url:[],module_id:"",client_id:"",title:"",description:"",created_by:"",updated_by:yt.userId},a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),e.prev=12,e.next=15,k.a.get("/api/ccs-ticket-reply/".concat(this.props.ticket_reply_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({created_by:e.created_by})}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,this,[[2,7],[12,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),this.state.formdata.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:t.name,removable:!0,onClick:function(){return e.deleteFile(t.name)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit & Reject"),r.a.createElement(y.d,{raised:!0,onClick:this.cancelReject},"Cancel"))))}}]),t}(n.Component),xt=x.Session.get().payload,wt=(new FormData,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeHandlerId=function(e){a.setState({handled_by_user_id:e})},a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n={handled_by_user_id:a.state.handled_by_user_id,status_id:4}).updated_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/ccs-ticket-set-handler-queued/",n).then((function(e){200===e.data.status&&(a.notify("SUCCESS","Success!"),ce("Forward  Ticket ID "+a.state._id,a.state.module_id),window.history.go(-1))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a.notify("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.showForm=function(){a.props.showForm("")},a.state={_id:a.props.ticket_id,role:"",helpdesk:[],module_id:"",isAuto:!1,handled_by_user_id:"",created_by:xt.userId},a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return this.setState({module_id:t}),U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),e.prev=12,e.next=15,k.a.get("/api/ccs-ticket/".concat(this.state._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return n.setState({max_resolution_time:e.max_resolution_time}),!1}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:return e.prev=20,e.next=23,k.a.get("/api/helpdesk-users").then((function(e){var t=[];200===e.data.status&&(e.data.data.map((function(e,a){var n={leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),label:e.full_name,value:e._id};return t[a]=n,!1})),n.setState({helpdesk:t}))}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:console.log(this.state.helpdesk);case 29:case"end":return e.stop()}}),e,this,[[2,7],[12,17],[20,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.helpdesk;return r.a.createElement("div",null,r.a.createElement(y.r,{className:"box grid-example md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Distribute Ticket"),r.a.createElement(y.i,{size:12},this.state.isAuto?"":r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Handler",fullWidth:!0,menuItems:this.state.helpdesk,onChange:this.onChangeHandlerId,value:this.state.handled_by_user_id}),r.a.createElement("hr",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:this.showForm},"Cancel"))))}}]),t}(n.Component)),St=x.Session.get().payload,Pt=[],Ct=(new FormData,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeClientId=function(e){var t=a.state.clients.indexOf(e),n=Pt[t];console.log(n),a.setState({client_id:n})},a.onChangeTitle=function(e){console.log(e),a.setState({title:e})},a.replyEdited=function(){a.props.replyEdited(a.props.ticket_reply_id)},a.saveTimeResolution=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ticket_id:a.props.ticket_id,handled_by_user_id:t,resolution_at:H()(new Date,"yyyy-mm-dd HH:MM:ss")},e.prev=1,e.next=4,k.a.post("/api/ccs-ticket-time-resolution",n).then((function(e){200===e.data.status&&console.log("time resolution saved")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=window.document.getElementsByClassName("note-editable")[0],r={description:n.innerHTML},""===a.props.ticket_id||void 0===a.props.ticket_id){e.next=15;break}return r.updated_by=a.state.created_by,e.prev=5,e.next=8,k.a.put("/api/ccs-ticket/".concat(a.props.ticket_id),r).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.notify("SUCCESS",t.data.message),a.successEditTicket()):a.notify("ERROR","Failed Processing data");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),a.notify("ERROR",e.t0);case 13:e.next=16;break;case 15:a.notify("ERROR","Unable Processing data");case 16:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),a.cancelEditTicket=function(){a.props.cancelEditTicket(!1)},a.successEditTicket=function(){a.props.successEditTicket()},a.state={_id:"",formdata:[],files:[],clients:[],file_url:[],client_id:"",title:"",description:"",created_by:St.userId,dialogVisible:!1},a.onChangeClientId=a.onChangeClientId.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(pe.a)(a)),a.onChangeTitle=a.onChangeTitle.bind(Object(pe.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U()(".summernote").summernote({placeholder:"Add Note",height:"20vh"}),t="",a=window.location.href.split("/"),console.log(a),e.prev=4,e.next=7,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Data Not Loaded ",e.t0);case 12:return this.setState({module_id:t}),console.log(t),e.prev=14,e.next=17,k.a.get("/api/ccs-ticket-reply-file-by-ticket-id/".concat(this.props.ticket_reply_id)).then((function(e){200===e.data.status&&n.setState({files:e.data.data})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,this,[[4,9],[14,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"summernote"},this.props.description),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return e.setState({dialogVisible:!0})}},"Save"),r.a.createElement(y.d,{raised:!0,onClick:this.cancelEditTicket},"Cancel"))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.handleSubmit},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?")),r.a.createElement(S.a,null))}}]),t}(n.Component)),Nt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),Ot=x.Session.get().payload,Dt=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.initialFetch();case 1:case"end":return e.stop()}}),e)}))),a.initialFetch=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-parents-total?currentPage=0&displayPerPage=0").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-ticket-parents?currentPage=".concat(a.state.currentPage,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:a.state.data.map((function(e,t){if(e.total_child>0)try{k.a.get("/api/ccs-ticket-by-parent_id/".concat(e._id)).then((function(t){200===t.data.status&&(a.setState({loadChild:[].concat(Object(we.a)(a.state.loadChild),[!0])}),e.loadChild=!0,e.child_ticket=t.data.data)}))}catch(Vc){console.log(Vc)}})),t=F.a.parse(window.location.search),t.user_id,t.client_id,a.getUserRole();case 22:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])}))),a.getUserRole=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.split("/"),e.prev=1,e.next=4,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a.setState({module_id:e._id}),!1}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Data Not Loaded ",e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/user-role/".concat(a.state.module_id,"/").concat(a.state.created_by)).then((function(e){200===e.data.status&&(a.setState({role:e.data.data[0].role}),a.setState({role_id:e.data.data[0].role_id}))}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])}))),a.notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.toggleLoadChild=function(e){var t=a.state.loadChild;t[e]=!t[e],a.setState({loadChild:t})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=21;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&currentPage=1&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:a.state.data.map((function(e,t){if(e.total_child>0)try{k.a.get("/api/ccs-ticket-by-parent_id/".concat(e._id)).then((function(t){200===t.data.status&&(a.setState({loadChild:[].concat(Object(we.a)(a.state.loadChild),[!0])}),e.loadChild=!0,e.child_ticket=t.data.data)}))}catch(Vc){console.log(Vc)}})),a.setState({currentPage:1}),e.next=26;break;case 21:a.setState({key:t});try{k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id,"&key=").concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(Vc){console.log(Vc)}try{k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&key=").concat(t,"&currentPage=1&displayPerPage=100")).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}))}catch(Vc){console.log(Vc)}a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.total_child>0)try{k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(a.setState({loadChild:[].concat(Object(we.a)(a.state.loadChild),[!0])}),t.loadChild=!0,t.child_ticket=e.data.data)}))}catch(Vc){console.log(Vc)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1});case 26:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({ticket_id:e}),a.setState({dialogDeleteTicketVisible:!0})},a.processDelete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/ccs-ticket/".concat(a.state.ticket_id)).then((function(e){200===e.data.status?(a.setState({ticket_id:""}),a.setState({dialogDeleteTicketVisible:!1}),a.notify("SUCCESS","Success deleting ticket"),a.initialFetch()):a.notify("ERROR","Failed Processing data")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.isActive=function(e){if(e===a.state.currentPage)return!0},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-parents?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&(a.setState({isLoading:!1}),a.setState({data:e.data.data}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.total_child>0)try{k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}))}catch(Vc){console.log(Vc)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={module_id:"",role:"",role_id:"",created_by:Ot.userId,ticket_id:"",data:[],client_id:"",loadChild:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",dialogDeleteTicketVisible:!1,currentPage:1,displayPerPage:100,total_data:0,key:"",isLoading:null,asc:1};var n=G()(K);return n.on("TICKET_ADDED",(function(e){a.initialFetch()})),n.on("UPDATE_ANSWER",(function(e){a.initialFetch()})),n.on("RATED",(function(e){a.initialFetch()})),n.on("TICKET_FORWARDED",(function(e){a.initialFetch()})),n.on("APPROVAL",(function(e){a.initialFetch()})),n.on("TICKET_ADDED",(function(e){a.initialFetch()})),n.on("REJECT",(function(e){a.initialFetch()})),n.on("COMPLETED",(function(e){a.initialFetch()})),n.on("QUEUED",(function(e){a.initialFetch()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"showDetail",value:function(e){this.props.showDetail(e)}},{key:"setSorting",value:function(e){this.setState({asc:-1*this.state.asc}),this.sortArray(this.state.data,e,this.state.asc),this.setState({data:this.state.data})}},{key:"sortArray",value:function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e}},{key:"setActivePage",value:function(e){this.setState({currentPage:e}),this.loadDataByPage(e)}},{key:"setPageEnd",value:function(){var e=Math.ceil(this.state.total_data/this.state.displayPerPage);this.setState({currentPage:e}),this.loadDataByPage(e)}},{key:"setPageStart",value:function(){this.setState({currentPage:1}),this.loadDataByPage(1)}},{key:"setPageNext",value:function(){var e=this.state.currentPage,t=Math.ceil(this.state.total_data/this.state.displayPerPage),a=e+1>t?t:e+1;this.setState({currentPage:a}),this.loadDataByPage(a)}},{key:"setPagePrevious",value:function(){var e=this.state.currentPage,t=e-1<1?1:e-1;this.setState({currentPage:t}),this.loadDataByPage(t)}},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage+2,l=Math.ceil(this.state.total_data/this.state.displayPerPage),c=a>l?l:a,s=this.state.currentPage-3;s<=c;s++)t[s-1]=s;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(S.a,null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Tickets"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"3%"}}),r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"Request Tickets \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Handled by \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}}," Status \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("status")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Created at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"2%"}},"\xa0"))),r.a.createElement("tbody",null,e.state.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.total_child>0?r.a.createElement("a",{onClick:function(){return e.toggleLoadChild(a)}},r.a.createElement(y.q,null,e.state.loadChild[a]?"arrow_drop_down":"arrow_right"," ")):""),r.a.createElement("td",null," ",r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)},r.a.createElement("b",null,t._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):""),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:t.label_color_status}},t.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,e.state.role.includes("Superadmin")?r.a.createElement(Nt,{setDelete:function(){return e.setDelete(t._id)}}):"-")),e.state.loadChild[a]&&void 0!=t.child_ticket&&t.child_ticket.length>0?t.child_ticket.map((function(a,l){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{style:{paddingLeft:"2.5vw"}},r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)},r.a.createElement("b",null,t._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(a._id)}," ",r.a.createElement("b",null,a.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,a.client_name)),r.a.createElement("td",null,""!==a.priority_id?r.a.createElement("span",{className:"tag "+a.label_color_priority},r.a.createElement("b",null,a.priority)):""),r.a.createElement("td",null,""!==a.full_name_handler&&null!==a.full_name_handler?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(a.handled_by_user_id)},a.full_name_handler)):""),r.a.createElement("td",null,e.state.role.includes("Customer")&&a.status_id>=4&&8!==a.status_id?r.a.createElement("span",null,r.a.createElement("b",{style:{color:"orange"}},"HANDLED")):r.a.createElement("span",null,r.a.createElement("b",{style:{color:a.label_color_status}},a.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(a.created_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,e.state.role.includes("Superadmin")?r.a.createElement(Nt,{setDelete:function(){return e.setDelete(a._id)}}):"-")))})):"")})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"",r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:e.state.dialogDeleteTicketVisible,onHide:function(){return!e.state.dialogDeleteTicketVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:e.processDelete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteTicketVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?"))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component);var jt=x.Session.get(),Tt=jt.payload,It=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=20;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-all-onprogress-total?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-all-onprogress?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=",100)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:e.next=36;break;case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-all-onprogress-total?key=".concat(t,"&user_id=").concat(a.state.user_id,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/ccs-tickets-all-onprogress?key=".concat(t,"&user_id=").concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=",100)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:a.setState({currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-all-onprogress-total?key=".concat(a.state.key,"&user_id=").concat(a.state.user_id,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-tickets-all-onprogress?key=".concat(a.state.key,"&user_id=").concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.state={user_id:"",data:[],priorities:[],categories:[],status:[],total_data:0,filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",key:"",asc:1,currentPage:1,displayPerPage:100,isLoading:!0},a.socket=G()(K),a.socket.on("TICKET_FORWARDED",(function(e){e===Tt.userId&&a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),a="",n="",this.setState({client_id:n}),void 0===t.user_id||null===t.user_id||""===t.user_id||(a=t.user_id,this.setState({user_id:a})),void 0===t.client_id||null===t.client_id||""===t.client_id||(n=t.client_id,this.setState({client_id:n})),e.prev=7,e.next=10,k.a.get("/api/ccs-tickets-all-onprogress-total?user_id=".concat(a,"&client_id=").concat(n)).then((function(e){200===e.data.status&&r.setState({total_data:e.data.data[0].total})}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:return e.prev=15,e.next=18,k.a.get("/api/ccs-tickets-all-onprogress?user_id=".concat(a,"&client_id=").concat(n,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&r.setState({isLoading:!1,data:e.data.data})}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All On Progress Tickets"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ...",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"30%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handled By \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handling Remaining time \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("time_left")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handled at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,""!==e.full_name&&null!==e.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name)):""),r.a.createElement("td",null,e.time_left_adjusted>0?e.time_left_adjusted:e.time_left," days left"),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),Rt=x.Session.get(),Mt=Rt.payload,At=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=20;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-all-completed-total?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-all-completed?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:e.next=36;break;case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-all-completed-total?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&key=").concat(t,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/ccs-tickets-all-completed?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&key=").concat(t,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:a.setState({currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){console.log(e),a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-all-completed?user_id=".concat(a.state.user_id,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={user_id:"",client_id:"",key:"",data:[],priorities:[],categories:[],status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",total_data:0,asc:1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("ACCEPT",(function(e){console.log(e),e===Mt.userId&&a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),a="",n="",this.setState({client_id:n}),void 0===t.user_id||null===t.user_id||""===t.user_id||(a=t.user_id,this.setState({user_id:a})),void 0===t.client_id||null===t.client_id||""===t.client_id||(n=t.client_id,this.setState({client_id:n})),e.prev=7,e.next=10,k.a.get("/api/ccs-tickets-all-completed-total?user_id=".concat(a,"&client_id=").concat(n,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&r.setState({total_data:e.data.data[0].total})}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:return e.prev=15,e.next=18,k.a.get("/api/ccs-tickets-all-completed?user_id=".concat(a,"&client_id=").concat(n,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&r.setState({isLoading:!1,data:e.data.data})}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Finished Tickets"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"8%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handled By \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Finished at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("updated_at")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Rating \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("rating")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority)),r.a.createElement("td",null,""!==e.full_name&&null!==e.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name)):""),r.a.createElement("td",null,r.a.createElement("p",null,null!==e.resolution_at?H()(e.resolution_at,"dd mmm yyyy, HH:MM"):H()(e.updated_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,e.rating>0?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})):""))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),Ft=x.Session.get(),Lt=Ft.payload,Ht=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getTotalQueued=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-queued-total").then((function(e){200===e.data.status&&a.setState({total_queue:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalApprove=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-approval-total").then((function(e){200===e.data.status&&a.setState({total_approve:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalRejected=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({total_rejected:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getAverageRating=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-rating-average/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({avg_rating:e.data.data[0].average_rating})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getPerRating=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-rating-per-rating/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({rate_per_rating:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalCompleted=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({total_finished:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalTickets=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalSplittedTickets=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets").then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data.length})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalHandle=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-handle-total/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({total_handle:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalFinish=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-finished-total/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({total_answered:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalForwarded=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-forward-total/".concat(Lt.userId)).then((function(e){200===e.data.status&&a.setState({total_forwarded:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.state={data:[],categories:[],team_activities:[],priorities:[],total_split:0,total_tickets:0,total_answered:0,total_forwarded:0,total_available:0,total_queued:0,total_approve:0,total_finished:0,total_handle:0,total_rejected:0,role:a.props.role,avg_rating:0,rate_per_rating:[]},a.socket=G()("localhost:4000"),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/user/".concat(Lt.userId)).then((function(e){200===e.data.status&&n.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return t="",a=window.location.href.split("/"),e.prev=10,e.next=13,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/logs-by-module-user-id/".concat(t,"/").concat(Lt.userId)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return a<15&&t.push(e),!1})),n.setState({team_activities:t})}}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:this.state.role.includes("Help Desk")||this.state.role.includes("Implementator")||this.props.role.includes("Support Pelayanan")||this.state.role.includes("Specialist")?(this.getTotalRejected(),this.getTotalHandle(),this.getAverageRating(),this.getTotalForwarded(),this.getPerRating(),this.getTotalFinish(),this.getTotalCompleted()):this.state.role.includes("Supervisor CCS")&&(this.getTotalTickets(),this.getTotalQueued(),this.getTotalApprove());case 27:case"end":return e.stop()}}),e,this,[[0,5],[10,15],[18,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Statistics"),r.a.createElement(y.r,{style:{paddingLeft:"30px",paddingRight:"30px"}},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1})),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("figure",null,r.a.createElement("img",{className:"is-rounded",style:{width:"5vw"},src:t.avatar_url,alt:""})),e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")||e.props.role.includes("Specialist")?r.a.createElement("p",{style:{textAlign:"center"}},e.state.avg_rating>0?e.state.avg_rating.toFixed(2):e.state.avg_rating,"  \xa0",r.a.createElement(he.a,{rating:e.state.avg_rating>0?parseFloat(e.state.avg_rating.toString()):0,starRatedColor:"orange",starDimension:"1.2vw",numberOfStars:5,name:"rating"})):"")})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")?r.a.createElement("div",{className:"tile is-ancestor has-text-centered"},r.a.createElement(_.a,{to:"/ccs/task?tab_name=my-handle",className:"tile is-parent",style:{}},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#f0c260"}},r.a.createElement("p",{className:"title"},e.state.total_handle),r.a.createElement("p",{className:"subtitle"},"Active Progress"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=finished",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#aaf2d8"}},r.a.createElement("p",{className:"title"},e.state.total_answered),r.a.createElement("p",{className:"subtitle"},"Closed"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=rejected",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"pink"}},r.a.createElement("p",{className:"title"},e.state.total_rejected),r.a.createElement("p",{className:"subtitle"},"Rejected"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=forwarded",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#53b5e6"}},r.a.createElement("p",{className:"title"},e.state.total_forwarded),r.a.createElement("p",{className:"subtitle"},"Forwarded"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=completed",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"lightgreen"}},r.a.createElement("p",{className:"title"},"  ",e.state.total_finished),r.a.createElement("p",{className:"subtitle"},"Finished")))):e.props.role.includes("Specialist")?r.a.createElement("div",{className:"tile is-ancestor has-text-centered"},r.a.createElement(_.a,{to:"/ccs/task?tab_name=my-handle",className:"tile is-parent",style:{}},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#f0c260"}},r.a.createElement("p",{className:"title"},e.state.total_handle),r.a.createElement("p",{className:"subtitle"},"Active Progress"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=finished",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#aaf2d8"}},r.a.createElement("p",{className:"title"},e.state.total_answered),r.a.createElement("p",{className:"subtitle"},"Closed"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=rejected",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"pink"}},r.a.createElement("p",{className:"title"},e.state.total_rejected),r.a.createElement("p",{className:"subtitle"},"Rejected"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=forwarded",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#53b5e6"}},r.a.createElement("p",{className:"title"},e.state.total_forwarded),r.a.createElement("p",{className:"subtitle"},"Cancelled"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=completed",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"lightgreen"}},r.a.createElement("p",{className:"title"},"  ",e.state.total_finished),r.a.createElement("p",{className:"subtitle"},"Finished")))):e.props.role.includes("Supervisor CCS")?r.a.createElement("div",{className:"tile is-ancestor has-text-centered"},r.a.createElement(_.a,{to:"/ccs/task?tab_name=available-ticket",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"pink"}},r.a.createElement("p",{className:"title"},e.state.total_tickets),r.a.createElement("p",{className:"subtitle"},"Total Tickets"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=approval",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#aaf2d8"}},r.a.createElement("p",{className:"title"},e.state.total_approve),r.a.createElement("p",{className:"subtitle"},"Approval"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=queued",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#53b5e6"}},r.a.createElement("p",{className:"title"},e.state.total_queue),r.a.createElement("p",{className:"subtitle"},"On Queue")))):void 0)),e.props.role.includes("Help Desk")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")||e.props.role.includes("Specialist")?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"My Activity"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.team_activities.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.team_activities.map((function(e,t){return r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),primaryText:r.a.createElement("b",null,null!==e.full_name?e.full_name:e.client_name),secondaryText:e.log+"\n"+H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss"),threeLines:!0})}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ..."))))))),r.a.createElement(y.i,{size:6},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:10},r.a.createElement("h4",null,"My Ratings")),r.a.createElement(y.i,{size:2},e.state.avg_rating>0?e.state.avg_rating.toFixed(2):e.state.avg_rating)),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.rate_per_rating.map((function(e,t){return r.a.createElement(y.r,null,r.a.createElement(y.i,{size:10},r.a.createElement("p",null,r.a.createElement("b",null,e.rating)," \xa0",r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"black",starDimension:"1.2vw",numberOfStars:5,name:"rating"}))),r.a.createElement(y.i,{size:2},e.count_rating))})))))):e.props.role.includes("Supervisor CCS")?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"My Activity"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.team_activities.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.team_activities.map((function(e,t){return r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),primaryText:r.a.createElement("b",null,null!==e.full_name?e.full_name:e.client_name),secondaryText:e.log+"\n"+H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss"),threeLines:!0})}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ...")))))):void 0))))}}]),t}(n.Component),zt=(n.Component,x.Session.get()),Vt=zt.payload,Bt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getTotalTicketProcessedSuperadmin=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-all-completed-total").then((function(e){200===e.data.status&&a.setState({total_finished:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-all-onprogress-total").then((function(e){200===e.data.status&&a.setState({total_handle:e.data.data[0].total})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data[0].total})}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21]])}))),a.getTotalRejected=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(Vt.userId)).then((function(e){200===e.data.status&&a.setState({total_rejected:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalCompleted=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Customer")){e.next=15;break}return t="",e.next=4,k.a.get("/api/user/".concat(Vt.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,a){t=e.client_id}))}catch(Vc){console.log(Vc)}}));case 4:return a.setState({client_id:t}),e.prev=5,e.next=8,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(t)).then((function(e){200===e.data.status&&a.setState({total_finished:e.data.data.length})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:e.next=23;break;case 15:return e.prev=15,e.next=18,k.a.get("/api/ccs-tickets-my-completed-total/".concat(Vt.userId)).then((function(e){200===e.data.status&&a.setState({total_finished:e.data.data[0].total})}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[5,10],[15,20]])}))),a.getTotalHandle=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.role.includes("Customer")){e.next=15;break}return t="",e.next=4,k.a.get("/api/user/".concat(Vt.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,a){t=e.client_id}))}catch(Vc){console.log(Vc)}}));case 4:return a.setState({client_id:t}),e.prev=5,e.next=8,k.a.get("/api/ccs-tickets-all-onprogress-total?client_id=".concat(t)).then((function(e){200===e.data.status&&a.setState({total_handle:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:e.next=23;break;case 15:return e.prev=15,e.next=18,k.a.get("/api/ccs-tickets-my-handle-total/".concat(Vt.userId)).then((function(e){200===e.data.status&&a.setState({total_handle:e.data.data[0].total})}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[5,10],[15,20]])}))),a.getTotalFinish=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-finished-total/".concat(Vt.userId)).then((function(e){200===e.data.status&&a.setState({total_answered:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalAvailable=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&a.setState({total_available:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:if(!a.props.role.includes("Customer")){e.next=21;break}return t="",e.next=12,k.a.get("/api/user/".concat(Vt.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,a){t=e.client_id}))}catch(Vc){console.log(Vc)}}));case 12:return a.setState({client_id:t}),e.prev=13,e.next=16,k.a.get("/api/ccs-tickets-total?client_id=".concat(t)).then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,5],[13,18]])}))),a.getTotalApprove=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-approval-total").then((function(e){200===e.data.status&&a.setState({total_approve:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalQueued=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-queued-total").then((function(e){200===e.data.status&&a.setState({total_queue:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalForward=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-forward-total/".concat(Vt.userId)).then((function(e){200===e.data.status&&a.setState({total_forwarded:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.showDetail=function(e){"detail",a.setState({contain:"detail"}),a.state._id=e},a.closeDetail=function(){a.setState({contain:"",_id:""}),""},a.setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.state={_id:"",role:"",role_id:"",data:[],role_controls:[],announcements:[],contain:"",total_answered:0,total_finished:0,total_queue:0,total_handle:0,total_forwarded:0,total_rejected:0,total_available:0,total_approve:0,list_contain:"",role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a.showDetail=a.showDetail.bind(Object(pe.a)(a)),a.socket=G()(K),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.socket.on("QUEUED",(function(e){a.getTotalQueued()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({list_contain:t.tab_name}),this.props.role.includes("Superadmin")?this.getTotalTicketProcessedSuperadmin():this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")||this.props.role.includes("Specialist")||this.props.role.includes("Support Pelayanan")?(this.getTotalRejected(),this.getTotalHandle(),this.getTotalForward(),this.getTotalFinish(),this.getTotalCompleted()):this.props.role.includes("Supervisor CCS")?(this.getTotalAvailable(),this.getTotalApprove(),this.getTotalQueued()):this.props.role.includes("Customer")&&(this.getTotalCompleted(),this.getTotalHandle(),this.getTotalAvailable()),e.prev=3,e.next=6,k.a.post("/api/role-control-by-link-role-id",{link:window.location.pathname,role_id:this.props.role_id}).then((function(e){200===e.data.status&&(r.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&r.setState({role_read:!0}),"create"===e.type_control&&r.setState({role_create:!0}),"update"===e.type_control&&r.setState({role_update:!0}),"delete"===e.type_control&&r.setState({role_delete:!0})})))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return a="",n=window.location.href.split("/"),e.prev=13,e.next=16,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,t){a=e._id}))}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.error("Data Not Loaded ",e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/announcements-by-module-id/".concat(a)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),r.setState({announcements:t})}}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,this,[[3,8],[13,18],[21,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=F.a.parse(window.location.search);console.log(t);var a=t.tab_name,l=[];return this.props.role.includes("Superadmin")?l=[{color:"darkblue",action:"all-ticket",icon:"fa fa-ticket",tooltip:"All Tickets",badge:this.state.total_tickets},{color:"#f0c260",action:"all-handle",icon:"fa fa-ticket",tooltip:"All On Progress",badge:this.state.total_handle},{color:"green",action:"all-completed",icon:"fa fa-ticket",tooltip:"All Finished",badge:this.state.total_finished}]:this.props.role.includes("Customer")?l=[{color:"darkblue",action:"my-ticket",icon:"fa fa-ticket",tooltip:"All My Tickets",badge:this.state.total_tickets},{color:"#f0c260",action:"my-handle",icon:"fa fa-ticket",tooltip:"On Progress",badge:this.state.total_handle},{color:"green",action:"completed",icon:"fa fa-ticket",tooltip:"Finished",badge:this.state.total_finished}]:this.props.role.includes("Help Desk")?l=[{color:"#f0c260",action:"my-handle",icon:"fa fa-ticket",tooltip:"On Progress",badge:this.state.total_handle},{color:"#58e077",action:"finished",icon:"fa fa-ticket",tooltip:"Closed",badge:this.state.total_answered},{color:"red",action:"rejected",icon:"fa fa-ticket",tooltip:"Rejected",badge:this.state.total_rejected},{color:"darkblue",action:"forwarded",icon:"fa fa-ticket",tooltip:"Forwarded",badge:this.state.total_forwarded},{color:"green",action:"completed",icon:"fa fa-ticket",tooltip:"Finished",badge:this.state.total_finished},{color:"#3bc3f5",action:"statistics",icon:"fa fa-ticket",tooltip:"Statistics"}]:this.props.role.includes("Implementator")||this.props.role.includes("Support Pelayanan")?l=[{color:"#f0c260",action:"my-handle",icon:"fa fa-ticket",tooltip:"On Progress",badge:this.state.total_handle},{color:"#58e077",action:"finished",icon:"fa fa-ticket",tooltip:"Closed",badge:this.state.total_answered},{color:"red",action:"rejected",icon:"fa fa-ticket",tooltip:"Rejected",badge:this.state.total_rejected},{color:"darkblue",action:"forwarded",icon:"fa fa-ticket",tooltip:"Forwarded",badge:this.state.total_forwarded},{color:"green",action:"completed",icon:"fa fa-ticket",tooltip:"Finished",badge:this.state.total_finished},{color:"#3bc3f5",action:"statistics",icon:"fa fa-ticket",tooltip:"Statistics"}]:this.props.role.includes("Supervisor CCS")?l=[{color:"lightblue",action:"available-ticket",icon:"fa fa-ticket",tooltip:"Tickets",badge:this.state.total_available},{color:"darkblue",action:"approval",icon:"fa fa-ticket",tooltip:"Approval",badge:this.state.total_approve},{color:"#37737a",action:"queued",icon:"fa fa-ticket",tooltip:"Queued",badge:this.state.total_queue},{color:"#3bc3f5",action:"statistics",icon:"fa fa-ticket",tooltip:"Statistics"}]:this.props.role.includes("Specialist")&&(l=[{color:"#f0c260",action:"my-handle",icon:"fa fa-ticket",tooltip:"On Progress",badge:this.state.total_handle},{color:"#58e077",action:"finished",icon:"fa fa-ticket",tooltip:"Closed",badge:this.state.total_answered},{color:"red",action:"rejected",icon:"fa fa-ticket",tooltip:"Rejected",badge:this.state.total_rejected},{color:"darkblue",action:"forwarded",icon:"fa fa-ticket",tooltip:"Canceled",badge:this.state.total_forwarded},{color:"green",action:"completed",icon:"fa fa-ticket",tooltip:"Finished",badge:this.state.total_finished},{color:"#3bc3f5",action:"statistics",icon:"fa fa-ticket",tooltip:"Statistics"}]),r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--4"},"Hi, ",Vt.username,"  ",r.a.createElement("p",null,this.props.role)),r.a.createElement("div",{className:"md-cell md-cell--8"})),r.a.createElement(y.i,{size:12},this.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),this.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning animated zoomIn"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),this.state.role_create?r.a.createElement(_.a,{to:"/ccs/ticket/form","data-tooltip":"Add New Ticket"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,l.map((function(e,t){return a===e.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,backgroundColor:"#c7d6eb",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement(_.a,{to:"/ccs/task?tab_name="+e.action},e.tooltip," \xa0 ",void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):"")):r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color}},r.a.createElement(_.a,{to:"/ccs/task?tab_name="+e.action},e.tooltip," \xa0 ",void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):""," "))})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},function(){switch(a){case"all-ticket":return r.a.createElement(Dt,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"all-handle":return r.a.createElement(It,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"all-completed":return r.a.createElement(At,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"my-ticket":return r.a.createElement(Ge,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"available-ticket":return r.a.createElement(Ge,{role:e.props.role,handle:function(t){return e.handle(t)},showDetail:function(t){return e.showDetail(t)}});case"my-handle":return r.a.createElement(ct,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"rejected":return r.a.createElement(tt,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"finished":return r.a.createElement(ot,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"completed":return r.a.createElement($e,{role:e.props.role,showDetail:function(t){return e.showDetail(t)},getTotalCompleted:function(t){return e.getTotalCompleted(t)}});case"approval":return r.a.createElement(nt,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"queued":return r.a.createElement(Et,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"forwarded":return r.a.createElement(mt,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});case"statistics":return r.a.createElement(Ht,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}});default:return e.props.role.includes("Superadmin")?r.a.createElement(Dt,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}}):e.props.role.includes("Help Desk")||e.props.role.includes("Specialist")||e.props.role.includes("Implementator")||e.props.role.includes("Support Pelayanan")?r.a.createElement(ct,{role:e.props.role,showDetail:function(t){return e.showDetail(t)}}):r.a.createElement(Ge,Object(C.a)({role:e.props.role,showDetail:function(t){return e.showDetail(t)},handle:function(t){return e.handle(t)}},"showDetail",(function(t){return e.showDetail(t)})))}}(),void 0)))}}]),t}(n.Component),Ut={routeProps:{path:"/ccs/task",exact:!0,component:Bt},name:"Task"},qt=x.Session.get(),Wt=qt.payload,Yt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.scrollHelp=function(e){var t=window.document.getElementById(e).getBoundingClientRect().top+window.scrollY;window.scroll({top:t,behavior:"smooth"})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){return t=e._id,!1}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-help/".concat(t,"/").concat(Wt.userId)).then((function(e){200===e.data.status&&n.setState({data:e.data.data}),e.data.data.map((function(e,a){return t=e._id,!1}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Help")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12,className:"box"},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4,offset:8},r.a.createElement(y.D,{placeholder:"Search..."}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:2,style:{borderRight:"solid 1px #000"}},r.a.createElement("table",{className:"table is-bordered"},r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("a",{onClick:function(){return e.scrollHelp(t._id)}},r.a.createElement("b",null,t.title)))}))))),r.a.createElement(y.i,{size:10},this.state.data.map((function(e,t){return r.a.createElement("div",{id:e._id},r.a.createElement("h5",null,e.title),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("hr",null))})))))))))}}]),t}(n.Component),Xt={routeProps:{path:"/ccs/help",exact:!0,component:Yt},name:"Help"},Gt=(n.Component,a(99)),Kt=x.Session.get(),Jt=Kt.payload,Qt=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user_id:Jt.userId,log:""!==t?t:(void 0).props.log,app_version:"1.0.0"},console.log(a),e.prev=2,e.next=5,k.a.post("/api/ccs-log",a).then((function(e){e.data.status}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),$t=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=12;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-teams").then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-teams?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,7],[12,17]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeOvertimeRespond=function(e){a.setState({overtime_respond:e})},a.onChangeOvertimeResolution=function(e){a.setState({overtime_resolution:e})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="?key=".concat(a.state.key,"&overtime_respond=").concat(a.state.overtime_respond,"&overtime_resolution=").concat(a.state.overtime_resolution),e.prev=2,e.next=5,k.a.get("/api/ccs-teams".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.resetFilter=function(){a.setState({overtime_resolution:"",overtime_respond:""})},a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="?key=".concat(a.state.key,"&overtime_respond=").concat(a.state.overtime_respond,"&overtime_resolution=").concat(a.state.overtime_resolution),e.prev=3,e.next=6,k.a.get("/api/ccs-teams".concat(n)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map((function(e,t){var a={};a.NO=t+1,a.Name=e.full_name,a.Level=e.role,a[" On Progress"]=e.total_onprogress,a["Total Finished"]=e.total_finished,a["Average rating"]=null!==e.average_rating&&e.average_rating>0?e.average_rating.toFixed(2):0,a["Total Respond Time"]=null!==e.total_respond_time&&e.total_respond_time>0?e.total_respond_time.toFixed(2):"",a["Total Resolution Time"]=null!==e.total_resolution_time&&e.total_resolution_time>0?e.total_resolution_time.toFixed(2):"",a["Overtime Respond (hours)"]=null!==e.total_overtime_respond&&e.total_overtime_respond>0?e.total_overtime_respond.toFixed(2):"",a["Overtime Resolution (days)"]=null!==e.total_overtime_resolution&&e.total_overtime_resolution>0?e.total_overtime_resolution.toFixed(2):"",a.SCORE=e.total_score,n[t]=a})),t=n,a.setState({dataToExport:n})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:console.log(t),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="Team Report per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(o,r+".xlsx");case 21:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={collapsed:!0,data:[],list_contain:"",loadChild:[],isLoading:!0,clients:[],status:[],showFilter:!1,asc:1,key:"",overtime_respond:"",overtime_resolution:""},a.socket=G()(K),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),a=t.tab_name,void 0!==t&&null!==t||(Object(Gt.a)("tab_name"),a="tickets"),this.setState({list_contain:a}),e.prev=4,e.next=7,k.a.get("/api/ccs-teams").then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,l=t.data,c=[],s=[];return c[0]={value:"BETWEEN 1 AND 21",label:"1 - 20"},c[1]={value:"BETWEEN 20 AND 51",label:"21 - 50"},c[2]={value:"BETWEEN 50 AND 81",label:"51 - 80"},c[3]={value:"BETWEEN 81 AND 101",label:"81 - 100"},c[4]={value:"> 100",label:"> 100"},s[0]={value:"BETWEEN 1 AND 21",label:"1 - 20"},s[1]={value:"BETWEEN 20 AND 51",label:"21 - 50"},s[2]={value:"BETWEEN 50 AND 81",label:"51 - 80"},s[3]={value:"BETWEEN 81 AND 101",label:"81 - 100"},s[4]={value:"> 100",label:"> 100"},r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-6"}),r.a.createElement("div",{className:"column is-2 ",style:{alignContent:"right"}},r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-info is-small ",onClick:function(){return e.setState({showFilter:!e.state.showFilter})}},this.state.showFilter?r.a.createElement("i",{className:"fa fa-caret-up"}):r.a.createElement("i",{className:"fa fa-caret-down"}),"\xa0 Filter"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Zt,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement("div",{className:"column is-4"},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))))),this.state.showFilter?r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2vw"}},r.a.createElement(y.y,{leftIcon:"view_list",label:"Overtime Respond",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:c,value:this.state.overtime_respond,onChange:this.onChangeOvertimeRespond}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Overtime Resolution",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:c,onChange:this.onChangeOvertimeResolution,value:this.state.overtime_resolution}),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary is-small",onClick:this.filter},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Apply"),"\xa0",r.a.createElement("button",{className:"button  is-small",onClick:this.resetFilter},r.a.createElement("i",{className:"fa fa-refresh"}),"\xa0Reset")))):"",r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("table",{className:" is-fullwidth is-striped is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"20%"}," Name \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{width:"10%"},"OnProgress \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("total_onprogress")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"8%"},"Finished \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("total_finished")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{width:"18%"},"Avrg. Rating \xa0",r.a.createElement("span",{onClick:function(){return e.setSorting("average_rating")}},r.a.createElement("i",{className:"fa fa-sort"})),"  "),r.a.createElement("th",{width:"9%"},"Total Respond Time (hrs) \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("score")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"9%"},"Total Resolution Time (hrs) \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("score")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"9%"},"Overtime Respond  (hrs) \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("score")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"9%"},"Overtime Resolution  (days) \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("score")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"8%"},"Score  \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("score")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,!a&&l.length>0?l.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",{style:{backgroundColor:t<4?"#c5ebb0":t>=l.length-4?"#f7dae5":""}},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e._id)},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:e.avatar_url})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.full_name),r.a.createElement("p",null,e.role)))))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/dashboard/onprogress?user_id=".concat(e._id)}," ",r.a.createElement("b",null,e.total_onprogress))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/dashboard/completed?user_id=".concat(e._id)},r.a.createElement("b",null,e.total_finished," "))),r.a.createElement("td",null,null!==e.average_rating&&e.average_rating>0?r.a.createElement(n.Fragment,null,r.a.createElement("b",{style:{textAlign:"center"}},e.average_rating.toFixed(2)," \xa0",r.a.createElement(he.a,{rating:e.average_rating,starRatedColor:"orange",starDimension:"1vw",numberOfStars:5,name:"rating"}))):""),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_respond_time&&e.total_respond_time>0?e.total_respond_time.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_resolution_time&&e.total_resolution_time>0?e.total_resolution_time.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_overtime_respond&&e.total_overtime_respond>0?e.total_overtime_respond.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_overtime_resolution&&e.total_overtime_resolution>0?e.total_overtime_resolution.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("h4",null,e.total_score))))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"Loading ... ")))))))))))}}]),t}(n.Component),Zt=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Teams Resume"))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("table",{className:"table  is-fullwidth is-striped is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"20%"}," Name "),r.a.createElement("th",{width:"10%"},"OnProgress "),r.a.createElement("th",{width:"8%"},"Finished "),r.a.createElement("th",{width:"18%"},"Avrg. Rating "),r.a.createElement("th",{width:"9%"},"Total Respond Time (hrs) "),r.a.createElement("th",{width:"9%"},"Total Resolution Time (hrs)  "),r.a.createElement("th",{width:"9%"},"Overtime Respond  (hrs)  "),r.a.createElement("th",{width:"9%"},"Overtime Resolution  (days)  "),r.a.createElement("th",{width:"8%"},"Score  "))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e._id)},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:e.avatar_url})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.full_name),r.a.createElement("p",null,e.role)))))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/dashboard/onprogress?user_id=".concat(e._id)}," ",r.a.createElement("b",null,e.total_onprogress))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/dashboard/completed?user_id=".concat(e._id)},r.a.createElement("b",null,e.total_finished," "))),r.a.createElement("td",null,null!==e.average_rating&&e.average_rating>0?r.a.createElement(n.Fragment,null,r.a.createElement("b",{style:{textAlign:"center"}},e.average_rating.toFixed(2)," \xa0",r.a.createElement(he.a,{rating:e.average_rating,starRatedColor:"orange",starDimension:"1vw",numberOfStars:5,name:"rating"}))):""),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_respond_time&&e.total_respond_time>0?e.total_respond_time.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_resolution_time&&e.total_resolution_time>0?e.total_resolution_time.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_overtime_respond&&e.total_overtime_respond>0?e.total_overtime_respond.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("b",null,null!==e.total_overtime_resolution&&e.total_overtime_resolution>0?e.total_overtime_resolution.toFixed(2):"")),r.a.createElement("td",null,r.a.createElement("h4",null,e.total_score))))})))))))}}]),t}(n.Component),ea=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=11;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-customers").then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-customers?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:a.setState({key:t});case 20:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])})));return function(t){return e.apply(this,arguments)}}(),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,k.a.get("/api/ccs-customers?key=".concat(a.state.key)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map((function(e,t){var a={};a.NO=t+1,a.Name=e.client_name,a["Total On Progress"]=e.total_onprogress,a["Total Finished"]=e.total_finished,a["Total Tickets"]=e.total_tickets,n[t]=a})),t=n,a.setState({dataToExport:n})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:console.log(t),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",n="Customer Report per ".concat(H()(new Date,"dd-mm-yyyy")),r=We.utils.json_to_sheet(t),l={Sheets:{data:r},SheetNames:["data"]},c=We.write(l,{bookType:"xlsx",type:"array"}),s=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(s,n+".xlsx");case 19:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.state={collapsed:!0,data:[],list_contain:"",loadChild:[],isLoading:!0,clients:[],status:[],asc:1,key:""},a.socket=G()(K),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),a=t.tab_name,void 0!==t&&null!==t||(Object(Gt.a)("tab_name"),a="tickets"),this.setState({list_contain:a}),e.prev=4,e.next=7,k.a.get("/api/ccs-customers").then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-6"}),r.a.createElement("div",{className:"column is-2 ",style:{alignContent:"right"}},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(ta,{ref:function(t){return e.componentRef=t},data:this.state.data}))),r.a.createElement("div",{className:"column is-4"},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("table",{className:" is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"27%"}," Name \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"}," Total On Progress \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("total_onprogress")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"}," Total Finished \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("total_finished")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"}," Total TIckets  \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("total_tickets")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,!this.state.isLoading&&this.state.data.length>0?this.state.data.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/customer?id=".concat(e._id)},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:e.avatar_url})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.client_name),r.a.createElement("p",null,e.role)))))),r.a.createElement("td",null,r.a.createElement("h4",null,r.a.createElement(_.a,{to:"/ccs/dashboard/onprogress?client_id=".concat(e.employee_id)},e.total_onprogress)," ")),r.a.createElement("td",null,r.a.createElement("h4",null,r.a.createElement(_.a,{to:"/ccs/dashboard/completed?client_id=".concat(e.employee_id)},e.total_finished)," ")),r.a.createElement("td",null,r.a.createElement("h4",null," ",r.a.createElement(_.a,{to:"/ccs/dashboard/all?client_id=".concat(e.employee_id)},e.total_tickets)))))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"Loading ... ")))))))))))}}]),t}(n.Component),ta=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Customer Resume"))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("table",{className:" is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"27%"}," Name "),r.a.createElement("th",{width:"15%"}," Total On Progress  "),r.a.createElement("th",{width:"15%"}," Total Finished "),r.a.createElement("th",{width:"15%"}," Total TIckets "))),r.a.createElement("tbody",null,this.props.data.length>0?this.props.data.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/customer?id=".concat(e._id)},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:e.avatar_url})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("b",null,e.client_name),r.a.createElement("p",null,e.role)))))),r.a.createElement("td",null,r.a.createElement("h4",null,r.a.createElement(_.a,{to:"/ccs/dashboard/onprogress?client_id=".concat(e.employee_id)},e.total_onprogress)," ")),r.a.createElement("td",null,r.a.createElement("h4",null,r.a.createElement(_.a,{to:"/ccs/dashboard/completed?client_id=".concat(e.employee_id)},e.total_finished)," ")),r.a.createElement("td",null,r.a.createElement("h4",null," ",r.a.createElement(_.a,{to:"/ccs/dashboard/all?client_id=".concat(e.employee_id)},e.total_tickets)))))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"Loading ... ")))))))))}}]),t}(n.Component),aa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),n="",n=void 0===t.tab_name||null===t.tab_name||""===t.tab_name?"tickets":t.tab_name,a.setState({list_contain:n}),e.prev=5,e.next=8,k.a.get("/api/ccs-ticket-parents-total?currentPage=0&displayPerPage=0").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/ccs-ticket-parents?currentPage=".concat(a.state.currentPage,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[n]=!0,!(a.total_child>0)){e.next=10;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-ticket-by-parent_id/".concat(a._id)).then((function(e){200===e.data.status&&(a.loadChild=!0,a.child_ticket=e.data.data)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({data:e.data.data,loadChild:t,isLoading:!1})}}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return t[a]=n,!1})),a.setState({priorities:t})}}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:return e.prev=29,e.next=32,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.client_code+" - "+e.client_name,value:e._id};return t[a]=n,!1})),a.setState({clients:t})}}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:return e.prev=37,e.next=40,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.category,value:e._id};return t[a]=n,!1})),a.setState({categories:t})}}));case 40:e.next=45;break;case 42:e.prev=42,e.t4=e.catch(37),console.log(e.t4);case 45:return e.prev=45,e.next=48,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("p",{style:{color:e.label_color}},r.a.createElement("b",null,e.status)),value:e._id};return t[a]=n,!1})),a.setState({status:t})}}));case 48:e.next=53;break;case 50:e.prev=50,e.t5=e.catch(45),console.log(e.t5);case 53:console.log(a.state.data);case 54:case"end":return e.stop()}}),e,null,[[5,10],[13,18],[21,26],[29,34],[37,42],[45,50]])}))),a.addLog=function(){Qt("Access Report Page")},a.setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.toggleLoadChild=function(e){var t=a.state.loadChild;t[e]=!t[e],a.setState({loadChild:t}),console.log(a.state.loadChild)},a.onChangeDateFrom=function(e){a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.onChangeStatusId=function(e){a.setState({status_id:e})},a.onChangeClientId=function(e){a.setState({client_id:e})},a.changeKey=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="",n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),""!==t){e.next=23;break}return e.prev=4,e.next=7,k.a.get("/api/ccs-ticket-parents-total".concat(n,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-ticket-parents".concat(n,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return t[a]=!0,!1})),a.setState({data:e.data.data,loadChild:t})}}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=40;break;case 23:return e.prev=23,e.next=26,k.a.get("/api/ccs-ticket-parents-total".concat(n,"&key=").concat(t,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(23),console.log(e.t2);case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-parents".concat(n,"&key=").concat(t,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return t[a]=!0,!1})),a.setState({data:e.data.data,loadChild:t})}}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}());case 40:a.setState({currentPage:1,displayPerPage:100});case 41:case"end":return e.stop()}}),e,null,[[4,9],[12,17],[23,28],[31,36]])})));return function(t){return e.apply(this,arguments)}}(),a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-ticket-parents-total".concat(t,"&key=").concat(a.state.key,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-ticket-parents".concat(t,"&key=").concat(a.state.key,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return t[a]=!0,!1})),a.setState({data:e.data.data,loadChild:t})}}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({currentPage:1,displayPerPage:100});case 20:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])}))),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.resetFilter=function(){a.setState({category_id:"",priority_id:"",status_id:"",client_id:"",date_to:"",date_from:""})},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),"",n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket-parents".concat(n,"&key=").concat(a.state.key,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[n]=!0,!(a.total_child>0)){e.next=10;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-ticket-by-parent_id/".concat(a._id)).then((function(e){200===e.data.status&&(a.loadChild=!0,a.child_ticket=e.data.data)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({data:e.data.data,loadChild:t,isLoading:!1})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],"",n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=3,e.next=6,k.a.get("/api/ccs-tickets".concat(n,"&key=").concat(a.state.key,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){if(200===e.data.status){var n=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).NO=a+1,r.ID=t._id,r.Title=t.title,r["Parent ID"]=t.parent_ticket_id,t.description.includes("<img ")||t.description.includes("<iframe ")?r.Description="[MEDIA]":r.Description=t.description.replace(/<\/?[^>]+(>|$)/g,""),r["BPR/Client"]=t.client_name,r.Priority=t.priority,r["Handled By"]=t.full_name,r.Status=t.status,r["Respond Time (h:m:s)"]=null!==t.max_respond_at&&""!==t.max_respond_at?H()(t.max_respond_at,"dd mmm yyyy, HH:MM"):"-",r["Resolution Time (h:m:s)"]=null!==t.max_resolution_at&&""!==t.max_resolution_at?H()(t.max_resolution_at,"dd mmm yyyy, HH:MM"):"-",n.push(r),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=n,a.setState({dataToExport:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:console.log(t),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="Tickets Report per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,r+".xlsx");case 21:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id,"&status_id=").concat(a.state.status_id,"&client_id=").concat(a.state.client_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets".concat(t,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={collapsed:!0,data:[],dataToExportPDF:[],dataToExport:[],list_contain:"",loadChild:[],isLoading:!0,clients:[],status:[],showFilter:!1,key:"",category_id:"",status_id:"",priority_id:"",client_id:"",date_to:"",date_from:"",asc:1,total_data:0,currentPage:1,displayPerPage:100},a.tableData=r.a.createRef(),a.addLog=a.addLog.bind(Object(pe.a)(a)),a.socket=G()(K),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("QUEUED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=F.a.parse(window.location.search),a="";a=void 0===t.tab_name||null===t.tab_name||""===t.tab_name?"tickets":t.tab_name;for(var l=[],c=this.state.currentPage,s=c+2,i=Math.ceil(this.state.total_data/this.state.displayPerPage),o=s>i?i:s,d=c-3;d<=o;d++)l[d-1]=d;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",{className:"text"},"Loading ... \xa0")),r.a.createElement("div",{className:"media-content"},r.a.createElement("img",{className:"icon",src:"/images/loading.gif",alt:""})))):r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Report")),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,[{color:"#348066",action:"tickets",icon:"fa fa-ticket",tooltip:"Ticket Report"},{color:"darkblue",action:"team",icon:"fa fa-users",tooltip:"Teams"},{color:"orange",action:"customer",icon:"fa fa-users",tooltip:"Customers"}].map((function(e,t){return a===e.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement(_.a,{to:"/ccs/report?tab_name="+e.action},r.a.createElement("i",{className:e.icon}),"\xa0",e.tooltip," ")):r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,padding:"10px 5px 0 0 "}},r.a.createElement(_.a,{to:"/ccs/report?tab_name="+e.action},r.a.createElement("i",{className:e.icon}),"\xa0 ",e.tooltip," "))})))),function(){switch(a){case"tickets":return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Ticket Report"))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-6"}),r.a.createElement("div",{className:"column is-2 ",style:{alignContent:"right"}},r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-info is-small ",onClick:function(){return e.setState({showFilter:!e.state.showFilter})}},e.state.showFilter?r.a.createElement("i",{className:"fa fa-caret-up"}):r.a.createElement("i",{className:"fa fa-caret-down"}),"\xa0 Filter"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:e.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:e.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(na,{ref:function(t){return e.componentRef=t},data:e.state.dataToExportPDF})))),r.a.createElement("div",{className:"column is-4"},r.a.createElement(y.D,{onChange:e.changeKey,placeholder:"Search ... "}))))),e.state.showFilter?r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:e.onChangeDateFrom,value:e.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:e.onChangeDateTo,value:e.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client ",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:e.state.clients,onChange:e.onChangeClientId,value:e.state.client_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Category",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:e.state.categories,onChange:e.onChangeCategoryId,value:e.state.category_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Priority",className:"md-cell md-cell--12-tablet md-cell--12",menuItems:e.state.priorities,onChange:e.onChangePriorityId,value:e.state.priority_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Status",className:"md-cell md-cell--12-tablet md-cell--12",menuItems:e.state.status,onChange:e.onChangeStatusId,value:e.state.status_id}),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary is-small",onClick:e.filter},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Apply"),"\xa0",r.a.createElement("button",{className:"button  is-small",onClick:e.resetFilter},r.a.createElement("i",{className:"fa fa-refresh"}),"\xa0Reset")))):"",r.a.createElement(y.r,{ref:e.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"3%"}),r.a.createElement("th",null," #ID\xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"23%"}," Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"9%"},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"}," BPR /Client Name \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_code")}}," ",r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"},"Handled By \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{width:"15%"},"Status  \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("status")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",null,"Respond Time (h:m:s) \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("respond_time")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",null,"Resolution Time (h:m:s)\xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("resolution_time")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,!e.state.isLoading&&e.state.data.length>0?e.state.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.total_child>0?r.a.createElement("a",{onClick:function(){return e.toggleLoadChild(a)}},r.a.createElement(y.q,null,e.state.loadChild[a]?"arrow_drop_down":"arrow_right"," ")):""),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t._id)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title)," ")," \xa0"),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):"-"),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.handled_by_user_id?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):"-"),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:t.label_color_status}},t.status))),r.a.createElement("td",null,r.a.createElement("p",null,null!==t.max_respond_at&&""!==t.max_respond_at?H()(t.max_respond_at,"dd mmm yyyy, HH:MM"):"-")),r.a.createElement("td",null,r.a.createElement("p",null,null!==t.max_resolution_at&&""!==t.max_resolution_at?H()(t.max_resolution_at,"dd mmm yyyy, HH:MM"):"-"))),e.state.loadChild[a]&&void 0!=t.child_ticket&&t.child_ticket.map((function(e,a){return r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{style:{paddingLeft:"2.8vw"}},r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t._id)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title)," ")," \xa0"),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):"-"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("td",null,""!==e.full_name_handler&&null!==e.full_name_handler?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name_handler)):"")),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status))),r.a.createElement("td",null,r.a.createElement("p",null,null!==t.max_respond_at&&""!==t.max_respond_at?H()(t.max_respond_at,"dd mmm yyyy, HH:MM"):"-")),r.a.createElement("td",null,r.a.createElement("p",null,null!==t.max_resolution_at&&""!==t.max_resolution_at?H()(t.max_resolution_at,"dd mmm yyyy, HH:MM"):"-")))})))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"Loading ... ")))))),l.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),l.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""))));case"team":return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Teams"))),r.a.createElement($t,null));case"customer":return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Customers"))),r.a.createElement(ea,null))}}())}}]),t}(n.Component),na=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={data:[],loadChild:[]},a.componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Ticket Reports"),r.a.createElement("table",{className:"table is-bordered is-fullwidth is-striped",style:{fontSize:"8pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"No"),r.a.createElement("th",{style:{width:"8%"}},"#ID"),r.a.createElement("th",{style:{width:"8%"}},"Parent Ticket #ID"),r.a.createElement("th",{style:{width:"22%"}}," Ticket Request"),r.a.createElement("th",{style:{width:"8%"}}," BPR /Client Name"),r.a.createElement("th",{style:{width:"8%"}},"Handled By "),r.a.createElement("th",{style:{width:"8%"}},"Status  "),r.a.createElement("th",{style:{width:"8%"}},"Respond Time (h:m:s)"),r.a.createElement("th",{style:{width:"9%"}},"Resolution Time (h:m:s)"))),r.a.createElement("tbody",null,this.props.data.length>0?this.props.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.parent_ticket_id),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):"-"," \xa0 ",r.a.createElement("b",null,e.title),r.a.createElement("p",null,"Content: "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.handled_by_user_id?e.full_name:"-"),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status))),r.a.createElement("td",null,r.a.createElement("p",null,null!==e.max_respond_at&&""!==e.max_respond_at?H()(e.max_respond_at,"dd mmm yyyy, HH:MM"):"-")),r.a.createElement("td",null,r.a.createElement("p",null,null!==e.max_resolution_at&&""!==e.max_resolution_at?H()(e.max_resolution_at,"dd mmm yyyy, HH:MM"):"-")))})):"-")))}}]),t}(n.Component),ra={routeProps:{path:"/ccs/report",exact:!0,component:aa},name:"Report"},la=(a(386),a(40)),ca=x.Session.get(),sa=ca.payload,ia=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getTotalRejected=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-rejected-total/".concat(sa.userId)).then((function(e){200===e.data.status&&a.setState({total_rejected:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalCompleted=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-completed-total/".concat(sa.userId)).then((function(e){200===e.data.status&&a.setState({total_finished:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalTickets=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalSplittedTickets=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets").then((function(e){200===e.data.status&&a.setState({total_tickets:e.data.data.length})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalHandle=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-handle-total/".concat(sa.userId)).then((function(e){200===e.data.status&&a.setState({total_handle:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalFinish=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-finished-total/".concat(sa.userId)).then((function(e){200===e.data.status&&a.setState({total_answered:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalAvailable=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&a.setState({total_available:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalApprove=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-approval-total").then((function(e){200===e.data.status&&a.setState({total_approve:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTotalForward=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-forward-total/".concat(sa.userId)).then((function(e){200===e.data.status&&a.setState({total_forwarded:e.data.data[0].total})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.getTicketRunningDate=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=new Date,r=H()(new Date(n.getFullYear(),n.getMonth()+1,0),"d"),!a.props.role.includes("Customer")){e.next=35;break}return l="",e.next=7,k.a.get("/api/user/".concat(sa.userId)).then((function(e){try{200===e.data.status&&e.data.data.map((function(e,t){l=e.client_id}))}catch(Vc){console.log(Vc)}}));case 7:a.setState({client_id:l}),c=1;case 9:if(!(c<=r)){e.next=32;break}return(s={}).date=c,e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(l,"&date=").concat(H()(new Date,"yyyy-mm")+"-"+c)).then((function(e){200===e.data.status&&(s.Completed=e.data.data.length)}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.log(e.t0);case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-all-onprogress?client_id=".concat(l,"&date=").concat(H()(new Date,"yyyy-mm")+"-"+c)).then((function(e){200===e.data.status&&(s.Onprogress=e.data.data.length)}));case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(20),console.log(e.t1);case 28:t[c-1]=s;case 29:c++,e.next=9;break;case 32:a.setState({data_ticket_running:t}),e.next=60;break;case 35:c=1;case 36:if(!(c<=r)){e.next=59;break}return(s={}).date=c,e.prev=39,e.next=42,k.a.get("/api/ccs-tickets-all-completed?date=".concat(H()(new Date,"yyyy-mm")+"-"+c)).then((function(e){200===e.data.status&&(s.Completed=e.data.data.length)}));case 42:e.next=47;break;case 44:e.prev=44,e.t2=e.catch(39),console.log(e.t2);case 47:return e.prev=47,e.next=50,k.a.get("/api/ccs-tickets-all-onprogress?date=".concat(H()(new Date,"yyyy-mm")+"-"+c)).then((function(e){200===e.data.status&&(s.Onprogress=e.data.data.length)}));case 50:e.next=55;break;case 52:e.prev=52,e.t3=e.catch(47),console.log(e.t3);case 55:t[c-1]=s;case 56:c++,e.next=36;break;case 59:a.setState({data_ticket_running:t});case 60:case"end":return e.stop()}}),e,null,[[12,17],[20,25],[39,44],[47,52]])}))),a.state={_id:"",role:"",data:[],team_activities:[],total_teams:0,team_ranks:[],total_per_client:[],contain:"",total_split:0,total_tickets:0,total_answered:0,total_forwarded:0,total_available:0,total_approve:0,total_finished:0,total_handle:0,total_rejected:0,total_unrated:0},a.socket=G()(K),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.socket.on("UPDATE_ANSWER",(function(e){a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("QUEUED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(sa.userId)).then((function(e){200===e.data.status&&r.setState({role:e.data.data[0].role})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:if(!this.state.role.includes("Superadmin")&&!this.state.role.includes("Direktur")){e.next=78;break}return e.prev=19,e.next=22,k.a.get("/api/ccs-teams").then((function(e){200===e.data.status&&r.setState({team_ranks:e.data.data})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:return e.prev=27,e.next=30,k.a.get("/api/ccs-customers").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return a<15&&t.push(e),!1})),r.setState({total_per_client:t})}}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:return e.prev=35,e.next=38,k.a.get("/api/ccs-teams").then((function(e){200===e.data.status&&r.setState({total_teams:e.data.data.length})}));case 38:e.next=43;break;case 40:e.prev=40,e.t4=e.catch(35),console.log(e.t4);case 43:return e.prev=43,e.next=46,k.a.get("/api/ccs-tickets-all-completed-total").then((function(e){200===e.data.status&&r.setState({total_completed:e.data.data[0].total})}));case 46:e.next=51;break;case 48:e.prev=48,e.t5=e.catch(43),console.log(e.t5);case 51:return e.prev=51,e.next=54,k.a.get("/api/ccs-tickets-all-onprogress-total").then((function(e){200===e.data.status&&r.setState({total_onprogress:e.data.data[0].total})}));case 54:e.next=59;break;case 56:e.prev=56,e.t6=e.catch(51),console.log(e.t6);case 59:return e.prev=59,e.next=62,k.a.get("/api/ccs-tickets-total").then((function(e){200===e.data.status&&r.setState({total_tickets:e.data.data[0].total})}));case 62:e.next=67;break;case 64:e.prev=64,e.t7=e.catch(59),console.log(e.t7);case 67:return e.prev=67,e.next=70,k.a.get("/api/logs-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return a<15&&t.push(e),!1})),r.setState({team_activities:t})}}));case 70:e.next=75;break;case 72:e.prev=72,e.t8=e.catch(67),console.log(e.t8);case 75:this.getTicketRunningDate(),e.next=145;break;case 78:if(!(this.state.role.includes("Help Desk")||this.state.role.includes("Implementator")||this.state.role.includes("Specialist"))){e.next=86;break}this.getTotalRejected(),this.getTotalHandle(),this.getTotalForward(),this.getTotalFinish(),this.getTotalCompleted(),e.next=145;break;case 86:if(!this.state.role.includes("Supervisor CCS")){e.next=93;break}this.getTotalAvailable(),this.getTotalApprove(),this.getTotalTickets(),this.getTotalSplittedTickets(),e.next=145;break;case 93:if(!this.state.role.includes("Customer")){e.next=145;break}return n="",e.prev=95,e.next=98,k.a.get("/api/user/".concat(sa.userId)).then((function(e){200===e.data.status&&(n=e.data.data[0].client_id,r.setState({client_id:e.data.data[0].client_id}))}));case 98:e.next=103;break;case 100:e.prev=100,e.t9=e.catch(95),console.log(e.t9);case 103:return null===n&&(n=""),e.prev=104,e.next=107,k.a.get("/api/logs-by-module-user-id/".concat(t,"/").concat(sa.userId)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){return a<15&&t.push(e),!1})),r.setState({team_activities:t})}}));case 107:e.next=112;break;case 109:e.prev=109,e.t10=e.catch(104),console.log(e.t10);case 112:return e.prev=112,e.next=115,k.a.get("/api/ccs-tickets-all-completed-total?client_id=".concat(n)).then((function(e){200===e.data.status&&r.setState({total_completed:e.data.data[0].total})}));case 115:e.next=120;break;case 117:e.prev=117,e.t11=e.catch(112),console.log(e.t11);case 120:return e.prev=120,e.next=123,k.a.get("/api/ccs-tickets-all-completed-unrated-total?client_id=".concat(n)).then((function(e){200===e.data.status&&r.setState({total_unrated:e.data.data[0].total})}));case 123:e.next=128;break;case 125:e.prev=125,e.t12=e.catch(120),console.log(e.t12);case 128:return e.prev=128,e.next=131,k.a.get("/api/ccs-tickets-all-onprogress-total?client_id=".concat(n)).then((function(e){200===e.data.status&&r.setState({total_onprogress:e.data.data[0].total})}));case 131:e.next=136;break;case 133:e.prev=133,e.t13=e.catch(128),console.log(e.t13);case 136:return e.prev=136,e.next=139,k.a.get("/api/ccs-tickets-total?client_id=".concat(n)).then((function(e){200===e.data.status&&r.setState({total_tickets:e.data.data[0].total})}));case 139:e.next=144;break;case 141:e.prev=141,e.t14=e.catch(136),console.log(e.t14);case 144:this.getTicketRunningDate();case 145:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[19,24],[27,32],[35,40],[43,48],[51,56],[59,64],[67,72],[95,100],[104,109],[112,117],[120,125],[128,133],[136,141]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.state.total_onprogress,this.state.total_completed;return r.a.createElement("div",null,r.a.createElement("section",{className:"info-tiles"},e.state.role.includes("Customer")?r.a.createElement("div",{className:"tile is-ancestor has-text-centered"},r.a.createElement(n.Fragment,null,r.a.createElement(_.a,{to:"/ccs/task?tab_name=my-ticket",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"lightblue"}},r.a.createElement("p",{className:"title"}," ",e.state.total_tickets),r.a.createElement("p",{className:"subtitle"},"Total Tickets"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=my-handle",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:" orange"}},r.a.createElement("p",{className:"title"}," ",e.state.total_onprogress),r.a.createElement("p",{className:"subtitle"},"On Progress Tickets"))),r.a.createElement(_.a,{to:"/ccs/task?tab_name=completed",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#aaf2d8 "}},r.a.createElement("p",{className:"title"}," ",e.state.total_completed),r.a.createElement("p",{className:"subtitle"},"Finished Tickets (",e.state.total_unrated," Unrated)"))))):e.state.role.includes("Superadmin")||e.state.role.includes("Direktur")?r.a.createElement("div",{className:"tile is-ancestor has-text-centered "},r.a.createElement(n.Fragment,null,r.a.createElement(_.a,{to:"/ccs/dashboard/all",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"lightblue"}},r.a.createElement("p",{className:"title"}," ",e.state.total_tickets),r.a.createElement("p",{className:"subtitle"},"Total Tickets"))),r.a.createElement(_.a,{to:"/ccs/dashboard/onprogress",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:" orange"}},r.a.createElement("p",{className:"title"}," ",e.state.total_onprogress),r.a.createElement("p",{className:"subtitle"},"On Progress Tickets"))),r.a.createElement(_.a,{to:"/ccs/dashboard/completed",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"#aaf2d8 "}},r.a.createElement("p",{className:"title"}," ",e.state.total_completed),r.a.createElement("p",{className:"subtitle"},"Finished Tickets"))),r.a.createElement(_.a,{to:"/ccs/teams",className:"tile is-parent"},r.a.createElement("article",{className:"tile is-child box",style:{backgroundColor:"pink"}},r.a.createElement("p",{className:"title"}," ",e.state.total_teams),r.a.createElement("p",{className:"subtitle"},"Teams"))))):void 0),e.state.role.includes("Customer")?r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"My Activities"),"\xa0",r.a.createElement(_.a,{to:"/ccs/log"},"See All"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.team_activities.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.team_activities.map((function(e,t){return r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),primaryText:r.a.createElement("b",null,null!==e.full_name?e.full_name:e.client_name),secondaryText:e.log+"\n"+H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss"),threeLines:!0})}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ...")))))))),r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Graph Ticket")," \xa0 ",r.a.createElement("a",null,"\xa0"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},r.a.createElement(la.b,{width:1e3,height:380,data:e.state.data_ticket_running,margin:{top:5,right:10,left:10,bottom:5}},r.a.createElement(la.c,{strokeDasharray:"3 3"}),r.a.createElement(la.f,{dataKey:"date"}),r.a.createElement(la.g,null),r.a.createElement(la.e,null),r.a.createElement(la.d,null),r.a.createElement(la.a,{dataKey:"Onprogress",fill:"#8884d8"}),r.a.createElement(la.a,{dataKey:"Completed",fill:"#82ca9d"})))))))))):e.state.role.includes("Superadmin")||e.state.role.includes("Direktur")?r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Users Activities"),"\xa0",r.a.createElement(_.a,{to:"/ccs/log"},"See All"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.team_activities.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.team_activities.map((function(e,t){return r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),primaryText:r.a.createElement("b",null,null!==e.full_name?e.full_name:e.client_name),secondaryText:e.log+"\n"+H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss"),threeLines:!0})}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ...")))))))),r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Team Ranks"),"\xa0",r.a.createElement(_.a,{to:"/ccs/teams"},"See All"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},e.state.team_ranks.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.team_ranks.map((function(e,t){return r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e._id)},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),rightIcon:r.a.createElement(n.Fragment,null,r.a.createElement("b",null,e.total_score>0?e.total_score.toFixed(2):e.total_score),"\xa0"),primaryText:r.a.createElement("b",null,e.full_name),secondaryText:null!==e.average_rating&&e.average_rating>0?r.a.createElement(n.Fragment,null,r.a.createElement("b",{style:{textAlign:"center"}},e.average_rating.toFixed(2)," \xa0",r.a.createElement(he.a,{rating:e.average_rating,starRatedColor:"orange",starDimension:"1.5vw",numberOfStars:5,name:"rating"}))):"",threeLines:!0}))}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ..."))))))))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"Graph Ticket")," \xa0 ",r.a.createElement("a",null,"\xa0"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"60vh",overflowY:"scroll"}},r.a.createElement(la.b,{width:1e3,height:380,data:e.state.data_ticket_running,margin:{top:5,right:10,left:10,bottom:5}},r.a.createElement(la.c,{strokeDasharray:"3 3"}),r.a.createElement(la.f,{dataKey:"date"}),r.a.createElement(la.g,null),r.a.createElement(la.e,null),r.a.createElement(la.d,null),r.a.createElement(la.a,{dataKey:"Onprogress",fill:"#8884d8"}),r.a.createElement(la.a,{dataKey:"Completed",fill:"#82ca9d"})))))))),r.a.createElement(y.i,{size:6},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("h4",null,"TIcket per Client"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{height:"64vh",overflowY:"scroll"}},e.state.total_per_client.length>0?r.a.createElement(y.t,{style:{listStyle:"none"}},e.state.total_per_client.map((function(e,t){return r.a.createElement(_.a,{to:"/ccs/customer?id="+e._id},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),rightIcon:r.a.createElement(n.Fragment,null,r.a.createElement("b",null,e.total_tickets),"\xa0 Ticket(s)"),primaryText:r.a.createElement("b",null,e.client_name),threeLines:!0}))}))):r.a.createElement("div",{className:"notification",style:{marginRight:"5vw"}},r.a.createElement("p",null,"Data is empty ...")))))))))):void 0)}}]),t}(n.Component),oa=x.Session.get(),da=oa.payload,ua=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:"",role:"",data:[],contain:"",role_id:"",announcements:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(da.userId)).then((function(e){200===e.data.status&&r.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return n=window.location.pathname,e.prev=20,e.next=23,k.a.get("/api/role-control-by-link-role-id/".concat(n,"/").concat(this.state.role_id)).then((function(e){200===e.data.status&&r.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/announcements-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),r.setState({announcements:t})}}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[20,25],[28,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,null===da.userId?r.a.createElement(E.a,{to:"/"}):e.state.role.includes("Help Desk")||e.state.role.includes("Implementator")||e.state.role.includes("Support Pelayanan")||e.state.role.includes("Specialist")||e.state.role.includes("Supervisor CCS")?r.a.createElement(E.a,{to:"/ccs/task"}):r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Hi, ",da.username,"  ",r.a.createElement("p",null,e.state.role)),r.a.createElement(y.i,{size:12},e.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),e.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning animated zoomIn"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),r.a.createElement(y.i,{size:12},r.a.createElement(ia,{role:e.state.role}))))}}]),t}(n.Component),ma={routeProps:{path:"/ccs",exact:!0,component:ua},name:"CCS"},pa={routeProps:{path:"/ccs/setting/preferences",exact:!0,component:q},name:"Preferences"},fa={routeProps:{path:"/ccs/setting/profile",exact:!0,component:V},name:"Profile"},ha={routeProps:{path:"/ccs/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"},ga={routeProps:{path:"/ccs/ticket/detail",exact:!1,component:_e},name:"Detail"},ba=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.v,{icon:!0,className:this.props.className,menuItems:this.props.menuItems},"more_vert")}}]),t}(n.Component),Ea=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeDetail=function(){a.props.closeDetail()},a.setAction=function(e){a.setState({formAction:e})},a.state={_id:"",parent_ticket_id:"",data:[],data_parent:[],role:"",attachment:[],answers:[],attachment_parent:[],formAction:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),this.setState({_id:t.ticket_id}),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket/".concat(t.ticket_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({attachment:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(!this.props.role.includes("Customer")){e.next=31;break}return console.log("customer"),e.prev=21,e.next=24,k.a.get("/api/ccs-ticket-reply-by-ticket-customer-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:e.next=39;break;case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:if(""===this.state.parent_ticket_id){e.next=50;break}return e.prev=40,e.next=43,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({data_parent:e.data.data})}));case 43:return e.next=45,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({attachment_parent:e.data.data})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(40),console.log(e.t4);case 50:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[21,26],[31,36],[40,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.role.includes("Supervisor CCS")?t=[{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}},{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&(t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}]),r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement(_.a,{to:"/ccs/task/"},r.a.createElement(y.d,{icon:!0},"arrow_back")),actions:r.a.createElement(ba,{menuItems:t,id:"toolbar-transparent-kebab-menu"})}),r.a.createElement("section",{className:"box container md-cell md-cell--12"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",{className:"subtitle is-3"},r.a.createElement("strong",null,t.title)),r.a.createElement(y.s,{label:t.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(t.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("br",null),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Origin Ticket : "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",{className:"subtitle is-4"},r.a.createElement("strong",null,e.title)),r.a.createElement(y.s,{label:e.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(e.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("article",null,r.a.createElement("div",{className:"message"})))})),r.a.createElement("section",{className:"container md-cell md-cell--12"},function(){if(e.state.attachment_parent.length>0)return r.a.createElement("h4",null,"Attachments :")}(),e.state.attachment_parent.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,key:t,src:e.file_url,style:{width:"20%",height:"25vh"}})})))))):"")})),r.a.createElement("br",null),function(){if(e.state.attachment.length>0)return r.a.createElement("h4",null,"Attachments :")}(),this.state.attachment.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,src:e.file_url,style:{width:"20%",height:"25vh"}})}))))),r.a.createElement("br",null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.answers.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Answers:"),this.state.answers.map((function(e,t){return r.a.createElement("div",null,"\xa0 ",r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t},r.a.createElement("div",null,r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"pink"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"lightgreen"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))))}))):"",r.a.createElement("br",null),r.a.createElement("hr",null),this.props.role.includes("Supervisor CCS")?r.a.createElement("div",null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")," \xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button ",onClick:function(){return alert("Send as Incoming Letter")}},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter")):"",this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"",this.props.role.includes("Customer")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"rating"})}},r.a.createElement(y.q,null,"star"),"\xa0Make Rating")):"",this.props.role.includes("Specialist")?r.a.createElement("div",{style:{marginBottom:"15vh",alignItems:"center"}},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",anchor:{x:y.v.HorizontalAnchors.INNER_LEFT,y:y.v.VerticalAnchors.TOP_LEFT},position:y.v.Positions.TOP_LEFT,flat:!0,primary:!0,menuItems:[{primaryText:"to Support 1"},{primaryText:"to Support 2"}]},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to"))):"",r.a.createElement("hr",null),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id});default:return""}}())))}}]),t}(n.Component),_a={routeProps:{path:"/ccs/ticket/detail-approval",exact:!1,component:Ea},name:"DetailApproval"},ya=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.v,{icon:!0,className:this.props.className,menuItems:this.props.menuItems},"more_vert")}}]),t}(n.Component),va=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeDetail=function(){a.props.closeDetail()},a.setAction=function(e){a.setState({formAction:e})},a.state={_id:"",parent_ticket_id:"",data:[],data_parent:[],role:"",attachment:[],answers:[],attachment_parent:[],formAction:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),this.setState({_id:t.ticket_id}),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket/".concat(t.ticket_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({attachment:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(!this.props.role.includes("Customer")){e.next=31;break}return console.log("customer"),e.prev=21,e.next=24,k.a.get("/api/ccs-ticket-reply-by-ticket-customer-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:e.next=39;break;case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:if(""===this.state.parent_ticket_id){e.next=50;break}return e.prev=40,e.next=43,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({data_parent:e.data.data})}));case 43:return e.next=45,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({attachment_parent:e.data.data})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(40),console.log(e.t4);case 50:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[21,26],[31,36],[40,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.role.includes("Supervisor CCS")?t=[{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}},{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&(t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}]),r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement(_.a,{to:"/ccs/task/"},r.a.createElement(y.d,{icon:!0},"arrow_back")),actions:r.a.createElement(ya,{menuItems:t,id:"toolbar-transparent-kebab-menu"})}),r.a.createElement("section",{className:"box container md-cell md-cell--12"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",{className:"subtitle is-3"},r.a.createElement("strong",null,t.title)),r.a.createElement(y.s,{label:t.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(t.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("br",null),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Origin Ticket : "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",{className:"subtitle is-4"},r.a.createElement("strong",null,e.title)),r.a.createElement(y.s,{label:e.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(e.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("article",null,r.a.createElement("div",{className:"message"})))})),r.a.createElement("section",{className:"container md-cell md-cell--12"},function(){if(e.state.attachment_parent.length>0)return r.a.createElement("h4",null,"Attachments :")}(),e.state.attachment_parent.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,key:t,src:e.file_url,style:{width:"20%",height:"25vh"}})})))))):"")})),r.a.createElement("br",null),function(){if(e.state.attachment.length>0)return r.a.createElement("h4",null,"Attachments :")}(),this.state.attachment.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,src:e.file_url,style:{width:"20%",height:"25vh"}})}))))),r.a.createElement("br",null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.answers.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Answers:"),this.state.answers.map((function(e,t){return r.a.createElement("div",null,"\xa0 ",r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t},r.a.createElement("div",null,r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"pink"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"lightgreen"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))))}))):"",r.a.createElement("br",null),r.a.createElement("hr",null),this.props.role.includes("Supervisor CCS")?r.a.createElement("div",null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")," \xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button ",onClick:function(){return alert("Send as Incoming Letter")}},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter")):"",this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"",this.props.role.includes("Customer")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"rating"})}},r.a.createElement(y.q,null,"star"),"\xa0Make Rating")):"",this.props.role.includes("Specialist")?r.a.createElement("div",{style:{marginBottom:"15vh",alignItems:"center"}},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",anchor:{x:y.v.HorizontalAnchors.INNER_LEFT,y:y.v.VerticalAnchors.TOP_LEFT},position:y.v.Positions.TOP_LEFT,flat:!0,primary:!0,menuItems:[{primaryText:"to Support 1"},{primaryText:"to Support 2"}]},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to"))):"",r.a.createElement("hr",null),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id});default:return""}}())))}}]),t}(n.Component),ka={routeProps:{path:"/ccs/ticket/detail-completed",exact:!1,component:va},name:"DetailCompleted"},xa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.v,{icon:!0,className:this.props.className,menuItems:this.props.menuItems},"more_vert")}}]),t}(n.Component),wa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeDetail=function(){a.props.closeDetail()},a.setAction=function(e){a.setState({formAction:e})},a.state={_id:"",parent_ticket_id:"",data:[],data_parent:[],role:"",attachment:[],answers:[],attachment_parent:[],formAction:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),this.setState({_id:t.ticket_id}),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket/".concat(t.ticket_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({attachment:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(!this.props.role.includes("Customer")){e.next=31;break}return console.log("customer"),e.prev=21,e.next=24,k.a.get("/api/ccs-ticket-reply-by-ticket-customer-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:e.next=39;break;case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:if(""===this.state.parent_ticket_id){e.next=50;break}return e.prev=40,e.next=43,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({data_parent:e.data.data})}));case 43:return e.next=45,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({attachment_parent:e.data.data})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(40),console.log(e.t4);case 50:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[21,26],[31,36],[40,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.role.includes("Supervisor CCS")?t=[{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}},{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&(t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}]),r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement(_.a,{to:"/ccs/task/"},r.a.createElement(y.d,{icon:!0},"arrow_back")),actions:r.a.createElement(xa,{menuItems:t,id:"toolbar-transparent-kebab-menu"})}),r.a.createElement("section",{className:"box container md-cell md-cell--12"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",{className:"subtitle is-3"},r.a.createElement("strong",null,t.title)),r.a.createElement(y.s,{label:t.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(t.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("br",null),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Origin Ticket : "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",{className:"subtitle is-4"},r.a.createElement("strong",null,e.title)),r.a.createElement(y.s,{label:e.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(e.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("article",null,r.a.createElement("div",{className:"message"})))})),r.a.createElement("section",{className:"container md-cell md-cell--12"},function(){if(e.state.attachment_parent.length>0)return r.a.createElement("h4",null,"Attachments :")}(),e.state.attachment_parent.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,key:t,src:e.file_url,style:{width:"20%",height:"25vh"}})})))))):"")})),r.a.createElement("br",null),function(){if(e.state.attachment.length>0)return r.a.createElement("h4",null,"Attachments :")}(),this.state.attachment.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,src:e.file_url,style:{width:"20%",height:"25vh"}})}))))),r.a.createElement("br",null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.answers.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Answers:"),this.state.answers.map((function(e,t){return r.a.createElement("div",null,"\xa0 ",r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t},r.a.createElement("div",null,r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"pink"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"lightgreen"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))))}))):"",r.a.createElement("br",null),r.a.createElement("hr",null),this.props.role.includes("Supervisor CCS")?r.a.createElement("div",null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")," \xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button ",onClick:function(){return alert("Send as Incoming Letter")}},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter")):"",this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"",this.props.role.includes("Customer")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"rating"})}},r.a.createElement(y.q,null,"star"),"\xa0Make Rating")):"",this.props.role.includes("Specialist")?r.a.createElement("div",{style:{marginBottom:"15vh",alignItems:"center"}},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",anchor:{x:y.v.HorizontalAnchors.INNER_LEFT,y:y.v.VerticalAnchors.TOP_LEFT},position:y.v.Positions.TOP_LEFT,flat:!0,primary:!0,menuItems:[{primaryText:"to Support 1"},{primaryText:"to Support 2"}]},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to"))):"",r.a.createElement("hr",null),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id});default:return""}}())))}}]),t}(n.Component),Sa={routeProps:{path:"/ccs/ticket/detail-finished",exact:!1,component:wa},name:"DetailFinished"},Pa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.v,{icon:!0,className:this.props.className,menuItems:this.props.menuItems},"more_vert")}}]),t}(n.Component),Ca=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeDetail=function(){a.props.closeDetail()},a.setAction=function(e){a.setState({formAction:e})},a.state={_id:"",parent_ticket_id:"",data:[],data_parent:[],role:"",attachment:[],answers:[],attachment_parent:[],formAction:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),this.setState({_id:t.ticket_id}),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket/".concat(t.ticket_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({attachment:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(!this.props.role.includes("Customer")){e.next=31;break}return console.log("customer"),e.prev=21,e.next=24,k.a.get("/api/ccs-ticket-reply-by-ticket-customer-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:e.next=39;break;case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:if(""===this.state.parent_ticket_id){e.next=50;break}return e.prev=40,e.next=43,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({data_parent:e.data.data})}));case 43:return e.next=45,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({attachment_parent:e.data.data})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(40),console.log(e.t4);case 50:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[21,26],[31,36],[40,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.role.includes("Supervisor CCS")?t=[{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}},{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&(t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}]),r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement(_.a,{to:"/ccs/task/"},r.a.createElement(y.d,{icon:!0},"arrow_back")),actions:r.a.createElement(Pa,{menuItems:t,id:"toolbar-transparent-kebab-menu"})}),r.a.createElement("section",{className:"box container md-cell md-cell--12"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",{className:"subtitle is-3"},r.a.createElement("strong",null,t.title)),r.a.createElement(y.s,{label:t.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(t.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("br",null),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Origin Ticket : "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",{className:"subtitle is-4"},r.a.createElement("strong",null,e.title)),r.a.createElement(y.s,{label:e.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(e.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("article",null,r.a.createElement("div",{className:"message"})))})),r.a.createElement("section",{className:"container md-cell md-cell--12"},function(){if(e.state.attachment_parent.length>0)return r.a.createElement("h4",null,"Attachments :")}(),e.state.attachment_parent.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,key:t,src:e.file_url,style:{width:"20%",height:"25vh"}})})))))):"")})),r.a.createElement("br",null),function(){if(e.state.attachment.length>0)return r.a.createElement("h4",null,"Attachments :")}(),this.state.attachment.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,src:e.file_url,style:{width:"20%",height:"25vh"}})}))))),r.a.createElement("br",null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.answers.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Answers:"),this.state.answers.map((function(e,t){return r.a.createElement("div",null,"\xa0 ",r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t},r.a.createElement("div",null,r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"pink"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"lightgreen"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))))}))):"",r.a.createElement("br",null),r.a.createElement("hr",null),this.props.role.includes("Supervisor CCS")?r.a.createElement("div",null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")," \xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button ",onClick:function(){return alert("Send as Incoming Letter")}},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter")):"",this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"",this.props.role.includes("Customer")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"rating"})}},r.a.createElement(y.q,null,"star"),"\xa0Make Rating")):"",this.props.role.includes("Specialist")?r.a.createElement("div",{style:{marginBottom:"15vh",alignItems:"center"}},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",anchor:{x:y.v.HorizontalAnchors.INNER_LEFT,y:y.v.VerticalAnchors.TOP_LEFT},position:y.v.Positions.TOP_LEFT,flat:!0,primary:!0,menuItems:[{primaryText:"to Support 1"},{primaryText:"to Support 2"}]},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to"))):"",r.a.createElement("hr",null),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id});default:return""}}())))}}]),t}(n.Component),Na={routeProps:{path:"/ccs/ticket/detail-handle",exact:!1,component:Ca},name:"DetailHandle"},Oa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.v,{icon:!0,className:this.props.className,menuItems:this.props.menuItems},"more_vert")}}]),t}(n.Component),Da=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).closeDetail=function(){a.props.closeDetail()},a.setAction=function(e){a.setState({formAction:e})},a.state={_id:"",parent_ticket_id:"",data:[],data_parent:[],role:"",attachment:[],answers:[],attachment_parent:[],formAction:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t),this.setState({_id:t.ticket_id}),e.prev=3,e.next=6,k.a.get("/api/ccs-ticket/".concat(t.ticket_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,parent_ticket_id:e.data.data[0].parent_ticket_id})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({attachment:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:if(!this.props.role.includes("Customer")){e.next=31;break}return console.log("customer"),e.prev=21,e.next=24,k.a.get("/api/ccs-ticket-reply-by-ticket-customer-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:e.next=39;break;case 31:return e.prev=31,e.next=34,k.a.get("/api/ccs-ticket-reply-by-ticket-id/".concat(this.state._id)).then((function(e){200===e.data.status&&a.setState({answers:e.data.data})}));case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(31),console.log(e.t3);case 39:if(""===this.state.parent_ticket_id){e.next=50;break}return e.prev=40,e.next=43,k.a.get("/api/ccs-ticket/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({data_parent:e.data.data})}));case 43:return e.next=45,k.a.get("/api/ccs-ticket-file-by-ticket-id/".concat(this.state.parent_ticket_id)).then((function(e){200===e.data.status&&a.setState({attachment_parent:e.data.data})}));case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(40),console.log(e.t4);case 50:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[21,26],[31,36],[40,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.role.includes("Supervisor CCS")?t=[{primaryText:"Split",onClick:function(){e.setAction("split")}},{primaryText:"Distribute",onClick:function(){e.setAction("forward")}},{primaryText:"Send as Incoming Letter",onClick:function(){alert("Send as Incoming Letter")}}]:this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Forward",onClick:function(){e.setAction("forward")}}]:this.props.role.includes("Specialist")&&(t=[{primaryText:"Reply",onClick:function(){e.setAction("reply")}},{primaryText:"Send Back to",onClick:function(){e.setAction("forward")}}]),r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state._id),nav:r.a.createElement(_.a,{to:"/ccs/task/"},r.a.createElement(y.d,{icon:!0},"arrow_back")),actions:r.a.createElement(Oa,{menuItems:t,id:"toolbar-transparent-kebab-menu"})}),r.a.createElement("section",{className:"box container md-cell md-cell--12"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",{className:"subtitle is-3"},r.a.createElement("strong",null,t.title)),r.a.createElement(y.s,{label:t.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(t.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("br",null),e.state.data_parent.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Origin Ticket : "),r.a.createElement("article",{className:"message is-light ticket-detail is-small"},r.a.createElement("div",{className:"message-body"},e.state.data_parent.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",{className:"subtitle is-4"},r.a.createElement("strong",null,e.title)),r.a.createElement(y.s,{label:e.client_name,iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:"/avatar/user.png"})),r.a.createElement("p",null,r.a.createElement("i",null,H()(e.created_at,"dd mmm hh:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}),r.a.createElement("article",null,r.a.createElement("div",{className:"message"})))})),r.a.createElement("section",{className:"container md-cell md-cell--12"},function(){if(e.state.attachment_parent.length>0)return r.a.createElement("h4",null,"Attachments :")}(),e.state.attachment_parent.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,key:t,src:e.file_url,style:{width:"20%",height:"25vh"}})})))))):"")})),r.a.createElement("br",null),function(){if(e.state.attachment.length>0)return r.a.createElement("h4",null,"Attachments :")}(),this.state.attachment.map((function(e,t){return r.a.createElement("iframe",{title:e.file_url,src:e.file_url,style:{width:"20%",height:"25vh"}})}))))),r.a.createElement("br",null),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},this.state.answers.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Answers:"),this.state.answers.map((function(e,t){return r.a.createElement("div",null,"\xa0 ",r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t},r.a.createElement("div",null,r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"pink"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"orange"},className:"fa fa-warning"})," REJECTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))),r.a.createElement("section",{className:"box container md-cell md-cell--12",key:t,style:{backgroundColor:"lightgreen"}},r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement("i",{style:{color:"green"},className:"fa fa-check"})," ACCEPTED"),r.a.createElement(y.s,{label:r.a.createElement("h5",null,e.full_name,"  "),iconBefore:!0,component:"li",className:"md-cell md-cell--12"},r.a.createElement(y.c,{src:""!==e.avatar_url?e.avatar_url:"/avatar/user.png"})),r.a.createElement("p",null,H()(e.created_at,"dd mmm hh:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.replies}}))))}))):"",r.a.createElement("br",null),r.a.createElement("hr",null),this.props.role.includes("Supervisor CCS")?r.a.createElement("div",null,r.a.createElement("button",{className:"button  ",onClick:function(){return e.setState({formAction:"split"})}},r.a.createElement(y.q,null,"create"),"\xa0Split")," \xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Distribute")," \xa0",r.a.createElement("button",{className:"button ",onClick:function(){return alert("Send as Incoming Letter")}},r.a.createElement(y.q,null,"mail"),"\xa0Send as Incoming Letter")):"",this.props.role.includes("Help Desk")||this.props.role.includes("Implementator")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"screen_share"),"\xa0Forward")):"",this.props.role.includes("Customer")?r.a.createElement("div",null,r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"rating"})}},r.a.createElement(y.q,null,"star"),"\xa0Make Rating")):"",this.props.role.includes("Specialist")?r.a.createElement("div",{style:{marginBottom:"15vh",alignItems:"center"}},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"reply"})}},r.a.createElement(y.q,null,"reply"),"\xa0Reply"),"\xa0",r.a.createElement(y.v,{id:"menu-button-2",anchor:{x:y.v.HorizontalAnchors.INNER_LEFT,y:y.v.VerticalAnchors.TOP_LEFT},position:y.v.Positions.TOP_LEFT,flat:!0,primary:!0,menuItems:[{primaryText:"to Support 1"},{primaryText:"to Support 2"}]},r.a.createElement("button",{className:"button   ",onClick:function(){return e.setState({formAction:"forward"})}},r.a.createElement(y.q,null,"forward"),"\xa0Send Back to"))):"",r.a.createElement("hr",null),function(){switch(e.state.formAction){case"split":return r.a.createElement(Ae,{role:e.props.role,ticket_id:e.state._id});case"forward":return r.a.createElement(Ie,{role:e.props.role,ticket_id:e.state._id});case"reply":return r.a.createElement(ze,{role:e.props.role,ticket_id:e.state._id});default:return""}}())))}}]),t}(n.Component),ja={routeProps:{path:"/ccs/ticket/detail-rejected",exact:!1,component:Da},name:"DetailRejected"},Ta={routeProps:{path:"/ccs/ticket/form",exact:!0,component:Oe},name:"FormTicket"},Ia={routeProps:{path:"/ccs/ticket/form/:ticket_id",exact:!0,component:Oe},name:"Form"},Ra=x.Session.get(),Ma=Ra.payload,Aa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:a.props.parent_ticket_id,data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.parent_ticket_id;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,void 0!==this.props.child_ticket&&this.props.child_ticket.length>0?this.props.child_ticket.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{style:{paddingLeft:"2.5vw"}},r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)},r.a.createElement("b",null,e._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,""!==e.full_name_handler&&null!==e.full_name_handler?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name_handler)):""),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy, HH:MM")))))})):"")}}]),t}(n.Component),Fa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=19;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id,"&currentPage=0&displayPerPage=0")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:e.next=35;break;case 19:return e.prev=19,e.next=22,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(a.state.client_id,"&currentPage=0&displayPerPage=0&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:return e.prev=27,e.next=30,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&currentPage=").concat(a.state.currentPage,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({key:t,currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[1,6],[9,14],[19,24],[27,32]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.toggleLoadChild=function(e){var t=a.state.loadChild;t[e]=!t[e],a.setState({loadChild:t}),console.log(a.state.loadChild)},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,500)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,500)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,500)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,500)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,500)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-parents?client_id=".concat(a.state.client_id,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:a.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,data:[],priorities:[],loadChild:[],categories:[],key:"",status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",asc:1,currentPage:1,displayPerPage:100,total_data:0},a.socket=G()(K),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.socket.on("UPDATE_ANSWER",(function(e){console.log(e),e.user_id_client===Ma.userId&&a.componentDidMount()})),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.socket.on("APPROVAL",(function(e){a.componentDidMount()})),a.socket.on("TICKET_ADDED",(function(e){a.componentDidMount()})),a.socket.on("REJECT",(function(e){a.componentDidMount()})),a.socket.on("COMPLETED",(function(e){a.componentDidMount()})),a.socket.on("ACCEPT",(function(e){a.componentDidMount()})),a.socket.on("QUEUED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,k.a.get("/api/user/".concat(this.props.user_id)).then((function(e){200===e.data.status&&(t=e.data.data[0].client_id,a.setState({client_id:e.data.data[0].client_id}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-ticket-parents-total?client_id=".concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:return e.prev=17,e.next=20,k.a.get("/api/ccs-ticket-parents?client_id=".concat(t,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(17),console.log(e.t2);case 25:this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.total_child>0)){e.next=9;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-ticket-by-parent_id/".concat(t._id)).then((function(e){200===e.data.status&&(t.loadChild=!0,t.child_ticket=e.data.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()),console.log(this.state.data);case 27:case"end":return e.stop()}}),e,this,[[1,6],[9,14],[17,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;var o=this.state.data;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ..... ")):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement("h4",null,"All Tickets"),r.a.createElement(y.r,{ref:this.tableData},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ...",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement("table",{className:"table is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"3%"}}),r.a.createElement("th",{style:{width:"10%"}},"#ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"20%"}},"Request Tickets \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"15%"}},"Handled by \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"Status \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("status")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Created at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "))),r.a.createElement("tbody",null,o.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.total_child>0?r.a.createElement("a",{onClick:function(){return e.toggleLoadChild(a)}},r.a.createElement(y.q,null,e.state.loadChild[a]?"arrow_drop_down":"arrow_right"," ")):""),r.a.createElement("td",null," ",r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)},r.a.createElement("b",null,t._id))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(t._id)}," ",r.a.createElement("b",null,t.title)," ")," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,t.client_name)),r.a.createElement("td",null,""!==t.priority_id?r.a.createElement("span",{className:"tag "+t.label_color_priority},r.a.createElement("b",null,t.priority)):""),r.a.createElement("td",null,""!==t.full_name&&null!==t.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(t.handled_by_user_id)},t.full_name)):""),r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("b",{style:{color:t.label_color_status}},t.status))),r.a.createElement("td",null,r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM")))),e.state.loadChild[a]&&void 0!==t.child_ticket&&t.child_ticket.length>0?r.a.createElement(Aa,{parent_ticket_id:t._id,child_ticket:t.child_ticket,role:e.props.role}):"")})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""))))}}]),t}(n.Component),La=x.Session.get(),Ha=(La.payload,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=20;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-all-completed-total?client_id=".concat(a.state.client_id,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:e.next=36;break;case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-all-completed-total?client_id=".concat(a.state.client_id,"&currentPage=",0,"&displayPerPage=",0,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:a.setState({key:t,currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeDateFrom=function(e){a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,500)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,500)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,500)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,500)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,500)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(a.state.client_id,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,data:[],priorities:[],categories:[],status:[],status_id:"",category_id:"",priority_id:"",date_from:"",date_to:"",key:"",total_data:0,asc:1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("ACCEPT",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,k.a.get("/api/user/".concat(this.props.user_id)).then((function(e){200===e.data.status&&(t=e.data.data[0].client_id,a.setState({client_id:e.data.data[0].client_id}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/ccs-tickets-all-completed-total?client_id=".concat(t,"&currentPage=",0,"&displayPerPage=",0)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:return e.prev=17,e.next=20,k.a.get("/api/ccs-tickets-all-completed?client_id=".concat(t,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(17),console.log(e.t2);case 25:case"end":return e.stop()}}),e,this,[[1,6],[9,14],[17,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ..... ")):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Finished Ticket"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ...",onChange:this.search}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"12%"}},"Handled By \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("full_name")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Finished at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("resolution_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"20%"}},"Rating \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("rating")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,""!==e.full_name&&null!==e.full_name?r.a.createElement("span",{className:"tag"},r.a.createElement(_.a,{to:"/ccs/staff?id=".concat(e.handled_by_user_id)},e.full_name)):""),r.a.createElement("td",null,r.a.createElement("p",null,null!==e.resolution_at?H()(e.resolution_at,"dd mmm yyyy, HH:MM"):"")),r.a.createElement("td",null,e.rating>0?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})):""))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component)),za=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={profile:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"all"},a.componentDidMount=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),a.setState({_id:t.id}),e.prev=2,e.next=5,k.a.get("/api/user/".concat(t.id)).then((function(e){200===e.data.status&&a.setState({profile:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.getAverageRating(t.id);case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.getAverageRating=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-rating-average/".concat(t)).then((function(e){200===e.data.status&&a.setState({avg_rating:e.data.data[0].average_rating})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setTab=function(e){a.setState({tab:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tab,a=[];return a=[{color:"lightblue",action:"all",icon:"fa fa-ticket",tooltip:"AllTickets",badge:this.state.total_available},{color:"darkblue",action:"completed",icon:"fa fa-ticket",tooltip:"Finished Tickets",badge:this.state.total_approve}],r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Customer Info"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}),this.state.profile.map((function(l,c){return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:" column is-12 box is-centered"},r.a.createElement("h4",null),r.a.createElement("figure",null,r.a.createElement("img",{className:"is-rounded",style:{width:"15vw"},src:l.avatar_url,alt:""})),r.a.createElement("h4",{style:{textAlign:"center"}},l.client_name),r.a.createElement("p",{style:{textAlign:"center"}},l.role," "),r.a.createElement("p",{style:{textAlign:"center"}},l.client_email),r.a.createElement("p",{style:{textAlign:"center"}},l.client_address)))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,className:"box"},r.a.createElement("h4",null,"Tickets Info"),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,a.map((function(a,n){return t===a.action?r.a.createElement("li",{onClick:function(){return e.setTab(a.action)},style:Object(C.a)({borderBottom:"solid 3px "+a.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"},"padding","10px")},a.tooltip):r.a.createElement("li",{onClick:function(){return e.setTab(a.action)},style:Object(C.a)({borderBottom:"solid 3px "+a.color,padding:"10px 5px 0 0 "},"padding","10px")},a.tooltip)})))),function(){switch(t){case"all":return r.a.createElement(Fa,{user_id:e.state._id});case"completed":return r.a.createElement(Ha,{user_id:e.state._id})}}())))}))))}}]),t}(n.Component),Va={routeProps:{path:"/ccs/customer",exact:!0,component:za},name:"Customer"},Ba=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=20;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-handle-total/".concat(a.props.user_id,"?currentPage=0&displayPerPage=0&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-my-handle/".concat(a.props.user_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:e.next=36;break;case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-my-handle-total/".concat(a.props.user_id,"?currentPage=0&displayPerPage=0&key=").concat(t,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/ccs-tickets-my-handle/".concat(a.props.user_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:a.setState({currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),a.props.scrollToTabs()},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),a.props.scrollToTabs()},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),a.props.scrollToTabs()},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),a.props.scrollToTabs()},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),a.props.scrollToTabs()},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-my-handle/".concat(a.props.user_id,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={role:"",client_id:"",isLoading:!0,data:[],priorities:[],categories:[],status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:"",asc:1,key:"",currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("TICKET_FORWARDED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/user/".concat(this.props.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,a){null!==e.client_id&&(t.state.client_id=e.client_id)}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-my-handle-total/".concat(this.props.user_id,"?currentPage=0&displayPerPage=0&client_id=").concat(this.state.client_id)).then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-tickets-my-handle/".concat(this.props.user_id,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage,"&client_id=").concat(this.state.client_id)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ..... ")):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement("h4",null,"On Progress Tickets"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"38%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"10%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"handling time \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("time_left")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Handled at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("created_at")},href:"#"},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0"),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,e.time_left_adjusted>0?e.time_left_adjusted:e.time_left_," days left"),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm HH:MM"))))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. ")))))))}}]),t}(n.Component),Ua=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=20;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-completed-total/".concat(a.props.user_id,"?currentPage=0&displayPerPage=0&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/ccs-tickets-my-completed/".concat(a.props.user_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:e.next=36;break;case 20:return e.prev=20,e.next=23,k.a.get("/api/ccs-tickets-my-completed-total/".concat(a.props.user_id,"?currentPage=0&displayPerPage=0&key=").concat(t,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/ccs-tickets-my-completed/".concat(a.props.user_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:a.setState({currentPage:1,displayPerPage:100});case 37:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.setUpdate=function(e){},a.setDelete=function(e){},a.onChangeDateFrom=function(e){a.setState({date_from:H()(e,"yyyy-mm-dd")})},a.onChangeDateTo=function(e){a.setState({date_to:H()(e,"yyyy-mm-dd")})},a.onChangeCategoryId=function(e){a.setState({category_id:e})},a.onChangePriorityId=function(e){a.setState({priority_id:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&category_id=").concat(a.state.category_id,"&priority_id=").concat(a.state.priority_id),e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-completed/".concat(a.props.user_id,"?key=").concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.resetFilter=function(){a.setState({category_id:"",priority_id:"",date_from:"",date_to:"",client_id:a.props.role.includes("Customer")?a.state.client_id:""})},a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e),a.props.scrollToTabs()},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),a.props.scrollToTabs()},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),a.props.scrollToTabs()},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),a.props.scrollToTabs()},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),a.props.scrollToTabs()},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-my-completed/".concat(a.props.user_id,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key,"&client_id=").concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({isLoading:!1,data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={client_id:"",isLoading:!0,data:[],priorities:[],categories:[],status:[],status_id:"",category_id:"",priority_id:"",date_from:"",date_to:"",key:"",asc:1,currentPage:1,displayPerPage:100},a.socket=G()(K),a.socket.on("ACCEPT",(function(e){a.componentDidMount()})),a.socket.on("RATED",(function(e){a.componentDidMount()})),a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/user/".concat(this.props.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,a){null!==e.client_id&&(t.state.client_id=e.client_id)}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-tickets-my-completed-total/".concat(this.props.user_id,"?currentPage=0&displayPerPage=0&client_id=").concat(this.state.client_id)).then((function(e){200===e.data.status&&t.setState({total_data:e.data.data[0].total})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-tickets-my-completed/".concat(this.props.user_id,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage,"&client_id=").concat(this.state.client_id)).then((function(e){200===e.data.status&&t.setState({data:e.data.data,isLoading:!1})}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage,l=a+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=a-3;i<=s;i++)t[i-1]=i;return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ..... ")):r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement("h4",null,"Finished Tickets"),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ...",onChange:this.search}))),e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}}," #ID \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("_id")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"28%"}},"Ticket Request \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("title")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"BPR/Client \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("client_name")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"12%"}},"Priority \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("priority_id")}},r.a.createElement("i",{className:"fa fa-sort"}))),r.a.createElement("th",{style:{width:"15%"}},"Finished at \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("resolution_at")}},r.a.createElement("i",{className:"fa fa-sort"}))," "),r.a.createElement("th",{style:{width:"20%"}},"Rating \xa0 ",r.a.createElement("span",{onClick:function(){return e.setSorting("rating")}},r.a.createElement("i",{className:"fa fa-sort"}))))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e._id)," ")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))),r.a.createElement("td",null,r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,""!==e.priority_id?r.a.createElement("span",{className:"tag "+e.label_color_priority},r.a.createElement("b",null,e.priority)):""),r.a.createElement("td",null,r.a.createElement("p",null,null!==e.resolution_at?H()(e.resolution_at,"dd mmm yyyy, HH:MM"):H()(e.updated_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("td",null,e.rating>0?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{rating:parseFloat(e.rating.toString()),starRatedColor:"#f0c260",starDimension:"20px",numberOfStars:5,name:"rating"})):""))})))),t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:e.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component),qa=x.Session.get(),Wa=qa.payload,Ya={routeProps:{path:"/ccs/staff",exact:!0,component:function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={profile:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress"},a.componentDidMount=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),a.setState({_id:t.id}),e.prev=2,e.next=5,k.a.get("/api/user/".concat(t.id)).then((function(e){200===e.data.status&&a.setState({profile:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.getAverageRating(t.id),a.tabTask=r.a.createRef();case 12:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.getAverageRating=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-ticket-rating-average/".concat(t)).then((function(e){200===e.data.status&&a.setState({avg_rating:e.data.data[0].average_rating})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setTab=function(e){a.setState({tab:e})},a.scrollToTabs=function(){window.scrollTo(0,500)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tab,a=[];return a=[{color:"#f0c260",action:"onprogress",icon:"fa fa-ticket",tooltip:"On Progress Tickets",badge:this.state.total_available},{color:"green",action:"completed",icon:"fa fa-ticket",tooltip:"Finished Tickets",badge:this.state.total_approve}],r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Profile"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}),this.state.profile.map((function(l,c){return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:" column is-12 box is-centered"},r.a.createElement("h4",null,"Team Info"),r.a.createElement("figure",null,r.a.createElement("img",{className:"is-rounded",style:{width:"15vw"},src:l.avatar_url,alt:""})),r.a.createElement("h4",{style:{textAlign:"center"}},l.full_name),r.a.createElement("p",{style:{textAlign:"center"}},l.role," "),r.a.createElement("h4",{style:{textAlign:"center"}},e.state.avg_rating>0?r.a.createElement(n.Fragment,null,e.state.avg_rating.toFixed(2),"  \xa0",r.a.createElement(he.a,{rating:e.state.avg_rating,starRatedColor:"orange",starDimension:"2vw",numberOfStars:5,name:"rating"})):r.a.createElement(n.Fragment,null,"0   \xa0",r.a.createElement(he.a,{rating:0,starRatedColor:"orange",starDimension:"2vw",numberOfStars:5,name:"rating"})))))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,className:"box"},r.a.createElement("h4",null,"Tasks Info"),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,a.map((function(a,n){return t===a.action?r.a.createElement("li",{onClick:function(){return e.setTab(a.action)},style:Object(C.a)({borderBottom:"solid 3px "+a.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"},"padding","1vw")},a.tooltip):r.a.createElement("li",{onClick:function(){return e.setTab(a.action)},style:Object(C.a)({borderBottom:"solid 3px "+a.color,padding:"10px 5px 0 0 "},"padding","1vw")},a.tooltip)})))),function(){switch(t){case"onprogress":return r.a.createElement(Ba,{userId:Wa.userId,user_id:e.state._id,scrollToTabs:e.scrollToTabs,ref:e.tabTask});case"completed":return r.a.createElement(Ua,{userId:Wa.userId,user_id:e.state._id,scrollToTabs:e.scrollToTabs,ref:e.tabTask})}}())))}))))}}]),t}(n.Component)},name:"Profile"},Xa={routeProps:{path:"/ccs/dashboard/all",exact:!0,component:Dt},name:"DetailAllTicket"},Ga=x.Session.get().payload,Ka={routeProps:{path:"/ccs/dashboard/rejected",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=11;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-my-rejected/".concat(Ga.userId)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-tickets-my-rejected/".concat(Ga.userId,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.state={data:[],priorities:[],categories:[],status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-rejected/".concat(Ga.userId)).then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingBottom:"15vh"},className:"animated bounceInLeft"},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail Rejected"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... (BPR Name or Title ) ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table is-bordered  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"75%"}},"Ticket Request"),r.a.createElement("th",{style:{width:"25%"}},"Rejected at"))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0 ",r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority),r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.rejected_at,"dd mmm HH:MM"))))}))))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component)},name:"DetailAllRejected"},Ja=x.Session.get().payload,Qa={routeProps:{path:"/ccs/dashboard/finished",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=11;break}return e.prev=1,e.next=4,k.a.get("/api/ccs-tickets-my-finished/".concat(Ja.userId)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.get("/api/ccs-tickets-my-finished/".concat(Ja.userId,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.state={data:[],priorities:[],categories:[],status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-finished/".concat(Ja.userId)).then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("p",{style:{color:e.label_color}},e.status),value:e._id};return a[t]=n,!1})),t.setState({status:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21],[24,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingBottom:"15vh"},className:"animated bounceInLeft"},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail Closed"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... (BPR Name or Title ) ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table   is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"75%"}},"Ticket Request"),r.a.createElement("th",{style:{width:"25%"}},"Finished at"))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0 ",r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority),r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.created_at,"dd mmm HH:MM"))))}))))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component)},name:"DetailAllFinished"},$a=x.Session.get().payload,Za={routeProps:{path:"/ccs/dashboard/forwarded",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""!==t){e.next=12;break}return e.prev=2,e.next=5,k.a.get("/api/ccs-tickets-my-forward/".concat($a.userId)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,k.a.get("/api/ccs-tickets-my-forward/".concat($a.userId,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,7],[12,17]])})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){a.props.showDetail(e)},a.onChangeFormDate=function(e){a.setState({filter_from_date:H()(e,"yyyy-mm-dd")})},a.onChangeToDate=function(e){a.setState({filter_to_date:H()(e,"yyyy-mm-dd")})},a.onChangePriorityId=function(e){a.setState({filter_priority_id:e})},a.onChangeCategoryId=function(e){a.setState({filter_category_id:e})},a.doFilter=function(){a.state.filter_priority_id,a.state.filter_category_id,a.state.filter_from_date,a.state.filter_to_date},a.state={data:[],priorities:[],categories:[],status:[],filter_from_date:"",filter_to_date:"",filter_category_id:"",filter_priority_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-tickets-my-forward/".concat($a.userId)).then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/ccs-priorities").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.priority),value:e._id};return a[t]=n,!1})),t.setState({priorities:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/ccs-status").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("p",{style:{color:e.label_color}},e.status),value:e._id};return a[t]=n,!1})),t.setState({status:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/ccs-categories").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.category,value:e._id};return a[t]=n,!1})),t.setState({categories:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21],[24,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingBottom:"15vh"},className:"animated bounceInLeft"},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail Forwarded"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement(y.e,{style:{padding:"2.5%"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{placeholder:"Search ... (BPR Name or Title ) ",onChange:this.search,rightIcon:r.a.createElement("i",{className:"fa fa-search"})}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},e.state.data.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table is-bordered  is-fullwidth is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticket Request"),r.a.createElement("th",null,"Sent to"),r.a.createElement("th",null,"Sent at"),r.a.createElement("th",null,"Ticket Status"))),r.a.createElement("tbody",null,e.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(_.a,{to:"/ccs/ticket/detail?ticket_id=".concat(e._id)}," ",r.a.createElement("b",null,e.title))," \xa0 ",r.a.createElement("span",{className:"tag "+e.label_color_priority},e.priority),r.a.createElement("p",null,e.client_name)),r.a.createElement("td",null,r.a.createElement("p",{style:{color:e.label_color_status}},e.full_name)),r.a.createElement("td",null,r.a.createElement("p",null,H()(e.forwarded_at,"dd mmm yyyy HH:MM"))),r.a.createElement("td",null,r.a.createElement("b",{style:{color:e.label_color_status}},e.status)))}))))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed. "))))))}}]),t}(n.Component)},name:"DetailAllForwarded"},en={routeProps:{path:"/ccs/dashboard/onprogress",exact:!0,component:It},name:"DetailOnProgress"},tn={routeProps:{path:"/ccs/dashboard/completed",exact:!0,component:At},name:"DetailAllCompleted"},an=x.Session.get().payload,nn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({key:t}),e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id-total/".concat(a.state.module_id,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:a.setState({key:t,currentPage:1});case 18:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){console.log(e),a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({currentPage:t});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status&&200===e.data.status){var n=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).NO=a+1,r.Time=H()(t.timestamp,"dd/mm/yyyy, HH:MM:ss"),r.User=null!==t.full_name?t.full_name:t.client_name,r.Activity=t.log,r.IP=t.from_ip,r.UserAgent=t.user_agent,n.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=n,a.setState({dataToExport:t})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",n="All Logs CCS  per ".concat(H()(new Date,"dd-mm-yyyy")),r=We.utils.json_to_sheet(t),l={Sheets:{data:r},SheetNames:["data"]},c=We.write(l,{bookType:"xlsx",type:"array"}),s=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(s,n+".xlsx");case 18:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],toasts:[],module_id:"",total_data:0,_id:"",isLoading:!0,dialogVisible:!1,dialogDeleteVisible:!1,category:"",description:"",created_by:an.userId,key:"",asc:1,currentPage:1,displayPerPage:25},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id,n.setState({module_id:t})}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/logs-by-module-id-total/".concat(t)).then((function(e){200===e.data.status&&n.setState({total_data:e.data.data[0].total})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/logs-by-module-id/".concat(t,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:ce("Access Logs Page",t);case 27:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),t.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var a=[],n=this.state.currentPage,l=n+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=n-3;i<=s;i++)a[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return r.a.createElement("div",{style:{marginBottom:"8%"}},r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Logs"),r.a.createElement(y.i,{size:7}),r.a.createElement(y.i,{size:1},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(rn,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role}))),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.length>0?this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))),r.a.createElement(y.i,{size:8}),r.a.createElement(y.i,{size:4,style:{alignItems:"right"}},a.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),a.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))}}]),t}(n.Component),rn=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.length>0?this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))))}}]),t}(n.Component),ln={routeProps:{path:"/ccs/log",exact:!0,component:nn},name:"Logs"},cn={routeProps:{path:"/ccs/teams",exact:!0,component:function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingBottom:"15vh"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Teams"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))),r.a.createElement($t,null))}}]),t}(n.Component)},name:"Teams"},sn=x.Session.get().payload,on=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:1,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),dn={routeProps:{path:"/ccs/client-respond-time-config",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.componentDidMount(),e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/ccs-client-respond-time-configs?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.onChangeCLientId=function(e){a.setState({client_id:e})},a.onChangeMaxRespondTime=function(e){a.setState({max_respond_time:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/ccs-client-respond-time-config/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e){return a.setState({client_id:e.client_id,max_respond_time:e.max_respond_time}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({_id:t,dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,k.a.delete("/api/ccs-client-respond-time-config/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogDeleteVisible:!1,status:"",label_color:"",description:"",_id:"",weight:""})):a.addToast(e.data.message)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),t={client_id:a.state.client_id,max_respond_time:a.state.max_respond_time,created_by:a.state.created_by},""!==a.state._id){e.next=13;break}return e.prev=3,e.next=6,k.a.post("/api/ccs-client-respond-time-config",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogVisible:!a.state.dialogVisible,client_id:"",max_respond_time:"",weight:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/ccs-client-respond-time-config/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({isLoading:!1,dialogVisible:!a.state.dialogVisible,client_id:"",max_respond_time:"",_id:"",weight:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.showForm=function(){a.setState({_id:"",dialogVisible:!0,category:"",description:""})},a.state={data:[],toasts:[],clients:[],_id:"",weight:"",isLoading:!0,dialogVisible:!1,dialogDeleteVisible:!1,client_id:"",max_respond_time:"",created_by:sn.userId,role_controls:[],role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(e.client_code>0){var n={label:e.client_code+" - "+e.client_name,value:e._id};t[a]=n}return!1})),n.setState({clients:t})}}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/ccs-client-respond-time-configs").then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:return ce("Access CLient Respond Time Config Page",t),e.prev=27,e.next=30,k.a.post("/api/role-control-by-link-role-id",{link:window.location.pathname,role_id:this.props.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23],[27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Processing ....")):r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(S.a,null),this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus",onClick:function(){return e.setState({dialogVisible:!0})}}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Client Respond Time Configuration"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{onChange:this.search,placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"BPR/CLient",width:"8%"},{label:"Max Time Respond (hours)",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.client_name),r.a.createElement("td",null,t.max_respond_time),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(on,{id:t._id,setDelete:function(t){return e.setDelete(t)},setUpdate:function(t){return e.setUpdate(t)}}):"-"))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Respond Time Configuration"},r.a.createElement(y.y,{rows:2,id:"simple-action-dialog-field",label:"BPR/CLient",placeholder:"BPR/CLient",menuItems:this.state.clients,value:this.state.client_id,onChange:this.onChangeCLientId,className:"md-cell md-cell--4-tablet md-cell--12"}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Max Time Respond (hours)",placeholder:"in number",type:"number",value:this.state.max_respond_time,onChange:this.onChangeMaxRespondTime})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component)},name:"ClientRespondTimeConfig"},un=x.Session.get().payload,mn=[ne,oe,me,ra,Ut,ma,pa,fa,ha,ga,Ta,Ia,_a,ka,Sa,Sa,Na,ja,Xt,Va,Ya,Xa,Qa,Za,en,Ka,tn,ln,cn,dn,{routeProps:{path:"/ccs/notifications",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a.setState({module_id:t}),r=F.a.parse(window.location.search),a.setState({_id:r.id}),e.prev=13,e.next=16,k.a.get("/api/notifications-per-user-total/".concat(un.userId,"?displayPerPage=",0,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/notifications-per-user/".concat(un.userId,"?displayPerPage=").concat(a.state.displayPerPage,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,null,[[2,7],[13,18],[21,26]])}))),a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentPage+1,n=a.state.displayPerPage*t,e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(un.userId,"?displayPerPage=").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.setState({currentPage:t,totalShowed:n});case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress",currentPage:1,displayPerPage:25,totalShowed:0,isLoading:!0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===un.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ... ")))):r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(t,a){return r.a.createElement(_.a,{to:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:t.avatar_url}),primaryText:r.a.createElement(n.Fragment,null," ",r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name)," \xa0 ",0===t.is_read?r.a.createElement("span",{className:"tag ",style:{backgroundColor:"#cae7fa"}},r.a.createElement("b",null,"UNREAD")):""," "),secondaryText:r.a.createElement(n.Fragment,null,"  ",t.notification," \xa0 ",r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))),this.state.totalShowed<this.state.total_data?r.a.createElement("a",{onClick:this.loadMore},r.a.createElement("h4",null,"Load More ... ")):"")))}}]),t}(n.Component)},name:"Notifications"}],pn=x.Session.get().payload,fn=[],hn=function(e){function t(){var e,a,n;Object(d.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state=(a={visible:!1,role_id:"",role:"",position:"left"},Object(C.a)(a,"role_id",""),Object(C.a)(a,"module_title",n.props.module_title),Object(C.a)(a,"notifications",[]),Object(C.a)(a,"avatar_url",""),a),n.openDrawerLeft=function(){n.setState({visible:!0,position:"left"})},n.closeDrawer=function(){n.setState({visible:!1})},n.handleVisibility=function(e){n.setState({visible:e})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title="CCS PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/user/".concat(pn.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({avatar_url:e.avatar_url})}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a="",t=window.location.href.split("/"),e.prev=12,e.next=15,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a=e._id,!1}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.error("Data Not Loaded ",e.t1);case 20:return e.prev=20,e.next=23,k.a.get("/api/user-role/".concat(a,"/").concat(pn.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return console.log(this.state.role),e.prev=29,e.next=32,k.a.get("/api/ccs-notifications-per-user/".concat(pn.userId)).then((function(e){200===e.data.status&&n.setState({notifications:e.data.data})}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:return e.prev=37,e.next=40,k.a.get("/api/menu-by-module-link-role-id/".concat(t[3],"/").concat(this.state.role_id)).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),fn=t}));case 40:e.next=45;break;case 42:e.prev=42,e.t4=e.catch(37),console.error("Data Not Loaded ",e.t4);case 45:console.log(this.state.role_id);case 46:case"end":return e.stop()}}),e,this,[[2,7],[12,17],[20,25],[29,34],[37,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.position,l="left"===n,c=r.a.createElement(y.d,{icon:!0,onClick:this.closeDrawer},l?"arrow_back":"close");return""===pn.userId||null===pn.userId||void 0===pn.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,colored:!0,nav:r.a.createElement(y.d,{icon:!0,onClick:this.openDrawerLeft},"menu"),title:this.state.module_title,style:{backgroundColor:this.props.bg_color},actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})]}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,mn.map((function(t,a){return e.state.role.includes("Help Desk")||e.state.role.includes("Implementator")||e.state.role.includes("Support Pelayanan")||e.state.role.includes("Specialist")||e.state.role.includes("Supervisor CCS")||e.state.role.includes("Customer")?r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role,role_id:e.state.role_id})}},r.a.createElement(E.a,{to:"/ccs/task"})):r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role,role_id:e.state.role_id})}})})))),r.a.createElement(y.m,{id:"simple-drawer-example",type:y.m.DrawerTypes.TEMPORARY,visible:a,position:n,onVisibilityChange:this.handleVisibility,navItems:fn,header:r.a.createElement(y.F,{nav:l?r.a.createElement(y.d,{icon:!0,onClick:function(){return window.location.href="/"}},"home"):c,actions:l?c:null,className:"md-divider-border md-divider-border--bottom"})})))}}]),t}(n.Component),gn={routeProps:{path:"/ccs",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(hn,{module_title:"CCS PT MSO",bg_color:"#2196f3"})}}]),t}(n.Component)},name:"CCS"},bn=x.Session.get().payload,En=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=11;break}return e.prev=1,e.next=4,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){e.client_code>0&&t.push(e)})),a.setState({data:t})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.get("/api/clients?key=".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){e.client_code>0&&t.push(e)})),a.setState({data:t})}}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])})));return function(t){return e.apply(this,arguments)}}(),a.showForm=function(){a.setState({dialogVisible:!0})},a.renderRole=function(e){return r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},e))},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/client/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,status_id:e.status_id,description:e.description}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/client/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e})},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.data.length/a.state.displayPerPage);a.setState({currentPage:e})},a.setPageStart=function(){a.setState({currentPage:1})},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.data.length/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n})},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t})},a.state={toasts:[],data:[],roles:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,currentPage:1,displayPerPage:50,asc:1,role_id:a.props.role_id,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(bn.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){e.client_code>0&&t.push(e)})),n.setState({data:t})}}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:return e.prev=26,e.next=29,k.a.post("/api/role-control-by-link-role-id",{link:"/clients?tab_name=client",role_id:this.state.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 29:e.next=34;break;case 31:e.prev=31,e.t3=e.catch(26),console.log(e.t3);case 34:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete);case 38:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23],[26,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var n=[],l=this.state.currentPage,c=l+2,s=Math.ceil(this.state.data.length/this.state.displayPerPage),i=c>s?s:c,o=l-3;o<=i;o++)n[o-1]=o;var d=(this.state.currentPage-1)*this.state.displayPerPage,u=d+this.state.displayPerPage-1;return r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/clients/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"All BPR Clients")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(yn,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"BPR Code - BPR /Client Name",width:"15%",sorting:"client_code"},{label:"Address",width:"20%"},{label:"Phone No",width:"15%"},{label:"Email",width:"15%"},{label:"Status",width:"5%"},{label:"",width:"3%"}].map((function(t,a){return null!==t.sorting&&""!==t.sorting&&void 0!==t.sorting?r.a.createElement("td",{width:t.width},t.label," \xa0 ",r.a.createElement("a",{onClick:function(){return e.setSorting(t.sorting)}},r.a.createElement("i",{className:"fa fa-sort"}))," "):r.a.createElement("td",{width:t.width},t.label," ")}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return a<=u&&a>=d?r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("strong",null,t.client_code+" - "+t.client_name)),r.a.createElement("td",null,t.address),r.a.createElement("td",null,t.phone_number),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement("b",{style:{color:t.label_color}},t.status)),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(_n,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-")):""})))),n.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),n.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),_n=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/clients/form?id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center",marginTop:"0em"}}," more_vert")}}]),t}(n.Component),yn=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"BPR Code - BPR /Client Name",width:"15%"},{label:"Address",width:"20%"},{label:"Phone No",width:"15%"},{label:"Email",width:"15%"},{label:"Status",width:"5%"}].map((function(e,t){return r.a.createElement("td",{width:e.width},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("strong",null,e.client_code+" - "+e.client_name)),r.a.createElement("td",null,e.address),r.a.createElement("td",null,e.phone_number),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement("b",{style:{color:e.label_color}},e.status)))}))))))}}]),t}(n.Component),vn={routeProps:{path:"/clients/clients",exact:!0,component:En},name:"Clients"},kn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),xn=x.Session.get().payload,wn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeLabelColor=function(e){a.setState({label_color:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/client-status?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/client-status/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,status:e.status,label_color:e.label_color,description:e.description}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/client-status/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,status:"",_id:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={status:a.state.status,description:a.state.description,label_color:a.state.label_color},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/client-status",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",_id:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/client-status/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",description:"",label_color:"",_id:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,status:"",label_color:"",description:"",created_by:xn.userId,role_id:"",role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(xn.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/client-status").then((function(e){200===e.data.status&&n.setState({data:e.data.data})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:return e.prev=26,e.next=29,k.a.post("/api/role-control-by-link-role-id",{link:"/clients?tab_name=status",role_id:this.state.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 29:e.next=34;break;case 31:e.prev=31,e.t3=e.catch(26),console.log(e.t3);case 34:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete);case 38:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23],[26,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Status")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}})),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Status",width:"8%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("b",{style:{color:t.label_color}},t.status)),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(kn,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Status"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status,onChange:this.onChangeStatus}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Label Color",placeholder:"Label Color",value:this.state.label_color,onChange:this.onChangeLabelColor}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),Sn={routeProps:{path:"/clients/Status",exact:!0,component:wn},name:"Status"},Pn=x.Session.get().payload,Cn={routeProps:{path:"/clients/report",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeLink=function(e){a.setState({link:e})},a.onChangeModule=function(e){a.setState({module:e})},a.onChangeModuleShort=function(e){a.setState({module_short_name:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(e){alert(e)},a.setDelete=function(e){alert(e)},a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={module:a.state.module,module_short_name:a.state.module_short_name,link:a.state.link,directory_path:a.state.link,description:a.state.description},""!==a.state._id){e.next=11;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/module",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,module:"",link:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,module:"",link:"",description:"",module_short_name:"",created_by:Pn.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Report"),r.a.createElement(y.i,{size:4},r.a.createElement(y.d,{raised:!0,primary:!0,iconClassName:"fa fa-plus-circle ",onClick:this.showForm},"Add")),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Module",width:"8%"},{label:"Link",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.link),r.a.createElement("td",null,e.description))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Module"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module,onChange:this.onChangeModule}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Short Name",placeholder:"Short Name",value:this.state.module_short_name,onChange:this.onChangeModuleShort}),r.a.createElement(y.D,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Link",placeholder:"Link, Start with '/' ",value:this.state.link,onChange:this.onChangeLink}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component)},name:"Report"},Nn=x.Session.get().payload,On={routeProps:{path:"/clients",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={role_id:"",_id:"",role:"",data:[],announcements:[],contain:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(Nn.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return e.prev=19,e.next=22,k.a.get("/api/announcements-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),n.setState({announcements:t})}}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[19,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=F.a.parse(window.location.search);console.log(t);var a=void 0!==t.tab_name?t.tab_name:"client",l=[{color:"pink",action:"client",icon:"fa fa-ticket",tooltip:"BPR/Clients"},{color:"lightblue",action:"status",icon:"fa fa-ticket",tooltip:"Status"}];return r.a.createElement("div",null,null===Nn.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Hi, ",Nn.username,"  ",r.a.createElement("p",null,e.state.role)),r.a.createElement(y.i,{size:12},e.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),e.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,l.map((function(e,t){return a===e.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement(_.a,{to:"/clients?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):""):r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,padding:"10px 5px 0 0 "}},r.a.createElement(_.a,{to:"/clients?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):"")}))))),r.a.createElement(y.i,{size:12},function(){switch(a){case"client":return r.a.createElement(En,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}});case"status":return r.a.createElement(wn,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}});default:return r.a.createElement(En,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}})}}(),void 0)))}}]),t}(n.Component)},name:"Container"},Dn={routeProps:{path:"/clients/setting/preferences",exact:!0,component:q},name:"Preferences"},jn={routeProps:{path:"/clients/setting/profile",exact:!0,component:V},name:"Profile"},Tn={routeProps:{path:"/clients/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"},In=x.Session.get().payload,Rn={routeProps:{path:"/clients/form",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeClientCode=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({client_code:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeClientName=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({client_name:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeAddress=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({address:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangePhoneNumber=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({phone_number:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEmail=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({email:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStatusId=function(e){a.setState({status_id:e})},a.onChangeJoinDate=function(e){a.setState({join_date:H()(e,"yyyy-mm-dd")})},a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={client_name:a.state.client_name,client_code:a.state.client_code,address:a.state.address,join_date:a.state.join_date,phone_number:a.state.phone_number,email:a.state.email,status_id:a.state.status_id},""!==a.state._id&&null!==a.state._id&&void 0!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/client",t).then((function(e){200===e.data.status?(a.setState({client_name:"",client_code:"",address:"",join_date:"",phone_number:"",email:"",status_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/client/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.setState({client_name:"",client_code:"",address:"",join_date:"",phone_number:"",email:"",status_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],editor:!0,status:[],structures:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",status_id:"",client_name:"",client_code:"",phone_number:"",email:"",address:"",created_by:In.userId,roles:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.id}),e.prev=2,e.next=5,k.a.get("/api/client-status").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:r.a.createElement("b",{style:{color:e.label_color}},e.status),value:e._id};t[a]=n})),a.setState({status:t})}}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:if(""===this.state._id){e.next=19;break}return e.prev=11,e.next=14,k.a.get("/api/client/".concat(this.state._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,client_name:e.client_name,client_code:e.client_code,address:e.address,join_date:H()(e.join_date,"yyyy-mm-dd"),phone_number:e.phone_number,email:e.email,status_id:e.status_id}),!1}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,this,[[2,7],[11,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.F,{title:r.a.createElement("b",null,"Form BPR/Client"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"BPR/Client Code",placeholder:"BPR/Client Code",value:this.state.client_code,onChange:this.onChangeClientCode}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"BPR/Client Name",placeholder:"BPR/Client Name",value:this.state.client_name,onChange:this.onChangeClientName}),r.a.createElement(y.D,{rows:3,id:"simple-action-dialog-field",label:"Adress",placeholder:"Address",value:this.state.address,onChange:this.onChangeAddress}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Phone Number",placeholder:"Phone Number",value:this.state.phone_number,onChange:this.onChangePhoneNumber}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Email",placeholder:"Email",value:this.state.email,onChange:this.onChangeEmail}),r.a.createElement(y.k,{id:"appointment-date-landscape",label:"Join date",className:"md-cell",displayMode:"landscape",value:this.state.join_date,onChange:this.onChangeJoinDate}),r.a.createElement(y.y,{className:"md-cell md-cell--4",id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status_id,menuItems:this.state.status,onChange:this.onChangeStatusId}),r.a.createElement("hr",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")))))}}]),t}(n.Component)},name:"Form"},Mn=x.Session.get().payload,An=[vn,Sn,Cn,On,Dn,jn,Tn,Rn,{routeProps:{path:"/clients/notifications",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a.setState({module_id:t}),r=F.a.parse(window.location.search),a.setState({_id:r.id}),e.prev=13,e.next=16,k.a.get("/api/notifications-per-user-total/".concat(Mn.userId,"?displayPerPage=",0,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/notifications-per-user/".concat(Mn.userId,"?displayPerPage=").concat(a.state.displayPerPage,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,null,[[2,7],[13,18],[21,26]])}))),a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentPage+1,n=a.state.displayPerPage*t,e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(Mn.userId,"?displayPerPage=").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.setState({currentPage:t,totalShowed:n});case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress",currentPage:1,displayPerPage:25,totalShowed:0,isLoading:!0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===Mn.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ... ")))):r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(t,a){return r.a.createElement(_.a,{to:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:t.avatar_url}),primaryText:r.a.createElement(n.Fragment,null," ",r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name)," \xa0 ",0===t.is_read?r.a.createElement("span",{className:"tag ",style:{backgroundColor:"#cae7fa"}},r.a.createElement("b",null,"UNREAD")):""," "),secondaryText:r.a.createElement(n.Fragment,null,"  ",t.notification," \xa0 ",r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))),this.state.totalShowed<this.state.total_data?r.a.createElement("a",{onClick:this.loadMore},r.a.createElement("h4",null,"Load More ... ")):"")))}}]),t}(n.Component)},name:"Notifications"}],Fn=x.Session.get().payload,Ln=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,position:"left",module_title:a.props.module_title,avatar_url:""},a.openDrawerLeft=function(){a.setState({visible:!0,position:"left"})},a.closeDrawer=function(){a.setState({visible:!1})},a.handleVisibility=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title="Clients Management PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/menu-by-module-link/".concat(t[3])).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),t}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user/".concat(Fn.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({avatar_url:e.avatar_url})}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return a="",t=window.location.href.split("/"),e.prev=20,e.next=23,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a=e._id,!1}))}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.error("Data Not Loaded ",e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/user-role/".concat(a,"/").concat(Fn.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return e.prev=36,e.next=39,k.a.get("/api/ccs-notifications-per-user/".concat(Fn.userId)).then((function(e){200===e.data.status&&n.setState({notifications:e.data.data})}));case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(36),console.log(e.t4);case 44:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33],[36,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return""===Fn.userId||null===Fn.userId||void 0===Fn.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,colored:!0,nav:r.a.createElement("a",{href:"/",style:{color:"#fff"}},r.a.createElement(y.d,{icon:!0},"home")),title:this.state.module_title,style:{backgroundColor:this.props.bg_color},actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})]}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,An.map((function(t,a){return r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role})}})}))))))}}]),t}(n.Component),Hn={routeProps:{path:"/clients",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(Ln,{module_title:"Clients Mng",bg_color:"#03a9f4"})}}]),t}(n.Component)},name:"Clients"},zn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),Vn=x.Session.get().payload,Bn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.showForm=function(){a.setState({_id:"",menu:"",link:"",icon:"",module_id:"",parent_menu:"",is_active:!1,role_ids:[],roles:[],dialogVisible:!0})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/menus?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({_id:t,role_ids:[]}),e.prev=1,e.next=4,k.a.get("/api/menu/".concat(t)).then((function(e){if(200===e.data.status){e.data.data.map((function(e,t){a.setState({menu:e.menu,link:e.link,icon:e.icon,is_active:e.is_active,module_id:e.module_id,parent_menu:e.parent_menu,dialogVisible:!0})}))}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/role-by-module-id/".concat(a.state.module_id)).then((function(e){if(200===e.data.status){var n=[],r=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(a,l){var c,s,o,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a._id,s={label:a.role,value:a._id},n[l]=s,o="",(d=new Object).role_id=c,e.prev=6,e.next=9,k.a.get("/api/role-control-by-menu-role-id/".concat(t,"/").concat(a._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){o+=e.type_control+","}))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log(e.t0);case 14:d.value=o,r[l]=d;case 16:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({roles:n}),a.setState({role_ids:r})}}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:return e.prev=17,e.next=20,k.a.get("/api/menu-by-module-id/".concat(a.state.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.menu,value:e._id};t[a]=n})),a.setState({menus:t})}}));case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(17),console.log(e.t2);case 25:console.log(a.state.role_ids);case 26:case"end":return e.stop()}}),e,null,[[1,6],[9,14],[17,22]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({_id:t,dialogDeleteVisible:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/menu/".concat(a.state._id)).then((function(e){200===e.data.status?(a.notify("SUCCESS","Menu Deleted"),a.componentDidMount(),ce("Delete  Menu ID #"+a.state._id,a.props.module_id),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,_id:""})):a.notify("ERROR","Failed  Deleting Menu")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.onChangeModuleId=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({module_id:t}),e.prev=1,e.next=4,k.a.get("/api/role-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var n=[],r=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(a,l){var c,s,o,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a._id,s={label:a.role,value:a._id},n[l]=s,o="",(d=new Object).role_id=c,e.prev=6,e.next=9,k.a.get("/api/role-control-by-menu-role-id/".concat(t,"/").concat(a._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){o+=e.type_control+","}))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log(e.t0);case 14:d.value=o,r[l]=d;case 16:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,a){return e.apply(this,arguments)}}()),a.setState({roles:n}),a.setState({role_ids:r})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/menu-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.menu,value:e._id};t[a]=n})),a.setState({menus:t})}}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeMenu=function(e){a.setState({menu:e})},a.onChangeLink=function(e){a.setState({link:e})},a.onChangeIcon=function(e){a.setState({icon:e})},a.onChangeParentMenu=function(e){a.setState({parent_menu:e})},a.onChangeIsActive=function(e){a.setState({is_active:e})},a.onChangeRoleControl=function(e,t){if(""!==e){var n=a.state.role_ids,r=n.map((function(e){return e.role_id})).indexOf(t);void 0!==n[r]&&(n[r].value=e),a.setState({role_ids:n})}console.log(a.state.role_ids[t])},a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={menu:a.state.menu,link:a.state.link,icon:a.state.icon,is_active:a.state.is_active,module_id:a.state.module_id,parent_menu:a.state.parent_menu,role_ids:a.state.role_ids},""!==a.state._id&&null!==a.state._id&&void 0!==a.state._id){e.next=14;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/menu",t).then((function(e){200===e.data.status?(a.notify("SUCCESS","Menu Added"),ce("Insert  Menu ",a.props.module_id),window.location.reload(),a.setState({dialogVisible:!1,_id:"",menu:"",link:"",icon:"",module_id:"",parent_menu:"",is_active:!1,role_ids:[],roles:[]})):a.notify("ERROR","Failed")}));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0),a.notify("ERROR","Failed");case 12:e.next=25;break;case 14:return t.updated_by=a.state.created_by,console.log(t),e.prev=16,e.next=19,k.a.put("/api/menu/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.notify("SUCCESS","Menu Updated"),ce("Update  Menu ID #"+a.state._id,a.props.module_id),window.location.reload(),a.setState({dialogVisible:!1,_id:"",menu:"",link:"",icon:"",module_id:"",is_active:!1,parent_menu:"",role_ids:[],roles:[]})):a.notify("ERROR","Failed")}));case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1),a.notify("ERROR","Failed");case 25:case"end":return e.stop()}}),e,null,[[3,8],[16,21]])}))),a.loadRoleIdValue=function(e){var t=a.state.role_ids,n=t.map((function(e){return e.role_id})).indexOf(e);return void 0!==t[n]?t[n].value:""},a.exportXLS=function(){var e="All Menus per ".concat(H()(new Date,"dd-mm-yyyy")),t={Sheets:{data:We.utils.json_to_sheet(a.state.dataToExport)},SheetNames:["data"]},n=We.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});qe.saveAs(r,e+".xlsx")},a.state={_id:"",data:[],roles:[],menus:[],role_ids:[],modules:[],module_id:"",dialogVisible:!1,dialogDeleteVisible:!1,is_active:!1,menu:"",link:"",icon:"",parent_menu:"",created_by:Vn.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/menus").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={};n.No=t+1,n.ID=e._id,n.Menu=e.menu,n.Module=e.module,n.Link=e.link,n["Role Control"]=r.a.createElement("input",{type:"checkbox"}),a[t]=n})),t.setState({modules:e.data.data,dataToExport:a})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.module,value:e._id};a[t]=n})),t.setState({modules:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/menus/").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/role-by-module-id/".concat(t.module_id)).then((function(e){200===e.data.status&&(t.roles=e.data.data,e.data.data.map((function(e,t){})))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}()),console.log(this.state.data),e.prev=26,e.next=29,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=menu",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 29:e.next=34;break;case 31:e.prev=31,e.t3=e.catch(26),console.log(e.t3);case 34:ce("Access Menu Page",this.props.module_id);case 35:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21],[26,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Menus")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(qn,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Menu",width:"15%"},{label:"Module",width:"15%"},{label:"Link",width:"15%"},{label:"Role Controls"},{label:"is Active"},{label:"",width:"3%"}].map((function(e,t){return r.a.createElement("td",{width:e.width},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("strong",null,t.menu)),r.a.createElement("td",null,t.module),r.a.createElement("td",null,t.link),r.a.createElement("td",null,r.a.createElement(Un,{menu_id:t._id,module_id:t.module_id})),r.a.createElement("td",null,1===t.is_active?r.a.createElement("span",{style:{color:"green"}},"TRUE"):r.a.createElement("span",{style:{color:"grey"}},"FALSE")),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(zn,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))})))),r.a.createElement(y.l,{width:"600px",contentStyle:{height:"70vh"},id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Menu"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Menu",placeholder:"Menu",value:this.state.menu,onChange:this.onChangeMenu}),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module_id,menuItems:this.state.modules,onChange:this.onChangeModuleId}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Roles"),this.state.roles.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("span",null,r.a.createElement("b",null,t.label),r.a.createElement(y.A,{inline:!0,id:"selection-control-group-radios"+t.value,name:"role_control"+t.value+"[]",type:"checkbox",value:e.loadRoleIdValue(t.value),onChange:function(a){return e.onChangeRoleControl(a,t.value)},controls:[{label:"CREATE",value:"create"},{label:"READ",value:"read"},{label:"UPDATE",value:"update"},{label:"DELETE",value:"delete"}]})))})),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Link",placeholder:"Link starts with '/' ",value:this.state.link,onChange:this.onChangeLink}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Icon",placeholder:"e.g. help OR home OR save etc",value:this.state.icon,helpText:"see on https://material.io/resources/icons",onChange:this.onChangeIcon}),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Parent Menu",placeholder:"Parent Menu",value:this.state.parent_menu,menuItems:this.state.menus,onChange:this.onChangeParentMenu}),r.a.createElement(y.z,{id:"switch-lights",type:"switch",label:"is Active",name:"is_Active",onChange:this.onChangeIsActive,defaultChecked:this.state.is_active})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300})))}}]),t}(n.Component),Un=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/role-control-by-menu-module-id/".concat(a.props.menu_id,"/").concat(a.props.module_id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.state={data:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.data.map((function(e,t){return r.a.createElement("div",null,null!==e.type_controls?r.a.createElement("div",null,r.a.createElement("p",null,e.role,":"),r.a.createElement(y.A,{primary:!0,inline:!0,type:"checkbox",value:e.type_controls.toString(),controls:[{label:"CREATE",value:"create"},{label:"READ",value:"read"},{label:"UPDATE",value:"update"},{label:"DELETE",value:"delete"}]})):"")})))}}]),t}(n.Component),qn=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Menus")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Menu",width:"15%"},{label:"Module",width:"15%"},{label:"Link",width:"15%"},{label:"Role Controls"}].map((function(e,t){return r.a.createElement("td",{width:e.width},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("strong",null,e.menu)),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.link),r.a.createElement("td",null,r.a.createElement(Un,{menu_id:e._id,module_id:e.module_id})))}))))))}}]),t}(n.Component),Wn={routeProps:{path:"/control/menus",exact:!0,component:Bn},name:"Menus"},Yn=x.Session.get().payload,Xn=(new FormData,new FormData,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",module:"",module_short_name:"",link:"",directory_path:"",description:""}),a.setState({dialogVisible:!0})},a.onChangeLink=function(e){a.setState({link:e})},a.onChangeModule=function(e){a.setState({module:e})},a.onChangeModuleShort=function(e){a.setState({module_short_name:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules?key=".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={};n.No=a+1,n.ID=e._id,n.Module=e.module,n.Description=e.description,n.Icon=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:r.a.createElement("img",{width:"35vw",src:e.icon})}}),t[a]=n})),a.setState({data:e.data.data,dataToExport:t})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/module/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){e.icon;return a.setState({_id:e._id,module:e.module,module_short_name:e.module_short_name,link:e.link,directory_path:e.link,description:e.description,icon:e.icon}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/module/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,module:"",link:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={module:a.state.module,module_short_name:a.state.module_short_name,link:a.state.link,icon:a.state.icon,directory_path:a.state.link,description:a.state.description},""!==a.state._id){e.next=14;break}return n.created_by=a.state.created_by,e.prev=4,e.next=7,k.a.post("/api/module",n).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.addToast(t.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,module:"",link:"",description:"",icon:""})):a.addToast(t.data.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=23;break;case 14:return n.updated_by=a.state.created_by,e.prev=15,e.next=18,k.a.put("/api/module/".concat(a.state._id),n).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.addToast(t.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,module:"",link:"",description:"",icon:""})):a.addToast(t.data.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[4,9],[15,20]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLoad=function(e,t){a.setState({icon:t})},a.deleteFile=function(e){a.setState({icon:""})},a.exportXLS=function(){var e="All Modules per ".concat(H()(new Date,"dd-mm-yyyy")),t={Sheets:{data:We.utils.json_to_sheet(a.state.dataToExport)},SheetNames:["data"]},n=We.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});qe.saveAs(r,e+".xlsx")},a.state={toasts:[],_id:"",formdata:[],data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,module:"",link:"",description:"",module_short_name:"",icon:"",temp_avatar:"",created_by:Yn.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={};n.No=t+1,n.ID=e._id,n.Module=e.module,n.Description=e.description,n.Icon=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:r.a.createElement("img",{width:"35vw",src:e.icon})}}),a[t]=n})),t.setState({data:e.data.data,dataToExport:a})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=module",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:ce("Access Module Page",this.props.module_id);case 17:case"end":return e.stop()}}),e,this,[[0,5],[8,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Modules")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Gn,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Module",width:"8%"},{label:"Link",width:"10%"},{label:"Description",width:"35%"},{label:"Icon",width:"5%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.module),r.a.createElement("td",null,t.link),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement("img",{width:"35vw",src:t.icon})),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(zn,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Module"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module,onChange:this.onChangeModule}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Short Name",placeholder:"Short Name",value:this.state.module_short_name,onChange:this.onChangeModuleShort}),r.a.createElement(y.D,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Link",placeholder:"Link, Start with '/' ",value:this.state.link,onChange:this.onChangeLink}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription}),r.a.createElement("br",null),""!==this.state.icon?r.a.createElement("div",null,r.a.createElement("img",{src:""!==this.state.temp_avatar?this.state.temp_avatar:this.state.icon,width:"100vw"}),r.a.createElement("br",null),r.a.createElement(y.j,{className:"state-chip",label:"Remove",removable:!0,onClick:function(){return e.deleteFile(e.state.icon)}}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,""!==this.state.icon?r.a.createElement(y.j,{className:"state-chip",label:"Remove",removable:!0,onClick:function(){return e.deleteFile(e.state.icon)}}):"",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.p,{label:"Select Icon",id:"a-file-upload",accept:"image/*",name:"images",onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"}}))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component)),Gn=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Modules")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Module",width:"8%"},{label:"Link",width:"10%"},{label:"Description",width:"35%"},{label:"Icon",width:"5%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.link),r.a.createElement("td",null,e.description),r.a.createElement("td",null,r.a.createElement("img",{width:"35vw",src:e.icon})))}))))))}}]),t}(n.Component),Kn={routeProps:{path:"/control/modules",exact:!0,component:Xn},name:"Modules"},Jn=x.Session.get().payload,Qn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeModuleId=function(e){a.setState({module_id:e})},a.onChangeRole=function(e){a.setState({role:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/roles?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/role/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,role:e.role,description:e.description,module_id:e.module_id}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/role/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),ce("Delete Roles ID #"+a.state._id,a.props.module_id),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,role:"",description:"",module_id:"",_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={role:a.state.role,module_id:a.state.module_id,description:a.state.description},console.log(t),""!==a.state._id){e.next=14;break}return t.created_by=a.state.created_by,e.prev=4,e.next=7,k.a.post("/api/role",t).then((function(e){200===e.data.status?(ce("Insert Role ",a.props.module_id),a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,role:"",description:"",module_id:""})):a.addToast(e.data.message)}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=23;break;case 14:return t.updated_by=a.state.created_by,e.prev=15,e.next=18,k.a.put("/api/role/".concat(a.state._id),t).then((function(e){200===e.data.status?(ce("Update Role ID #"+a.state._id,a.props.module_id),a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,role:"",description:"",module_id:""})):a.addToast(e.data.message)}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[4,9],[15,20]])}))),a.setActivePage=function(e){a.setState({currentPage:e}),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.data.length/a.state.displayPerPage);a.setState({currentPage:e}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.data.length/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),window.scrollTo(0,a.tableData.current.offsetTop)},a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,role:"",module_id:"",description:"",created_by:Jn.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1,currentPage:1,displayPerPage:20},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var a=[];a[0]={label:"All Modules",value:"all"},e.data.data.map((function(e,t){var n={label:e.module,value:e._id};a[t+1]=n})),t.setState({modules:a})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/roles").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=role",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete),ce("Access Roles Page",this.props.module_id);case 29:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var n=[],l=this.state.currentPage,c=l+2,s=Math.ceil(this.state.data.length/this.state.displayPerPage),i=c>s?s:c,o=l-3;o<=i;o++)n[o-1]=o;var d=(this.state.currentPage-1)*this.state.displayPerPage,u=d+this.state.displayPerPage-1;return r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Roles")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement($n,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example",ref:this.tableData},r.a.createElement("table",{id:"tableData",className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Role",width:"8%"},{label:"Role for Module",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return a<=u&&a>=d?r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.module),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(zn,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-")):""})))),n.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),n.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Role"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Role",placeholder:"Role",value:this.state.role,onChange:this.onChangeRole}),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module_id,menuItems:this.state.modules,onChange:this.onChangeModuleId}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),$n=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Roles")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Role",width:"8%"},{label:"Role for Module",width:"10%"},{label:"Description",width:"35%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.role),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.description))}))))))}}]),t}(n.Component),Zn={routeProps:{path:"/control/roles",exact:!0,component:Qn},name:"Roles"},er=x.Session.get().payload,tr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0,username:"",password_hash:"",employee_id:"",user_roles:[],avatar_url:""})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeUserRoles=function(e){var t=a.state.roles.map((function(e){return e.value})).indexOf(e);a.setState({user_roles:[].concat(Object(we.a)(a.state.user_roles),[a.state.roles[t]])}),console.log(a.state.user_roles)},a.deleteRole=function(e){var t=a.state.user_roles,n=t.map((function(e){return e.value})).indexOf(e);n>-1&&t.splice(n,1),a.setState({user_roles:t}),console.log(a.state.user_roles)},a.onChangeUsername=function(e){a.setState({username:e})},a.onChangeIsActive=function(e){var t=e?1:0;a.setState({is_active:t})},a.onChangePassword=function(e){a.setState({password_hash:e})},a.onChangeEmployeeID=function(e){a.setState({employee_id:e})},a.selectUserType=function(e){console.log(e),a.setState({user_type:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/user/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,user_type:null!==e.client_id?"0":"1",username:e.username,employee_id:null!==e.client_id?e.client_id:e.employee_id,is_active:e.is_active,avatar_url:e.avatar_url}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/user-role/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.role+" - "+e.module,value:e.role_id};return t[a]=n,!1})),a.setState({user_roles:t})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:console.log(a.state.user_roles),a.setState({dialogVisible:!0});case 18:case"end":return e.stop()}}),e,null,[[0,5],[8,13]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/user/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={username:a.state.username,employee_id:a.state.employee_id,user_roles:a.state.user_roles,avatar_url:a.state.avatar_url,is_active:a.state.is_active},""!==a.state._id){e.next=14;break}return t.password_hash=a.state.password_hash,t.created_by=a.state.created_by,e.prev=4,e.next=7,k.a.post("/api/user",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,role:"",description:"",module_id:""})):a.addToast(e.data.message)}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=24;break;case 14:return a.state.edit_password&&(t.password_hash=a.state.password_hash),t.updated_by=a.state.created_by,e.prev=16,e.next=19,k.a.put("/api/user/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,_id:""})):a.addToast(e.data.message)}));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:case"end":return e.stop()}}),e,null,[[4,9],[16,21]])}))),a.handleLoad=function(e,t){a.setState({avatar_url:t}),console.log(t)},a.deleteFile=function(e){a.setState({avatar_url:"",formdata:{}})},a.setActivePage=function(e){a.setState({currentPage:e}),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.data.length/a.state.displayPerPage);a.setState({currentPage:e}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.data.length/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),window.scrollTo(0,a.tableData.current.offsetTop)},a.state={toasts:[],formdata:"",clients:[],employees:[],temp_avatar:"",edit_password:0,_id:"",data:[],modules:[],dialogVisible:!1,is_active:!1,username:"",password_hash:"",employee_id:"",user_roles:[],avatar_url:"",user_type:"1",created_by:er.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1,currentPage:1,displayPerPage:25},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/roles").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.role+" - "+e.module,value:e._id};a[t]=n})),t.setState({roles:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/employees-active").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.full_name+" - "+e.structure,value:e._id};a[t]=n})),t.setState({employees:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/clients-active").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.client_code+" - "+e.client_name,value:e._id};a[t]=n})),t.setState({clients:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:return e.prev=32,e.next=35,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=user",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 35:e.next=40;break;case 37:e.prev=37,e.t4=e.catch(32),console.log(e.t4);case 40:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete),ce("Access Users Page",this.props.module_id);case 45:case"end":return e.stop()}}),e,this,[[0,5],[8,13],[16,21],[24,29],[32,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var l=[],c=this.state.currentPage,s=c+2,i=Math.ceil(this.state.data.length/this.state.displayPerPage),o=s>i?i:s,d=c-3;d<=o;d++)l[d-1]=d;var u=(this.state.currentPage-1)*this.state.displayPerPage,m=u+this.state.displayPerPage-1;return r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Users")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(ar,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{onChange:this.search,placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example",ref:this.tableData},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt",overflowX:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Username",width:"8%"},{label:"Status",width:"5%"},{label:"Name",width:"10%"},{label:"Roles",width:"25%"},{label:"Email",width:"8%"},{label:"Phone No",width:"8%"},{label:"Avatar",width:"4%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return a<=m&&a>=u?r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.username," "),r.a.createElement("td",null," ",t.is_active?r.a.createElement("span",{className:"tag is-success"},r.a.createElement("i",{className:"fa fa-check-circle"}),"\xa0 Active"):r.a.createElement("span",{className:"tag is-danger"},r.a.createElement("i",{className:"fa fa-minus-circle"})," \xa0 Non Active")),r.a.createElement("td",null,null!==t.full_name?t.full_name:t.client_name),r.a.createElement("td",null,t.roles),r.a.createElement("td",null,null!==t.email?t.email:t.client_email),r.a.createElement("td",null,null!==t.client_phone_number?t.client_phone_number:t.phone_number," "),r.a.createElement("td",null,r.a.createElement(y.c,{src:t.avatar_url,width:"20vw"})),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(zn,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-")):""})))),l.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),l.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""),r.a.createElement(y.l,{contentStyle:{height:"70vh"},width:"600px",height:"100vh",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage User"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Username",placeholder:"Username",value:this.state.username,onChange:this.onChangeUsername}),""===this.state._id?r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Password",placeholder:"Password",type:"password",value:this.state.password,onChange:this.onChangePassword})):r.a.createElement(n.Fragment,null,r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",value:this.state.edit_password,onChange:function(){return e.setState({edit_password:!e.state.edit_password})}}),"\xa0Edit Password",this.state.edit_password?r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Password",placeholder:"Password",type:"password",value:this.state.password,onChange:this.onChangePassword}):r.a.createElement("br",null)),r.a.createElement("br",null),this.state.user_roles.map((function(t,a){var n;return r.a.createElement(y.j,(n={removable:!0,label:t.label},Object(C.a)(n,"removable",!0),Object(C.a)(n,"onClick",(function(){return e.deleteRole(t.value)})),n))})),r.a.createElement("br",null),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Role as ",placeholder:"Role as",dataValue:"value",dataLabel:"label",menuItems:this.state.roles,onChange:this.onChangeUserRoles}),r.a.createElement(y.A,{inline:!0,id:"selection-control-group-radios",name:"radio-example",type:"radio",label:"User Type",onChange:this.selectUserType,defaultValue:this.state.user_type,controls:[{label:"Employee",value:"1"},{label:"BPR/Customer",value:"0"}]}),"1"===this.state.user_type?r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Select Employee",placeholder:"Select Employee",value:this.state.employee_id,dataValue:"value",dataLabel:"label",menuItems:this.state.employees,onChange:this.onChangeEmployeeID}):r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Select BPR/Client",placeholder:"Select BPR/Client",dataValue:"value",dataLabel:"label",value:this.state.employee_id,menuItems:this.state.clients,onChange:this.onChangeEmployeeID}),""!==this.state.avatar_url?r.a.createElement("div",null,r.a.createElement("img",{src:""!==this.state.temp_avatar?this.state.temp_avatar:this.state.avatar_url,width:"100vw"}),r.a.createElement("br",null),r.a.createElement(y.j,{className:"state-chip",label:"remove",removable:!0,onClick:function(){return e.deleteFile(e.state.avatar_url)}}),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(y.p,{label:"Select Avatar",id:"a-file-upload",accept:"image/*",name:"images",onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"}})),r.a.createElement(y.z,{id:"switch-lights",type:"switch",label:"Active",name:"lights",defaultChecked:this.state.is_active,onChange:this.onChangeIsActive})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),ar=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Users")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Username",width:"8%"},{label:"Name",width:"10%"},{label:"Roles",width:"30%"},{label:"Email",width:"8%"},{label:"Phone No",width:"8%"},{label:"Avatar",width:"4%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.username),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.roles),r.a.createElement("td",null,null!==e.email?e.email:e.client_email),r.a.createElement("td",null,null!==e.client_phone_number?e.client_phone_number:e.phone_number," "),r.a.createElement("td",null,r.a.createElement(y.c,{src:e.avatar_url})))}))))))}}]),t}(n.Component),nr={routeProps:{path:"/control/users",exact:!0,component:tr},name:"Users"},rr=x.Session.get().payload,lr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeModuleId=function(e){a.setState({module_id:e})},a.onChangeTitle=function(e){a.setState({title:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/helps?key=".concat(t)).then((function(e){200===e.data.status&&(e.data.data.map((function(e,t){return a.state.collapse[t]=!0,!1})),a.setState({data:e.data.data}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/help/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,role:"",description:"",module_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={title:a.state.title,module_id:a.state.module_id,description:a.state.description},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/help",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,title:"",description:"",module_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/help/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,title:"",description:"",module_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.toggleLoadChild=function(e){var t=a.state.collapse;t[e]=!t[e],a.setState({collapse:t}),console.log(a.state.loadChild)},a.state={toasts:[],_id:"",data:[],collapse:[],editor:!0,modules:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",module_id:"",description:"",created_by:rr.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U()(".summernote").summernote({placeholder:"Add Description",height:"20vh"}),e.prev=1,e.next=4,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.module,value:e._id};a[t]=n})),t.setState({modules:a})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/helps").then((function(e){200===e.data.status&&(e.data.data.map((function(e,a){return t.state.collapse[a]=!0,!1})),t.setState({data:e.data.data}))}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:return console.log(this.state.modules),e.prev=18,e.next=21,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=help",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:ce("Access Help Page",this.props.module_id);case 27:case"end":return e.stop()}}),e,this,[[1,6],[9,14],[18,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.state.collapse,[]);t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/control/help/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Module Help")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(sr,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:8},"\xa0"),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12,style:{overflowX:"scroll"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Title",width:"8%"},{label:"Module",width:"10%"},{label:"For Role",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.module),r.a.createElement("td",null,t.roles),r.a.createElement("td",{style:{fontSize:"8pt"}},"  ",e.state.collapse[a]?r.a.createElement("a",{className:"button is-small is-primary",onClick:function(){return e.toggleLoadChild(a)}},"Show detail"):r.a.createElement(n.Fragment,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("a",{className:"button is-small is-info",style:{marginTop:"1vh"},onClick:function(){return e.toggleLoadChild(a)}},"Hide detail"))),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(cr,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))})))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),cr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this;this.props.is_reply_required;return e=[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/control/help/form?help_id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return t.setDelete(t.props.id)}})],r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:e,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),sr=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Helps")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Title",width:"8%"},{label:"Module",width:"10%"},{label:"For Role",width:"10%"},{label:"Description",width:"35%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.roles),r.a.createElement("td",{style:{fontSize:"8pt"}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))}))))))}}]),t}(n.Component),ir=x.Session.get().payload,or=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({key:t}),e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id-total/".concat(a.state.module_id,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:a.setState({key:t,currentPage:1});case 18:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){console.log(e),a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({currentPage:t});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status&&200===e.data.status){var n=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).NO=a+1,r.Time=H()(t.timestamp,"dd/mm/yyyy, HH:MM:ss"),r.User=null!==t.full_name?t.full_name:t.client_name,r.Activity=t.log,r.IP=t.from_ip,r.UserAgent=t.user_agent,n.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=n,a.setState({dataToExport:t})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",n="All Logs Control System  per ".concat(H()(new Date,"dd-mm-yyyy")),r=We.utils.json_to_sheet(t),l={Sheets:{data:r},SheetNames:["data"]},c=We.write(l,{bookType:"xlsx",type:"array"}),s=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(s,n+".xlsx");case 18:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],toasts:[],module_id:"",total_data:0,_id:"",isLoading:!0,dialogVisible:!1,dialogDeleteVisible:!1,category:"",description:"",created_by:ir.userId,key:"",asc:1,currentPage:1,displayPerPage:25},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id,n.setState({module_id:t})}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/logs-by-module-id-total/".concat(t)).then((function(e){200===e.data.status&&n.setState({total_data:e.data.data[0].total})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/logs-by-module-id/".concat(t,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:ce("Access Logs Page",t);case 27:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),t.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var a=[],n=this.state.currentPage,l=n+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=n-3;i<=s;i++)a[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return r.a.createElement("div",{style:{marginBottom:"8%"}},r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Logs"),r.a.createElement(y.i,{size:7}),r.a.createElement(y.i,{size:1},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(dr,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role}))),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.length>0?this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))),r.a.createElement(y.i,{size:8}),r.a.createElement(y.i,{size:4,style:{alignItems:"right"}},a.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),a.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))}}]),t}(n.Component),dr=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.length>0?this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))))}}]),t}(n.Component),ur=x.Session.get().payload,mr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),""===t){e.next=12;break}return e.prev=2,e.next=5,k.a.get("/api/announcements?key=".concat(t)).then((function(e){200===e.data.status&&(e.data.data.map((function(e,t){return a.state.collapse[t]=!0,!1})),a.setState({data:e.data.data}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,k.a.get("/api/announcements").then((function(e){200===e.data.status&&(e.data.data.map((function(e,t){return a.state.collapse[t]=!0,!1})),a.setState({data:e.data.data}))}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,7],[12,17]])})));return function(t){return e.apply(this,arguments)}}(),a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeModuleId=function(e){a.setState({module_id:e})},a.onChangeTitle=function(e){a.setState({title:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/announcement/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,role:"",description:"",module_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.toggleLoadChild=function(e){var t=a.state.collapse;t[e]=!t[e],a.setState({collapse:t}),console.log(a.state.loadChild)},a.state={toasts:[],_id:"",data:[],collapse:[],editor:!0,modules:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",module_id:"",description:"",created_by:ur.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U()(".summernote").summernote({placeholder:"Add Description",height:"20vh"}),e.prev=1,e.next=4,k.a.get("/api/announcements").then((function(e){200===e.data.status&&(e.data.data.map((function(e,a){return t.state.collapse[a]=!0,!1})),t.setState({data:e.data.data}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return console.log(this.props.role_id),e.prev=10,e.next=13,k.a.post("/api/role-control-by-link-role-id",{link:"/control?tab_name=announcements",role_id:this.props.role_id}).then((function(e){200===e.data.status&&(t.setState({role_controls:e.data.data}),e.data.data.map((function(e,a){"read"===e.type_control&&t.setState({role_read:!0}),"create"===e.type_control&&t.setState({role_create:!0}),"update"===e.type_control&&t.setState({role_update:!0}),"delete"===e.type_control&&t.setState({role_delete:!0})})))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete),ce("Access Announcement Page",this.props.module_id);case 23:case"end":return e.stop()}}),e,this,[[1,6],[10,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.state.collapse,[]);t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/control/announcements/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,null,r.a.createElement("h4",{className:"md-cell md-cell--12"},"Announcements")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(fr,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:8},"\xa0"),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12,style:{overflowX:"scroll"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Title",width:"8%"},{label:"Module",width:"10%"},{label:"Showing Periode",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.length>0?r.a.createElement(n.Fragment,null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.module),r.a.createElement("td",null,H()(t.start_date,"dd mmm yyyy")+" - "+H()(t.end_date,"dd mmm yyyy")),r.a.createElement("td",{style:{fontSize:"8pt"}},"  ",e.state.collapse[a]?r.a.createElement("a",{className:"button is-small is-primary",onClick:function(){return e.toggleLoadChild(a)}},"Show detail"):r.a.createElement(n.Fragment,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),r.a.createElement("a",{className:"button is-small is-info",style:{marginTop:"1vh"},onClick:function(){return e.toggleLoadChild(a)}},"Hide detail"))),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(pr,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))}))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty ... ")))))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),pr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this;this.props.is_reply_required;return e=[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/control/announcements/form?announcement_id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return t.setDelete(t.props.id)}})],r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:e,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),fr=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",null,"All Announcements")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Title",width:"8%"},{label:"Module",width:"10%"},{label:"For Role",width:"10%"},{label:"Description",width:"35%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.module),r.a.createElement("td",null,H()(e.start_date,"dd mmm yyyy")+" - "+H()(e.end_date,"dd mmm yyyy")),r.a.createElement("td",{style:{fontSize:"8pt"}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))}))))))}}]),t}(n.Component),hr=x.Session.get().payload,gr={routeProps:{path:"/control",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.state={_id:"",role:"",data:[],contain:"",list_contain:"",module_id:"",announcements:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id,n.setState({module_id:t})}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(hr.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return e.prev=19,e.next=22,k.a.get("/api/announcements-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),n.setState({announcements:t})}}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[19,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.module_id,a=F.a.parse(window.location.search);console.log(a);var l=void 0!==a.tab_name&&""!==a.tab_name&&null!==a.tab_name?a.tab_name:"module",c=[{color:"pink",action:"module",icon:"fa fa-ticket",tooltip:"Modules"},{color:"lightblue",action:"menu",icon:"fa fa-ticket",tooltip:"Menus"},{color:"darkblue",action:"role",icon:"fa fa-ticket",tooltip:"Roles",badge:this.state.total_approve},{color:"#37737a",action:"user",icon:"fa fa-ticket",tooltip:"Users",badge:this.state.total_queue},{color:"#3bc3f5",action:"help",icon:"fa fa-ticket",tooltip:"Module Help"},{color:"#6653f5",action:"announcements",icon:"fa fa-ticket",tooltip:"Announcements"},{color:"lightgreen",action:"logs",icon:"fa fa-ticket",tooltip:"Logs"}];return r.a.createElement("div",null,null===hr.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Hi, ",hr.username,"  ",r.a.createElement("p",null,e.state.role)),r.a.createElement(y.i,{size:12},e.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),e.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,c.map((function(e,t){return l===e.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement(_.a,{to:"/control?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):""):r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,padding:"10px 5px 0 0 "}},r.a.createElement(_.a,{to:"/control?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):"")}))))),r.a.createElement(y.i,{size:12},function(){switch(l){case"menu":return r.a.createElement(Bn,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}});case"module":return r.a.createElement(Xn,{role:e.props.role,role_id:e.props.role_id,module_id:t,showDetail:function(t){return e.showDetail(t)}});case"role":return r.a.createElement(Qn,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}});case"user":return r.a.createElement(tr,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}});case"help":return r.a.createElement(lr,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}});case"logs":return r.a.createElement(or,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}});case"announcements":return r.a.createElement(mr,{role:e.props.role,role_id:e.props.role_id,module_id:e.state.module_id,showDetail:function(t){return e.showDetail(t)}})}}(),void 0)))}}]),t}(n.Component)},name:"Container"},br={routeProps:{path:"/control/help",exact:!0,component:lr},name:"Help"},Er=x.Session.get().payload,_r={routeProps:{path:"/control/help/form",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeModuleId=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({module_id:t}),e.prev=1,e.next=4,k.a.get("/api/role-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.role,value:e._id};t[a]=n})),a.setState({roles:t})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:console.log(a.state.roles);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeRoleId=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.roles.map((function(e){return e.value})).indexOf(t),a.setState({role_id:[].concat(Object(we.a)(a.state.role_id),[a.state.roles[n]])});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeTitle=function(e){a.setState({title:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.deleteRole=function(e){var t=a.state.role_id,n=t.map((function(e){return e.value})).indexOf(e);n>-1&&t.splice(n,1),a.setState({role_id:t}),console.log(a.state.role_id)},a.save=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.document.getElementsByClassName("note-editable")[0],n={title:a.state.title,module_id:a.state.module_id,description:t.innerHTML,role_id:a.state.role_id},""!==a.state._id&&void 0!==a.state._id&&null!==a.state._id){e.next=14;break}return n.created_by=a.state.created_by,e.prev=4,e.next=7,k.a.post("/api/help",n).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,title:"",description:"",module_id:"",role_id:[]}),window.history.go(-1)):a.addToast(e.data.message)}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=23;break;case 14:return n.updated_by=a.state.created_by,e.prev=15,e.next=18,k.a.put("/api/help/".concat(a.state._id),n).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState(Object(C.a)({dialogVisible:!a.state.dialogVisible,title:"",role_id:"",description:"",module_id:""},"role_id",[])),window.history.go(-1)):a.addToast(e.data.message)}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[4,9],[15,20]])}))),a.state={toasts:[],_id:"",data:[],editor:!0,modules:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",module_id:"",role_id:[],description:"",created_by:Er.userId,roles:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.help_id}),U()(".summernote").summernote({placeholder:"Add Description",height:"20vh"}),e.prev=3,e.next=6,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.module,value:e._id};t[a]=n})),a.setState({modules:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:if(console.log(this.state._id),""===this.state._id||null===this.state._id){e.next=21;break}return e.prev=13,e.next=16,k.a.get("/api/help/".concat(this.state._id)).then(function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.data.status){e.next=21;break}if(n.data.data.map((function(e,t){return a.setState({module_id:e.module_id,title:e.title,description:e.description}),!1})),window.document.getElementsByClassName("note-editable")[0].innerHTML=a.state.description,""===a.state.module_id){e.next=13;break}return e.prev=5,e.next=8,k.a.get("/api/role-by-module-id/".concat(a.state.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.role,value:e._id};t[a]=n})),a.setState({roles:t})}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return e.prev=13,e.next=16,k.a.get("/api/help-role-by-help-id/".concat(t.help_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.role,value:e.role_id};t[a]=n})),a.setState({role_id:t})}}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[5,10],[13,18]])})));return function(t){return e.apply(this,arguments)}}());case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,this,[[3,8],[13,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"animated fadeInRightBig"},r.a.createElement(y.r,null,r.a.createElement(y.F,{title:r.a.createElement("b",null,"Form Module Help"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Title",placeholder:"Title",value:this.state.title,onChange:this.onChangeTitle}),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module_id,menuItems:this.state.modules,onChange:this.onChangeModuleId}),r.a.createElement("br",null),r.a.createElement("br",null),null!==this.state.role_id&&void 0!==this.state.role_id?this.state.role_id.map((function(t,a){return r.a.createElement(y.j,{removable:!0,label:t.label,onClick:function(){return e.deleteRole(t.value)}})})):"",r.a.createElement("br",null),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"For Role",placeholder:"For Role",value:this.state.role_id,menuItems:this.state.roles,onChange:this.onChangeRoleId}),this.state.editor?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null)):"",r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))),r.a.createElement(y.r,null,r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")))}}]),t}(n.Component)},name:"Form"},yr=x.Session.get().payload,vr={routeProps:{path:"/control/announcements/form",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeModuleId=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({module_id:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStartDate=function(e){a.setState({start_date:H()(e,"yyyy-mm-dd")})},a.onChangeEndDate=function(e){a.setState({end_date:H()(e,"yyyy-mm-dd")})},a.onChangeTitle=function(e){a.setState({title:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.save=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.document.getElementsByClassName("note-editable")[0],n={title:a.state.title,module_id:a.state.module_id,description:t.innerHTML,start_date:H()(a.state.start_date,"yyyy-mm-dd"),end_date:H()(a.state.end_date,"yyyy-mm-dd")},""!==a.state._id&&void 0!==a.state._id&&null!==a.state._id){e.next=14;break}return n.created_by=a.state.created_by,e.prev=4,e.next=7,k.a.post("/api/announcement",n).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,title:"",description:"",module_id:"",start_date:"",end_date:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=23;break;case 14:return n.updated_by=a.state.created_by,e.prev=15,e.next=18,k.a.put("/api/announcement/".concat(a.state._id),n).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,title:"",description:"",module_id:"",start_date:"",end_date:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[4,9],[15,20]])}))),a.state={toasts:[],_id:"",data:[],editor:!0,modules:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",module_id:"",role_id:[],description:"",created_by:yr.userId,start_date:"",end_date:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.announcement_id}),U()(".summernote").summernote({placeholder:"Add Description",height:"20vh"}),e.prev=3,e.next=6,k.a.get("/api/modules").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.module,value:e._id};t[a]=n})),a.setState({modules:t})}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:if(console.log(this.state._id),""===this.state._id||null===this.state._id){e.next=21;break}return e.prev=13,e.next=16,k.a.get("/api/announcement/".concat(this.state._id)).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status&&(t.data.data.map((function(e,t){return a.setState({module_id:e.module_id,start_date:H()(e.start_date,"yyyy-mm-dd"),end_date:H()(e.end_date,"yyyy-mm-dd"),title:e.title,description:e.description}),!1})),window.document.getElementsByClassName("note-editable")[0].innerHTML=a.state.description);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,this,[[3,8],[13,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"animated fadeInRightBig"},r.a.createElement(y.r,null,r.a.createElement(y.F,{title:r.a.createElement("b",null,"Form Announcements"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Title",placeholder:"Title",value:this.state.title,onChange:this.onChangeTitle}),r.a.createElement(y.y,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module_id,menuItems:this.state.modules,onChange:this.onChangeModuleId}),r.a.createElement(y.k,{id:"appointment-date-portrait",label:"Start Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",value:this.state.start_date,onChange:this.onChangeStartDate}),r.a.createElement(y.k,{id:"appointment-date-landscape",label:"End Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",value:this.state.end_date,onChange:this.onChangeEndDate}),this.state.editor?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"summernote"},this.state.description),r.a.createElement("br",null)):"",r.a.createElement("hr",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))))}}]),t}(n.Component)},name:"Form"},kr={routeProps:{path:"/control/setting/profile",exact:!0,component:V},name:"Profile"},xr={routeProps:{path:"/control/setting/preferences",exact:!0,component:q},name:"Preferences"},wr={routeProps:{path:"/control/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"},Sr={routeProps:{path:"/control?tab_name=log",exact:!0,component:or},name:"Logs"},Pr={routeProps:{path:"/control?tab_name=announcements",exact:!0,component:mr},name:"Announcements"},Cr=x.Session.get().payload,Nr=[Wn,Zn,Kn,nr,gr,br,_r,kr,wr,xr,vr,Sr,Pr,{routeProps:{path:"/control/notifications",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a.setState({module_id:t}),r=F.a.parse(window.location.search),a.setState({_id:r.id}),e.prev=13,e.next=16,k.a.get("/api/notifications-per-user-total/".concat(Cr.userId,"?displayPerPage=",0,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/notifications-per-user/".concat(Cr.userId,"?displayPerPage=").concat(a.state.displayPerPage,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,null,[[2,7],[13,18],[21,26]])}))),a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentPage+1,n=a.state.displayPerPage*t,e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(Cr.userId,"?displayPerPage=").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.setState({currentPage:t,totalShowed:n});case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress",currentPage:1,displayPerPage:25,totalShowed:0,isLoading:!0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===Cr.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ... ")))):r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(t,a){return r.a.createElement(_.a,{to:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:t.avatar_url}),primaryText:r.a.createElement(n.Fragment,null," ",r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name)," \xa0 ",0===t.is_read?r.a.createElement("span",{className:"tag ",style:{backgroundColor:"#cae7fa"}},r.a.createElement("b",null,"UNREAD")):""," "),secondaryText:r.a.createElement(n.Fragment,null,"  ",t.notification," \xa0 ",r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))),this.state.totalShowed<this.state.total_data?r.a.createElement("a",{onClick:this.loadMore},r.a.createElement("h4",null,"Load More ... ")):"")))}}]),t}(n.Component)},name:"Notifications"}],Or=x.Session.get().payload,Dr=[],jr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,position:"left",role_id:"",module_title:a.props.module_title,avatar_url:""},a.openDrawerLeft=function(){a.setState({visible:!0,position:"left"})},a.closeDrawer=function(){a.setState({visible:!1})},a.handleVisibility=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title="Control System PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/menu-by-module-link/".concat(t[3])).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),Dr=t}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user/".concat(Or.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({avatar_url:e.avatar_url})}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return a="",t=window.location.href.split("/"),e.prev=20,e.next=23,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a=e._id,!1}))}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.error("Data Not Loaded ",e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/user-role/".concat(a,"/").concat(Or.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return console.log(this.state.role_id),e.prev=37,e.next=40,k.a.get("/api/ccs-notifications-per-user/".concat(Or.userId)).then((function(e){200===e.data.status&&n.setState({notifications:e.data.data})}));case 40:e.next=45;break;case 42:e.prev=42,e.t4=e.catch(37),console.log(e.t4);case 45:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[20,25],[28,33],[37,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.position,l="left"===n,c=r.a.createElement(y.d,{icon:!0,onClick:this.closeDrawer},l?"arrow_back":"close");return""===Or.userId||null===Or.userId||void 0===Or.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,colored:!0,nav:r.a.createElement("a",{href:"/",style:{color:"#fff"}},r.a.createElement(y.d,{icon:!0},"home")),actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})],title:this.state.module_title,style:{backgroundColor:this.props.bg_color,color:"white"}}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,Nr.map((function(t,a){return r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role,role_id:e.state.role_id})}})})))),r.a.createElement(y.m,{id:"simple-drawer-example",type:y.m.DrawerTypes.TEMPORARY,visible:a,position:n,onVisibilityChange:this.handleVisibility,navItems:Dr,header:r.a.createElement(y.F,{nav:l?r.a.createElement(y.d,{icon:!0,onClick:function(){return window.location.href="/"}},"home"):c,actions:l?c:null,className:"md-divider-border md-divider-border--bottom"})})))}}]),t}(n.Component),Tr={routeProps:{path:"/control",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(jr,{module_title:"Control System",bg_color:"#3f51b5"})}}]),t}(n.Component)},name:"Control System"},Ir=x.Session.get().payload,Rr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).showForm=function(){a.setState({dialogVisible:!0})},a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=11;break}return e.prev=1,e.next=4,k.a.get("/api/employees?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.get("/api/employees").then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/employee/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){a.setState({currentPage:e})},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.data.length/a.state.displayPerPage);a.setState({currentPage:e})},a.setPageStart=function(){a.setState({currentPage:1})},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.data.length/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n})},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t})},a.state={toasts:[],data:[],status:[],structures:[],dialogDeleteVisible:!1,dialogVisible:!1,full_name:"",nick_name:"",structure_id:"",role_create:!1,role_read:!1,role_update:!1,role_delete:!1,asc:1,currentPage:1,displayPerPage:25},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(Ir.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return console.log(this.state.role_id),e.prev=19,e.next=22,k.a.get("/api/employees").then((function(e){200===e.data.status&&n.setState({data:e.data.data})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:return e.prev=27,e.next=30,k.a.post("/api/role-control-by-link-role-id",{link:"/employees?tab_name=employees",role_id:this.state.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[19,24],[27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),t.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var a=[],n=this.state.currentPage,l=n+2,c=Math.ceil(this.state.data.length/this.state.displayPerPage),s=l>c?c:l,i=n-3;i<=s;i++)a[i-1]=i;var o=(this.state.currentPage-1)*this.state.displayPerPage,d=o+this.state.displayPerPage-1;return r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/employees/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"All Employees")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:11}),r.a.createElement(y.i,{size:1,style:{alignItems:"right"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Ar,{ref:function(t){return e.componentRef=t},data:this.state.data})))),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Name",width:"20%",sorting:"full_name"},{label:"Structure",width:"15%",sorting:"structure_id"},{label:"Phone No",width:"15%"},{label:"Email",width:"15%"},{label:"Join Date",width:"15%",sorting:"join_date"},{label:"Status",width:"5%"},{label:"",width:"2%"}].map((function(t,a){return null!==t.sorting&&""!==t.sorting&&void 0!==t.sorting?r.a.createElement("td",{width:t.width},t.label," \xa0 ",r.a.createElement("a",{onClick:function(){return e.setSorting(t.sorting)}},r.a.createElement("i",{className:"fa fa-sort"}))," "):r.a.createElement("td",{width:t.width},t.label," ")}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return a<=d&&a>=o?r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("strong",null,t.full_name)),r.a.createElement("td",null,t.structure),r.a.createElement("td",null,t.phone_number),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.join_date>"1971-01-01"?H()(t.join_date,"dd mmm yyyy"):""),r.a.createElement("td",null," ",1===t.status_id?r.a.createElement("span",{className:"tag is-success"},r.a.createElement("i",{className:"fa fa-check-circle"}),"\xa0 ",t.status):r.a.createElement("span",{className:"tag is-danger"},r.a.createElement("i",{className:"fa fa-minus-circle"})," \xa0 ",t.status," ")),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(Mr,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-")):""})))),a.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),a.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"",r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:t,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300})))}}]),t}(n.Component),Mr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/employees/form?id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center",marginTop:"0em"}}," more_vert")}}]),t}(n.Component),Ar=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Name",width:"20%"},{label:"Structure",width:"15%"},{label:"Phone No",width:"15%"},{label:"Email",width:"15%"},{label:"Join Date",width:"15%"},{label:"Status",width:"5%"}].map((function(e,t){return r.a.createElement("td",{width:e.width},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("strong",null,e.full_name)),r.a.createElement("td",null,e.structure),r.a.createElement("td",null,e.phone_number),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.join_date>"1971-01-01"?H()(e.join_date,"dd mmm yyyy"):""),r.a.createElement("td",null,e.status))}))))))}}]),t}(n.Component),Fr={routeProps:{path:"/employees/employees",exact:!0,component:Rr},name:"Employees"},Lr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center",marginTop:"0em"}}," more_vert")}}]),t}(n.Component),Hr=x.Session.get().payload,zr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",status:"",description:"",dialogVisible:!0})},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/employee-status?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/employee-status/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,status:e.status,description:e.description}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/employee-status/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,status:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={status:a.state.status,description:a.state.description},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/employee-status",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/employee-status/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",description:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,module:"",link:"",description:"",module_short_name:"",created_by:Hr.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(Hr.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return console.log(this.state.role_id),e.prev=19,e.next=22,k.a.get("/api/employee-status").then((function(e){200===e.data.status&&n.setState({data:e.data.data})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:return e.prev=27,e.next=30,k.a.post("/api/role-control-by-link-role-id",{link:"/employees?tab_name=status",role_id:this.state.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete);case 39:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[19,24],[27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Status"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Status",width:"8%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(Lr,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Status"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status,onChange:this.onChangeStatus}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),Vr={routeProps:{path:"/employees/Status",exact:!0,component:zr},name:"Status"},Br=x.Session.get().payload,Ur={routeProps:{path:"/employees/report",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeLink=function(e){a.setState({link:e})},a.onChangeModule=function(e){a.setState({module:e})},a.onChangeModuleShort=function(e){a.setState({module_short_name:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(e){alert(e)},a.setDelete=function(e){alert(e)},a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={module:a.state.module,module_short_name:a.state.module_short_name,link:a.state.link,directory_path:a.state.link,description:a.state.description},""!==a.state._id){e.next=11;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/module",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,module:"",link:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,module:"",link:"",description:"",module_short_name:"",created_by:Br.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/employees").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Report"),r.a.createElement(y.i,{size:4},r.a.createElement(y.d,{raised:!0,primary:!0,iconClassName:"fa fa-plus-circle ",onClick:this.showForm},"Add")),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Module",width:"8%"},{label:"Link",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.module),r.a.createElement("td",null,e.link),r.a.createElement("td",null,e.description))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Module"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Module",placeholder:"Module",value:this.state.module,onChange:this.onChangeModule}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Short Name",placeholder:"Short Name",value:this.state.module_short_name,onChange:this.onChangeModuleShort}),r.a.createElement(y.D,{style:{width:"400px"},id:"simple-action-dialog-field",label:"Link",placeholder:"Link, Start with '/' ",value:this.state.link,onChange:this.onChangeLink}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component)},name:"Report"},qr=x.Session.get().payload,Wr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",status:"",description:"",dialogVisible:!0})},a.onChangeStatus=function(e){a.setState({structure:e})},a.onChangeLevel=function(e){a.setState({level:e})},a.onChangeparentId=function(e){a.setState({parent_id:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/employee-structures?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/employee-structure/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,structure:e.structure,level:e.level,description:e.description,parent_id:e.parent_id}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({dialogVisible:!0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/employee-structure/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!a.state.dialogDeleteVisible,status:"",level:"",parent_id:"",description:"",_id:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={structure:a.state.structure,level:a.state.level,description:a.state.description,parent_id:a.state.parent_id},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/employee-structure",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",level:"",parent_id:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/employee-structure/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,status:"",level:"",parent_id:"",description:"",_id:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],structures:[],_id:"",data:[],modules:[],dialogVisible:!1,structure:"",level:"",description:"",parent_id:"",created_by:qr.userId,role_create:!1,role_read:!1,role_update:!1,role_delete:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(t,"/").concat(qr.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return console.log(this.state.role_id),e.prev=19,e.next=22,k.a.get("/api/employee-structures").then((function(e){if(200===e.data.status){n.setState({data:e.data.data});var t=[];e.data.data.map((function(e,a){var n={label:e.structure+" (level "+e.level+")",value:e._id};return t[a]=n,!1})),n.setState({structures:t})}}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:return e.prev=27,e.next=30,k.a.post("/api/role-control-by-link-role-id",{link:"/employees?tab_name=structure",role_id:this.state.role_id}).then((function(e){200===e.data.status&&(n.setState({role_controls:e.data.data}),e.data.data.map((function(e,t){"read"===e.type_control&&n.setState({role_read:!0}),"create"===e.type_control&&n.setState({role_create:!0}),"update"===e.type_control&&n.setState({role_update:!0}),"delete"===e.type_control&&n.setState({role_delete:!0})})))}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:console.log(this.state.role_create),console.log(this.state.role_read),console.log(this.state.role_update),console.log(this.state.role_delete);case 39:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[19,24],[27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}});var a=[];return a.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),a.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}}),r.a.createElement("div",null,this.state.role_create?r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h4",{className:"md-cell md-cell--12"},"Structures"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Structure",width:"8%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.structure),r.a.createElement("td",null,t.description),r.a.createElement("td",null,e.state.role_delete&&e.state.role_update?r.a.createElement(Lr,{id:t._id,setUpdate:function(t){return e.setUpdate(t)},setDelete:function(t){return e.setDelete(t)}}):"-"))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Structure"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Structure Name",placeholder:"Structure Name",value:this.state.structure,onChange:this.onChangeStatus}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Level",placeholder:"Level",value:this.state.level,onChange:this.onChangeLevel}),r.a.createElement(y.y,{id:"select-field-2",value:this.state.parent_id,placeholder:"Parent Structure",menuItems:this.state.structures,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.TOP},onChange:this.onChangeparentId,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:a,title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component),Yr=x.Session.get().payload,Xr={routeProps:{path:"/employees",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:"",role:"",role_id:"",data:[],contain:"",announcements:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(Yr.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return console.log(this.state.role_id),e.prev=20,e.next=23,k.a.get("/api/announcements-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),n.setState({announcements:t})}}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[20,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=F.a.parse(window.location.search);console.log(t);var a=void 0!==t.tab_name?t.tab_name:"employees",l=[{color:"pink",action:"employees",icon:"fa fa-ticket",tooltip:"Employees"},{color:"lightblue",action:"status",icon:"fa fa-ticket",tooltip:"Status"},{color:"lightgreen",action:"structures",icon:"fa fa-ticket",tooltip:"Structures"}];return r.a.createElement("div",null,null===Yr.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Hi, ",Yr.username,"  ",r.a.createElement("p",null,e.state.role)),r.a.createElement(y.i,{size:12},e.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),e.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,l.map((function(e,t){return a===e.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement(_.a,{to:"/employees?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):""):r.a.createElement("li",{style:{borderBottom:"solid 3px "+e.color,padding:"10px 5px 0 0 "}},r.a.createElement(_.a,{to:"/employees?tab_name="+e.action},e.tooltip," "),void 0!==e.badge&&null!==e.badge?r.a.createElement("span",{className:"tag ",style:{backgroundColor:e.color,color:"white"}},e.badge):"")}))))),r.a.createElement(y.i,{size:12},function(){switch(a){case"employees":return r.a.createElement(Rr,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}});case"status":return r.a.createElement(zr,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}});case"structures":return r.a.createElement(Wr,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}});default:return r.a.createElement(Rr,{role:e.props.role,role_id:e.state.role_id,showDetail:function(t){return e.showDetail(t)}})}}())))}}]),t}(n.Component)},name:"Container"},Gr={routeProps:{path:"/employees/setting/preferences",exact:!0,component:q},name:"Preferences"},Kr={routeProps:{path:"/employees/setting/profile",exact:!0,component:V},name:"Profile"},Jr={routeProps:{path:"/employees/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"},Qr=x.Session.get().payload,$r={routeProps:{path:"/employees/form",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({dialogVisible:!0})},a.onChangeStructureId=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({structure_id:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeFullName=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({full_name:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeNickName=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({nick_name:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangePhoneNumber=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({phone_number:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEmail=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({email:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeStatusId=function(e){a.setState({status_id:e})},a.onChangeJoinDate=function(e){a.setState({join_date:H()(e,"yyyy-mm-dd")})},a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={full_name:a.state.full_name,nick_name:a.state.nick_name,structure_id:a.state.structure_id,join_date:a.state.join_date,phone_number:a.state.phone_number,email:a.state.email,status_id:a.state.status_id},""!==a.state._id&&null!==a.state._id&&void 0!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/employee",t).then((function(e){200===e.data.status?(a.setState({full_name:"",nick_name:"",structure_id:"",join_date:"",phone_number:"",email:"",status_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.updated_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/employee/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.setState({full_name:"",nick_name:"",structure_id:"",join_date:"",phone_number:"",email:"",status_id:""}),window.history.go(-1)):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],editor:!0,status:[],structures:[],dialogVisible:!1,dialogDeleteVisible:!1,title:"",module_id:"",role_id:[],description:"",created_by:Qr.userId,roles:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.id}),e.prev=2,e.next=5,k.a.get("/api/employee-structures").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.structure,value:e._id};t[a]=n})),a.setState({structures:t})}}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/employee-status").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.status,value:e._id};t[a]=n})),a.setState({status:t})}}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:if(""===this.state._id){e.next=27;break}return e.prev=19,e.next=22,k.a.get("/api/employee/".concat(this.state._id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,full_name:e.full_name,nick_name:e.nick_name,structure_id:e.structure_id,join_date:H()(e.join_date,"yyyy-mm-dd"),phone_number:e.phone_number,email:e.email,status_id:e.status_id}),!1}))}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[19,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.F,{title:r.a.createElement("b",null,"Form Employee"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Full Name",placeholder:"Full Name",value:this.state.full_name,onChange:this.onChangeFullName}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Nick Name",placeholder:"Nick Name",value:this.state.nick_name,onChange:this.onChangeNickName}),r.a.createElement(y.y,{className:"md-cell md-cell--4",id:"simple-action-dialog-field",label:"Structure Name",placeholder:"Structure Name",value:this.state.structure_id,menuItems:this.state.structures,onChange:this.onChangeStructureId}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Phone Number",placeholder:"Phone Number",value:this.state.phone_number,onChange:this.onChangePhoneNumber}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Email",placeholder:"Email",value:this.state.email,onChange:this.onChangeEmail}),r.a.createElement(y.k,{id:"appointment-date-landscape",label:"Join date",className:"md-cell",displayMode:"landscape",value:this.state.join_date,onChange:this.onChangeJoinDate}),r.a.createElement(y.y,{className:"md-cell md-cell--4",id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status_id,menuItems:this.state.status,onChange:this.onChangeStatusId}),r.a.createElement("hr",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")))))}}]),t}(n.Component)},name:"Form"},Zr=x.Session.get().payload,el=[Fr,Vr,Ur,Xr,Gr,Kr,Jr,$r,{routeProps:{path:"/employees/notifications",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a.setState({module_id:t}),r=F.a.parse(window.location.search),a.setState({_id:r.id}),e.prev=13,e.next=16,k.a.get("/api/notifications-per-user-total/".concat(Zr.userId,"?displayPerPage=",0,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/notifications-per-user/".concat(Zr.userId,"?displayPerPage=").concat(a.state.displayPerPage,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,null,[[2,7],[13,18],[21,26]])}))),a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentPage+1,n=a.state.displayPerPage*t,e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(Zr.userId,"?displayPerPage=").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.setState({currentPage:t,totalShowed:n});case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress",currentPage:1,displayPerPage:25,totalShowed:0,isLoading:!0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===Zr.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ... ")))):r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(t,a){return r.a.createElement(_.a,{to:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:t.avatar_url}),primaryText:r.a.createElement(n.Fragment,null," ",r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name)," \xa0 ",0===t.is_read?r.a.createElement("span",{className:"tag ",style:{backgroundColor:"#cae7fa"}},r.a.createElement("b",null,"UNREAD")):""," "),secondaryText:r.a.createElement(n.Fragment,null,"  ",t.notification," \xa0 ",r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))),this.state.totalShowed<this.state.total_data?r.a.createElement("a",{onClick:this.loadMore},r.a.createElement("h4",null,"Load More ... ")):"")))}}]),t}(n.Component)},name:"Notifications"}],tl=x.Session.get().payload,al=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,position:"left",module_title:a.props.module_title,avatar_url:""},a.openDrawerLeft=function(){a.setState({visible:!0,position:"left"})},a.closeDrawer=function(){a.setState({visible:!1})},a.handleVisibility=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title="Employees Management PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/menu-by-module-link/".concat(t[3])).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),t}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user/".concat(tl.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({avatar_url:e.avatar_url})}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return a="",t=window.location.href.split("/"),e.prev=20,e.next=23,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a=e._id,!1}))}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.error("Data Not Loaded ",e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/user-role/".concat(a,"/").concat(tl.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role,role_id:e.data.data[0].role_id})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return e.prev=36,e.next=39,k.a.get("/api/ccs-notifications-per-user/".concat(tl.userId)).then((function(e){200===e.data.status&&n.setState({notifications:e.data.data})}));case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(36),console.log(e.t4);case 44:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33],[36,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=(t.visible,"left"===t.position);r.a.createElement(y.d,{icon:!0,onClick:this.closeDrawer},a?"arrow_back":"close");return""===tl.userId||null===tl.userId||void 0===tl.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,colored:!0,nav:r.a.createElement("a",{href:"/",style:{color:"#fff"}},r.a.createElement(y.d,{icon:!0},"home")),title:this.state.module_title,style:{backgroundColor:this.props.bg_color},actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})]}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,el.map((function(t,a){return r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role,role_id:e.state.role_id})}})}))))))}}]),t}(n.Component),nl={routeProps:{path:"/employees",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(al,{module_title:"Employees Mng",bg_color:"#00bc94"})}}]),t}(n.Component)},name:"Employees"},rl=x.Session.get().payload,ll=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.setState({isLoading:!0}),a.loadRole(),a.fetchData()},a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),a.state.role.includes("Customer")){n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to);try{k.a.get("/api/sism-letters_out-total".concat(n,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&is_approved=1")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(r){console.log(r)}try{k.a.get("/api/sism-letters_out".concat(n,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&is_approved=1")).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}}else{n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id);try{k.a.get("/api/sism-letters_in-total".concat(n,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(r){console.log(r)}try{k.a.get("/api/sism-letters_in".concat(n,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}}a.setState({currentPage:1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.searchDisposition=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({keyDisposition:t}),n="&date_from=".concat(a.state.date_from_disposition,"&date_to=").concat(a.state.date_to_disposition,"&client_id=").concat(a.state.client_id_disposition),e.prev=2,e.next=5,k.a.get("/api/sism-letters_in-total?handled_by_user_id=".concat(a.state.created_by).concat(n,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data_disposition:e.data.data[0].total})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/sism-letters_in?currentPage=".concat(a.state.currentPageDisposition,"&displayPerPage=").concat(a.state.displayPerPage,"&handled_by_user_id=").concat(a.state.created_by).concat(n,"&key=").concat(t)).then((function(e){200===e.data.status&&(a.setState({data_disposition:e.data.data}),a.setState({isLoading:!1}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:a.setState({currentPageDisposition:1});case 19:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteLetter=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.role.includes("Customer"))try{k.a.delete("/api/sism-letter_out/".concat(a.state._id)).then((function(e){200===e.data.status&&(a.notify("SUCCESS",e.data.message),a.setState({dialogDeleteVisible:!1}),a.setState({_id:""}),a.fetchData())}))}catch(t){console.log(t)}else try{k.a.delete("/api/sism-letter_in/".concat(a.state._id)).then((function(e){200===e.data.status&&(a.notify("SUCCESS",e.data.message),a.setState({dialogDeleteVisible:!1}),a.setState({_id:""}),a.fetchData())}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)}))),a.notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1)},a.setActivePageDisposition=function(e){a.setState({currentPageDisposition:e}),a.loadDataByPageDisposition(e)},a.isActiveDisposition=function(e){if(e===a.state.currentPageDisposition)return!0},a.setPageEndDisposition=function(){var e=Math.ceil(a.state.total_data_disposition/a.state.displayPerPage);a.setState({currentPageDisposition:e}),a.loadDataByPageDisposition(e)},a.setPageStartDisposition=function(){a.setState({currentPageDisposition:1}),a.loadDataByPageDisposition(1)},a.setPageNextDisposition=function(){var e=a.state.currentPageDisposition,t=Math.ceil(a.state.total_data_disposition/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPageDisposition:n}),a.loadDataByPageDisposition(n)},a.setPagePreviousDisposition=function(){var e=a.state.currentPageDisposition,t=e-1<1?1:e-1;a.setState({currentPageDisposition:t}),a.loadDataByPageDisposition(t)},a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],a.state.key,n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=15;break}return n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to),e.prev=5,e.next=8,k.a.get("/api/sism-letters_out".concat(n,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&currentPage=",0,"&displayPerPage=",0,"&is_approved=1")).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.FROM="PT MSO Purwokerto",r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:e.next=35;break;case 15:if(n="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Direktur Utama")&&!a.state.role.includes("admin")){e.next=27;break}return e.prev=17,e.next=20,k.a.get("/api/sism-letters_in".concat(n,"&currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.FROM="",null!==t.client_name&&""!==t.client_name&&void 0!==t.client_name?r.FROM+=t.client_name:null!==t.sender&&""!==t.sender&&void 0!==t.sender&&(r.FROM+=t.sender),r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(17),console.log(e.t1);case 25:e.next=35;break;case 27:return e.prev=27,e.next=30,k.a.get("/api/sism-letters_in".concat(n,"&currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.FROM="",null!==t.client_name&&""!==t.client_name&&void 0!==t.client_name?r.FROM+=t.client_name:null!==t.sender&&""!==t.sender&&void 0!==t.sender&&(r.FROM+=t.sender),r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(27),console.log(e.t2);case 35:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All Incoming Letter  per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,r+".xlsx");case 44:case"end":return e.stop()}}),e,null,[[5,10],[17,22],[27,32]])}))),a.exportXLSDisposition=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n="?date_from=".concat(a.state.date_from_disposition,"&date_to=").concat(a.state.date_to_disposition,"&client_id=").concat(a.state.client_id_disposition),e.prev=2,e.next=5,k.a.get("/api/sism-letters_in".concat(n,"&currentPage=",0,"&displayPerPage=",0,"&handled_by_user_id=").concat(a.state.created_by,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.FROM="",null!==t.client_name&&""!==t.client_name&&void 0!==t.client_name?r.FROM+=t.client_name:null!==t.sender&&""!==t.sender&&void 0!==t.sender&&(r.FROM+=t.sender),r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All Incoming Disposition Letter  per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,r+".xlsx");case 19:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.key,t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=14;break}return t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to),e.prev=4,e.next=7,k.a.get("/api/sism-letters_out".concat(t,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&currentPage=",0,"&displayPerPage=",0,"&is_approved=1")).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=34;break;case 14:if(t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Direktur Utama")&&!a.state.role.includes("admin")){e.next=26;break}return e.prev=16,e.next=19,k.a.get("/api/sism-letters_in".concat(t,"&currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:e.next=34;break;case 26:return e.prev=26,e.next=29,k.a.get("/api/sism-letters_in".concat(t,"&currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(26),console.log(e.t2);case 34:case"end":return e.stop()}}),e,null,[[4,9],[16,21],[26,31]])}))),a.beforeGetContentDispoition=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="?date_from=".concat(a.state.date_from_disposition,"&date_to=").concat(a.state.date_to_disposition,"&client_id=").concat(a.state.client_id_disposition),e.prev=1,e.next=4,k.a.get("/api/sism-letters_in".concat(t,"&currentPage=",0,"&displayPerPage=",0,"&handled_by_user_id=").concat(a.state.created_by,"&key=").concat(a.state.keyDisposition)).then((function(e){200===e.data.status&&a.setState({dataToExportPDFDisposition:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangeFromDate=function(e){a.setState({date_from:e})},a.onChangeToDate=function(e){a.setState({date_to:e})},a.onChangeClientIdDisposition=function(e){a.setState({client_id_disposition:e})},a.onChangeFromDateDisposition=function(e){a.setState({date_from_disposition:e})},a.onChangeToDateDisposition=function(e){a.setState({date_to_disposition:e})},a.filter=function(e){a.setState({isLoading:!0});a.state.key;if(a.state.role.includes("Customer")){var t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to);try{k.a.get("/api/sism-letters_out-total".concat(t,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&is_approved=1")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(n){console.log(n)}try{k.a.get("/api/sism-letters_out".concat(t,"&client_id=").concat(a.state.client_id,"&key=").concat(a.state.key,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&is_approved=1")).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(n){console.log(n)}}else{t="?date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id);try{k.a.get("/api/sism-letters_in-total".concat(t,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(n){console.log(n)}try{k.a.get("/api/sism-letters_in".concat(t,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(n){console.log(n)}}a.setState({currentPage:1})},a.filterDisposition=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({isLoading:!0}),t="?date_from=".concat(a.state.date_from_disposition,"&date_to=").concat(a.state.date_to_disposition,"&client_id=").concat(a.state.client_id_disposition);try{k.a.get("/api/sism-letters_in-total".concat(t,"&handled_by_user_id=").concat(a.state.created_by,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({total_data_disposition:e.data.data[0].total})}))}catch(n){console.log(n)}try{k.a.get("/api/sism-letters_in".concat(t,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&handled_by_user_id=").concat(a.state.created_by,"&key=").concat(a.state.keyDisposition)).then((function(e){200===e.data.status&&(a.setState({data_disposition:e.data.data}),a.setState({isLoading:!1}))}))}catch(n){console.log(n)}a.setState({currentPageDisposition:1});case 5:case"end":return e.stop()}}),e)}))),a.resetFilter=function(){a.state.role.includes("Customer")?a.setState({date_from:"",date_to:""}):a.setState({client_id:"",date_from:"",date_to:""})},a.resetFilterDisposition=function(){a.setState({client_id_disposition:"",date_from_disposition:"",date_to_disposition:""})},a.setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.LetterInAll=function(){for(var e=a.state.role.includes("Customer")?[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"Subject",width:"15%"},{label:"From",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}]:[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"",width:"8%"},{label:"Subject",width:"15%"},{label:"From",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}],t=[],l=a.state.currentPage+2,c=Math.ceil(a.state.total_data/a.state.displayPerPage),s=l>c?c:l,i=a.state.currentPage-3;i<=s;i++)t[i-1]=i;return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),value:a.state.key,placeholder:"Search ... ",onChange:function(e){return a.search(e)}})),r.a.createElement(y.i,{size:2,style:{alignItems:"right"}},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return a.setState({isFilter:!a.state.isFilter})},style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:a.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:a.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return a.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary",style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(sl,{ref:function(e){return a.componentRef=e},role:a.state.role,data:a.state.dataToExportPDF})))),a.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px"}},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeFromDate,value:a.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeToDate,value:a.state.date_to}),a.state.role.includes("Customer")?"":r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:a.state.clients,onChange:a.onChangeClientId,value:a.state.client_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:a.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:a.resetFilter},"Reset")))):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px",overflowX:"scroll"}},r.a.createElement("table",{className:"table  is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,e.map((function(e,t){return r.a.createElement("th",null,e.label)})))),r.a.createElement("tbody",null,a.state.data.map((function(e,t){return a.state.role.includes("Customer")?r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},r.a.createElement(y.c,null,"PT MSO Purwokerto".charAt(0))),r.a.createElement("td",{style:{justifyContent:"space-between"}},r.a.createElement(_.a,{to:(a.state.role.includes("Customer"),"/sism/letter-in/detail?id=".concat(e._id))},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,r.a.createElement(_.a,{to:(a.state.role.includes("Customer"),"/sism/letter-in/detail?id=".concat(e._id))},r.a.createElement("b",null,e.subject))),r.a.createElement("td",{width:"20%"},"PT MSO Purwokerto"),r.a.createElement("td",{width:"12%"},H()(e.letter_date,"dd mmm yyyy"))):r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},r.a.createElement(y.c,null,null===e.client_code?"-":e.client_code)),r.a.createElement("td",{style:{justifyContent:"space-between"}},r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,e.total_reply>0?r.a.createElement("span",{className:"tag",style:{padding:"8px"}},r.a.createElement("b",null," ",e.total_reply," Balasan")):""),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",{width:"20%"},null===e.client_name?e.sender:e.client_name),r.a.createElement("td",{width:"12%"},H()(e.letter_date,"dd mmm yyyy")),a.state.role_delete&&a.state.role_update?r.a.createElement("td",null,r.a.createElement(cl,{id:e._id,setUpdate:function(e){return a.setUpdate(e)},setDelete:function(e){return a.setDelete(e)}})):"")}))))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,null,t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(e){return a.isActive(e)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return a.setActivePage(e)}},r.a.createElement("b",null,e)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return a.setActivePage(e)}},r.a.createElement("b",null,e))})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))},a.LetterInDisposition=function(){for(var e=[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"",width:"8%"},{label:"Subject",width:"15%"},{label:"From",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}],t=[],l=a.state.currentPageDisposition+2,c=Math.ceil(a.state.total_data_disposition/a.state.displayPerPage),s=l>c?c:l,i=a.state.currentPageDisposition-3;i<=s;i++)t[i-1]=i;return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),value:a.state.keyDisposition,placeholder:"Search ... ",onChange:function(e){return a.searchDisposition(e)}})),r.a.createElement(y.i,{size:2,style:{alignItems:"right"}},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return a.setState({isFilterDisposition:!a.state.isFilterDisposition})},style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:a.exportXLSDisposition},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:a.beforeGetContentDispoition,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return a.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary",style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(sl,{ref:function(e){return a.componentRef=e},role:a.state.role,data:a.state.dataToExportPDFDisposition})))),a.state.isFilterDisposition?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px"}},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeFromDateDisposition,value:a.state.date_from_disposition}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeToDateDisposition,value:a.state.date_to_disposition}),a.state.role.includes("Customer")?"":r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:a.state.clients,onChange:a.onChangeClientIdDisposition,value:a.state.client_id_disposition}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:a.filterDisposition},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:a.resetFilterDisposition},"Reset")))):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px",overflowX:"scroll"}},r.a.createElement("table",{className:"table  is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,e.map((function(e,t){return r.a.createElement("th",null,e.label)})))),r.a.createElement("tbody",null,a.state.data_disposition.length>0?r.a.createElement(n.Fragment,null,a.state.data_disposition.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},r.a.createElement(y.c,null,null===e.client_code?"-":e.client_code)),r.a.createElement("td",{style:{justifyContent:"space-between"}},r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,e.total_reply>0?r.a.createElement("span",{className:"tag",style:{padding:"8px"}},r.a.createElement("b",null," ",e.total_reply," Balasan")):""),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",{width:"20%"},null===e.client_name?e.sender:e.client_name),r.a.createElement("td",{width:"12%"},H()(e.letter_date,"dd mmm yyyy")),a.state.role_delete&&a.state.role_update?r.a.createElement("td",null,r.a.createElement(cl,{id:e._id,setUpdate:function(e){return a.setUpdate(e)},setDelete:function(e){return a.setDelete(e)}})):"")}))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:e.length},r.a.createElement("div",{className:"notification is-light"},r.a.createElement("p",null,"Data is empty ..."))))))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,null,t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageStartDisposition},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPagePreviousDisposition},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(e){return a.isActiveDisposition(e)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return a.setActivePageDisposition(e)}},r.a.createElement("b",null,e)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return a.setActivePageDisposition(e)}},r.a.createElement("b",null,e))})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageNextDisposition},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageEndDisposition},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))},a.state={isLoading:!0,module_id:"",role:"",role_id:"",data:[],data_disposition:[],dataToExport:[],dataToExportPDF:[],dataToExportDisposition:[],dataToExportPDFDisposition:[],modules:[],key:"",keyDisposition:"",total_data:0,toasts:"",_id:"",isFilter:!1,isFilterDisposition:!1,dialogVisible:!1,dialogDeleteVisible:!1,created_by:rl.userId,date_from:"",date_to:"",date_from_disposition:"",date_to_disposition:"",clients:[],client_id:"",client_id_disposition:"",status_id:"",list_contain:"letter-in-all",role_create:!1,role_update:!1,role_read:!1,role_delete:!1,currentPage:1,currentPageDisposition:1,displayPerPage:50};var l=G()(K);return l.on("LETTER_IN_ADDED",(function(e){a.fetchData()})),l.on("LETTER_IN_DISPOSITION_ADDED",(function(e){a.fetchData()})),l.on("LETTER_OUT_APPROVAL_APPROVED_ADDED",(function(e){a.fetchData()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"loadRole",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.split("/"),e.prev=1,e.next=4,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a.setState({module_id:e._id}),!1}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Data Not Loaded ",e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/user-role/".concat(this.state.module_id,"/").concat(this.state.created_by)).then((function(e){200===e.data.status&&(a.state.role=e.data.data[0].role,a.state.role_id=e.data.data[0].role_id,a.loadROleControl(e.data.data[0].role_id))}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:if(!this.state.role.includes("Customer")){e.next=44;break}return e.prev=18,e.next=21,k.a.get("/api/user/".concat(this.state.created_by)).then((function(e){200===e.data.status&&a.setState({client_id:e.data.data[0].client_id})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:return e.prev=26,e.next=29,k.a.get("/api/sism-letters_out-total?client_id=".concat(this.state.client_id,"&is_approved=1")).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 29:e.next=34;break;case 31:e.prev=31,e.t3=e.catch(26),console.log(e.t3);case 34:return e.prev=34,e.next=37,k.a.get("/api/sism-letters_out?client_id=".concat(this.state.client_id,"&is_approved=1&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 37:e.next=42;break;case 39:e.prev=39,e.t4=e.catch(34),console.log(e.t4);case 42:e.next=97;break;case 44:if(this.loadClients(),console.log(this.state.role),!(this.state.role.includes("Direktur Utama")||this.state.role.includes("Superadmin")||this.state.role.includes("Administrator"))){e.next=65;break}return e.prev=47,e.next=50,k.a.get("/api/sism-letters_in-total").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 50:e.next=55;break;case 52:e.prev=52,e.t5=e.catch(47),console.log(e.t5);case 55:return e.prev=55,e.next=58,k.a.get("/api/sism-letters_in?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 58:e.next=63;break;case 60:e.prev=60,e.t6=e.catch(55),console.log(e.t6);case 63:e.next=97;break;case 65:return e.prev=65,e.next=68,k.a.get("/api/sism-letters_in-total").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 68:e.next=73;break;case 70:e.prev=70,e.t7=e.catch(65),console.log(e.t7);case 73:return e.prev=73,e.next=76,k.a.get("/api/sism-letters_in?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 76:e.next=81;break;case 78:e.prev=78,e.t8=e.catch(73),console.log(e.t8);case 81:return e.prev=81,e.next=84,k.a.get("/api/sism-letters_in-total?handled_by_user_id=".concat(this.state.created_by)).then((function(e){200===e.data.status&&a.setState({total_data_disposition:e.data.data[0].total})}));case 84:e.next=89;break;case 86:e.prev=86,e.t9=e.catch(81),console.log(e.t9);case 89:return e.prev=89,e.next=92,k.a.get("/api/sism-letters_in?currentPage=".concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage,"&handled_by_user_id=").concat(this.state.created_by)).then((function(e){200===e.data.status&&(a.setState({data_disposition:e.data.data}),a.setState({isLoading:!1}))}));case 92:e.next=97;break;case 94:e.prev=94,e.t10=e.catch(89),console.log(e.t10);case 97:case"end":return e.stop()}}),e,this,[[1,6],[9,14],[18,23],[26,31],[34,39],[47,52],[55,60],[65,70],[73,78],[81,86],[89,94]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadClients",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e._id};a[t]=n}return!1})),t.setState({clients:a})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadROleControl",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/role-control-by-link-role-id",{link:window.location.pathname,role_id:t}).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){"read"===e.type_control&&a.setState({role_read:!0}),"create"===e.type_control&&a.setState({role_create:!0}),"update"===e.type_control&&a.setState({role_update:!0}),"delete"===e.type_control&&a.setState({role_delete:!0})}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setDelete",value:function(e){this.setState({_id:e}),this.setState({dialogDeleteVisible:!0})}},{key:"setPageNext",value:function(){var e=this.state.currentPage,t=Math.ceil(this.state.total_data/this.state.displayPerPage),a=e+1>t?t:e+1;this.setState({currentPage:a}),this.loadDataByPage(a)}},{key:"setPagePrevious",value:function(){var e=this.state.currentPage,t=e-1<1?1:e-1;this.setState({currentPage:t}),this.loadDataByPage(t)}},{key:"loadDataByPage",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),this.state.key,a="&date_from=".concat(this.state.date_from,"&date_to=").concat(this.state.date_to,"&client_id=").concat(this.state.client_id),this.state.role.includes("Customer")){a="?date_from=".concat(this.state.date_from,"&date_to=").concat(this.state.date_to);try{k.a.get("/api/sism-letters_out".concat(a,"&client_id=").concat(this.state.client_id,"&key=").concat(this.state.key,"&currentPage=").concat(t,"&displayPerPage=").concat(this.state.displayPerPage,"&is_approved=1")).then((function(e){200===e.data.status&&(n.setState({data:e.data.data}),n.setState({isLoading:!1}))}))}catch(r){console.log(r)}}else{a="?date_from=".concat(this.state.date_from,"&date_to=").concat(this.state.date_to,"&client_id=").concat(this.state.client_id);try{k.a.get("/api/sism-letters_in".concat(a,"&currentPage=").concat(t,"&displayPerPage=").concat(this.state.displayPerPage,"&key=").concat(this.state.key)).then((function(e){200===e.data.status&&(n.setState({data:e.data.data}),n.setState({isLoading:!1}))}))}catch(r){console.log(r)}}case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadDataByPageDisposition",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),a="&date_from=".concat(this.state.date_from_disposition,"&date_to=").concat(this.state.date_to_disposition,"&client_id=").concat(this.state.client_id_disposition),e.prev=2,e.next=5,k.a.get("/api/sism-letters_in?currentPage=".concat(t,"&displayPerPage=").concat(this.state.displayPerPage,"&handled_by_user_id=").concat(this.state.created_by).concat(a,"&key=").concat(this.state.keyDisposition)).then((function(e){200===e.data.status&&(n.setState({data_disposition:e.data.data}),n.setState({isLoading:!1}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t=this.state.role.includes("Customer")||this.state.role.includes("Direktur Utama")||this.state.role.includes("Superadmin")||this.state.role.includes("Admin")?[{color:"darkblue",action:"letter-in-all",icon:"fa fa-envelope",tooltip:r.a.createElement("b",null,"All \xa0 (",this.state.total_data,")")}]:[{color:"#348066",action:"letter-in-all",icon:"fa fa-envelope",tooltip:r.a.createElement("b",null,"All \xa0 (",this.state.total_data,")")},{color:"darkblue",action:"letter-in-disposition",icon:"fa fa-envelope-o",tooltip:r.a.createElement("b",null,"My Disposition\xa0 (",this.state.total_data_disposition,") ")}],this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading data ...")):r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/sism/letter-in/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6},r.a.createElement("span",null,r.a.createElement("h2",{className:"md-cell md-cell--12"},"Incoming Letters")))),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,t.map((function(t,a){return e.state.list_contain===t.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0",t.tooltip," ")):r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,padding:"10px 5px 0 0 "}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0 ",t.tooltip," "))})))),function(){switch(e.state.list_contain){case"letter-in-all":return r.a.createElement(e.LetterInAll,null);case"letter-in-disposition":return r.a.createElement(e.LetterInDisposition,null);default:return""}}(),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.deleteLetter},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component),cl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this;this.props.is_reply_required;return e=[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/sism/letter-in/form?id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return t.setDelete(t.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:r.a.createElement(_.a,{to:"/sism/letter-out/form?letter_in_id=".concat(this.props.id)},"Reply \xa0",r.a.createElement("i",{className:"fa fa-share"})," "),style:{top:0,backgroundColor:"lightgreen",marginTop:"0em"}})],r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:e,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),sl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={role:a.props.role},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=(this.state.role.includes("Customer"),[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"Subject",width:"15%"},{label:"From",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}]);return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6},r.a.createElement("span",null,r.a.createElement("h2",{className:"md-cell md-cell--12"},"Incoming Letters"),r.a.createElement("p",null,"per ",H()(new Date,"dd mmm yyyy, HH:MM"))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px",overflowX:"scroll"}},r.a.createElement("table",{className:"table  is-striped",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",null,e.label)})))),r.a.createElement("tbody",null,this.props.data.map((function(t,a){return e.state.role.includes("Customer")?r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},a+1),r.a.createElement("td",null,t.letter_number),r.a.createElement("td",null,t.subject),r.a.createElement("td",{width:"20%"},"PT MSO Purwokerto"),r.a.createElement("td",{width:"12%"},H()(t.letter_date,"dd mmm yyyy"))):r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},a+1),r.a.createElement("td",null,t.letter_number),r.a.createElement("td",null,t.subject),r.a.createElement("td",{width:"20%"},null===t.client_name?t.sender:t.client_name),r.a.createElement("td",{width:"12%"},H()(t.letter_date,"dd mmm yyyy")))}))))))))}}]),t}(n.Component),il={routeProps:{path:"/sism/letter-in",exact:!0,component:ll},name:"LetterIn"},ol=a(16),dl=(a(139),a(102)),ul=a(103),ml=x.Session.get().payload;new FormData;function pl(e){var t=Object(n.useState)(""),a=Object(ol.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),d=Object(ol.a)(s,2),u=(d[0],d[1],Object(n.useState)(e.role)),m=Object(ol.a)(u,2),p=m[0],f=(m[1],Object(n.useState)("")),h=Object(ol.a)(f,2),g=(h[0],h[1]),b=Object(n.useState)(""),E=Object(ol.a)(b,2),_=E[0],v=E[1],x=Object(n.useState)([]),w=Object(ol.a)(x,2),P=(w[0],w[1],Object(n.useState)([])),C=Object(ol.a)(P,2),N=(C[0],C[1],Object(n.useState)([])),O=Object(ol.a)(N,2),D=(O[0],O[1],Object(n.useState)([])),j=Object(ol.a)(D,2),T=j[0],I=j[1],R=Object(n.useState)(""),M=Object(ol.a)(R,2),A=M[0],L=M[1],H=Object(n.useState)(ml.userId),z=Object(ol.a)(H,2),V=z[0],B=(z[1],Object(n.useState)("")),q=Object(ol.a)(B,2),W=(q[0],q[1],Object(n.useState)(ml.userId)),Y=Object(ol.a)(W,2);Y[0],Y[1];function X(){return(X=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return v(e._id),!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}try{k.a.get("/api/user/".concat(ml.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return console.log(e.structure_id),g(e.structure_id),G(e.structure_id),!1}))}))}catch(a){console.log(a)}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(t){if(p.includes("admin"))try{k.a.get("/api/user_employees?module_id=".concat(e.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.full_name+" - "+e.structure,value:e._id};return t[a]=n,!1})),I(t)}}))}catch(Vc){console.log(Vc)}else try{k.a.get("/api/user-bawahan/".concat(t,"?module_id=").concat(e.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.full_name+" - "+e.structure,value:e._id};return t[a]=n,!1})),I(t)}}))}catch(Vc){console.log(Vc)}}Object(n.useEffect)((function(){U()(".summernote").summernote({placeholder:"Add Disposition Note",height:"20vh"});var e=F.a.parse(window.location.search);console.log(e),c(e.ticket_id),void 0!==e&&null!==e&&""!==e&&c(e.id),function(){X.apply(this,arguments)}()}),[]);var K=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function J(){return(J=Object(o.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.document.getElementsByClassName("note-editable")[0],n={letter_in_id:l,disposition:a.innerHTML,created_by:ml.userId,from_user_id:V,to_user_id:A,module_id:e.module_id},t.prev=2,t.next=5,k.a.post("/api/sism-letter-in-disposition",n).then((function(e){200===e.data.status?(K("SUCCESS","Submitted!"),ce("Insert New Disposition",_),Q()):K("ERROR","Failed Processing data")}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),K("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function Q(){e.closeFormDisposition(!1)}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement(y.i,{size:12,style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Write Disposition"),r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),r.a.createElement(y.y,{id:"select-field-2",placeholder:"Disposition To",menuItems:T,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.TOP},onChange:function(e){L(e)},className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return J.apply(this,arguments)}},"Submit "),r.a.createElement(y.d,{raised:!0,onClick:Q},"Cancel"))),r.a.createElement(S.a,null))}var fl=x.Session.get().payload;new FormData;function hl(e){var t=Object(n.useState)(""),a=Object(ol.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),d=Object(ol.a)(s,2),u=(d[0],d[1],Object(n.useState)(e.role)),m=Object(ol.a)(u,2),p=m[0],f=(m[1],Object(n.useState)("")),h=Object(ol.a)(f,2),g=(h[0],h[1]),b=Object(n.useState)(""),E=Object(ol.a)(b,2),_=E[0],v=E[1],x=Object(n.useState)([]),w=Object(ol.a)(x,2),P=(w[0],w[1],Object(n.useState)([])),C=Object(ol.a)(P,2),N=(C[0],C[1],Object(n.useState)([])),O=Object(ol.a)(N,2),D=(O[0],O[1],Object(n.useState)([])),j=Object(ol.a)(D,2),T=j[0],I=j[1],R=Object(n.useState)(""),M=Object(ol.a)(R,2),A=M[0],L=M[1],H=Object(n.useState)(fl.userId),z=Object(ol.a)(H,2),V=z[0],B=(z[1],Object(n.useState)("")),U=Object(ol.a)(B,2),q=(U[0],U[1],Object(n.useState)(fl.userId)),W=Object(ol.a)(q,2);W[0],W[1];function Y(){return(Y=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return v(e._id),!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}try{k.a.get("/api/user/".concat(fl.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return console.log(e.structure_id),g(e.structure_id),X(e.structure_id),!1}))}))}catch(a){console.log(a)}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(t){if(p.includes("admin"))try{k.a.get("/api/user_employees?module_id=".concat(e.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.full_name+" - "+e.structure,value:e._id};return t[a]=n,!1})),I(t)}}))}catch(Vc){console.log(Vc)}else try{k.a.get("/api/user-bawahan/".concat(t,"?module_id=").concat(e.module_id)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.full_name+" - "+e.structure,value:e._id};return t[a]=n,!1})),I(t)}}))}catch(Vc){console.log(Vc)}}Object(n.useEffect)((function(){var e=F.a.parse(window.location.search);console.log(e),c(e.ticket_id),void 0!==e&&null!==e&&""!==e&&c(e.id),function(){Y.apply(this,arguments)}()}),[]);var G=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function K(){return(K=Object(o.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={letter_in_id:l,disposition:"",created_by:fl.userId,from_user_id:V,to_user_id:A,module_id:e.module_id},t.prev=1,t.next=4,k.a.post("/api/sism-letter-in-disposition",a).then((function(e){200===e.data.status?(G("SUCCESS","Submitted!"),ce("Insert New Disposition",_),J()):G("ERROR","Failed Processing data")}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),G("ERROR",t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function J(){e.closeFormDisposition(!1)}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement(y.i,{size:12,style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Forward"),r.a.createElement(y.y,{id:"select-field-2",placeholder:"Forward To",menuItems:T,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.TOP},onChange:function(e){L(e)},className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return K.apply(this,arguments)}},"Submit "),r.a.createElement(y.d,{raised:!0,onClick:J},"Cancel"))),r.a.createElement(S.a,null))}var gl=x.Session.get().payload;var bl=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"20px"}},this.props.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-item",style:{textAlign:"center"}},r.a.createElement("p",{style:{fontWeight:"bold",textAlign:"center",textDecoration:"underline"}},"LEMBAR DISPOSISI MASUK"))),r.a.createElement("br",null),r.a.createElement("table",{border:0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Surat Dari"),r.a.createElement("td",null,":"),r.a.createElement("td",null,e.props.role.includes("Customer")?"PT MSO Purwokerto":e.props.sender.map((function(e,t){return r.a.createElement("span",null,null===e.client_name?e.sender:e.client_name)})))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Nomor Surat"),r.a.createElement("td",null,":"),r.a.createElement("td",null,t.letter_number," "),e.props.role.includes("Customer")?"":r.a.createElement("td",{rowSpan:5,style:{width:"10%",border:"1px"}},"Paraf Adm. Umum")),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Tanggal Surat"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},H()(t.letter_date,"dd/mm/yyyy"))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Diterima Tanggal"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},H()(t.letter_date,"dd/mm/yyyy"))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Jam"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},t.accepted_time," ")),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Nomor Agenda"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2})),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Sifat"),r.a.createElement("td",null,":"),r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Perihal"),r.a.createElement("td",null,":"),r.a.createElement("td",null,t.subject," "),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Isi Pesan"),r.a.createElement("td",null,":"),r.a.createElement("td",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.message}})),r.a.createElement("td",null)),e.props.role.includes("Customer")?"":e.props.disposition.map((function(e,t){return r.a.createElement("tr",{style:{minHeight:"15vh",border:"1px solid #000"}},r.a.createElement("td",{width:"15%"},"Disposisi\xa0 ",e.structure),r.a.createElement("td",null,":"),r.a.createElement("td",null,r.a.createElement("p",null,r.a.createElement("b",null,e.full_name)),r.a.createElement("p",null,H()(e.created_at,"dd/mm/yyyy, HH:MM")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.disposition}})),r.a.createElement("td",null))})))),e.props.role.includes("Customer")?"":r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"columns",style:{marginTop:"10vh"}},r.a.createElement("div",{className:"column is-8"}),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf Dirut")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf DirOps")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf Spv")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}}))))})))}}]),t}(n.Component),El={routeProps:{path:"/sism/letter-in/detail",exact:!0,component:function(e){var t=Object(n.useState)(""),a=Object(ol.a)(t,2),l=(a[0],a[1]),c=Object(n.useState)(!0),s=Object(ol.a)(c,2),d=(s[0],s[1],Object(n.useState)("")),u=Object(ol.a)(d,2),m=u[0],p=u[1],f=Object(n.useState)(""),h=Object(ol.a)(f,2),g=h[0],b=h[1],E=Object(n.useState)(gl.userId),v=Object(ol.a)(E,2),x=v[0],w=(v[1],Object(n.useState)("")),S=Object(ol.a)(w,2),P=S[0],C=S[1],N=Object(n.useState)(null),O=Object(ol.a)(N,2),D=O[0],j=O[1],T=Object(n.useState)(null),I=Object(ol.a)(T,2),R=(I[0],I[1]),M=Object(n.useState)(null),A=Object(ol.a)(M,2),L=(A[0],A[1]),z=Object(n.useState)(null),V=Object(ol.a)(z,2),B=(V[0],V[1]),U=Object(n.useState)(""),q=Object(ol.a)(U,2),W=q[0],Y=q[1],X=Object(n.useState)([]),G=Object(ol.a)(X,2),K=G[0],J=G[1],Q=Object(n.useState)([]),$=Object(ol.a)(Q,2),Z=$[0],ee=$[1],te=Object(n.useState)([]),ae=Object(ol.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)([]),ce=Object(ol.a)(le,2),se=ce[0],ie=ce[1],oe=Object(n.useState)([]),de=Object(ol.a)(oe,2),ue=de[0],me=de[1],pe=Object(n.useState)([]),fe=Object(ol.a)(pe,2),he=fe[0],ge=fe[1],Ee=Object(n.useState)(""),_e=Object(ol.a)(Ee,2),ye=(_e[0],_e[1],Object(n.useState)(!1)),ve=Object(ol.a)(ye,2),ke=ve[0],xe=ve[1],we=Object(n.useRef)(null);function Se(){return(Se=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/role-control-by-link-role-id",{link:"/sism/letter-in",role_id:t}).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){"read"===e.type_control&&R(!0),"create"===e.type_control&&j(!0),"update"===e.type_control&&L(!0),"delete"===e.type_control&&B(!0)}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Pe(){return(Pe=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.includes("Customer")?(Ne(t),je(t)):(Ce(t),De(t),Te(t),Ie(t),Re(t),Oe(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){try{k.a.get("/api/sism-letter_in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(J(e.data.data),b(e.data.data[0].letter_number))}))}catch(t){console.log(t)}}function Ne(e){try{k.a.get("/api/sism-letter_out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(J(e.data.data),b(e.data.data[0].letter_number))}))}catch(t){console.log(t)}}function Oe(e){try{k.a.get("/api/letter_out_replies/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&ie(e.data.data)}))}catch(t){console.log(t)}}function De(e){try{k.a.get("/api/sism-letter-in-file-by-letter-in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&ee(e.data.data)}))}catch(t){console.log(t)}}function je(e){try{k.a.get("/api/sism-letter-out-file-by-letter-out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&ee(e.data.data)}))}catch(t){console.log(t)}}function Te(e){try{k.a.get("/api/sism-letter-in-tag-by-letter-in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&re(e.data.data)}))}catch(t){console.log(t)}}function Ie(e){try{k.a.get("/api/sism-letter-in-sender-by-letter-in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&me(e.data.data)}))}catch(t){console.log(t)}}function Re(e){try{k.a.get("/api/sism-letter-in-disposition-by-letter-in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&ge(e.data.data)}))}catch(t){console.log(t)}}function Me(e){xe(e)}function Ae(){var e=new dl,t=0;Z.map((function(a,n){ul.getBinaryContent(a.file_url,(function(n,r){if(n)throw n;var l=a.file_url.replace(/.*\//g,"");e.file(l,r,{binary:!0}),++t==Z.length&&e.generateAsync({type:"blob"}).then((function(e){qe.saveAs(e,"file-surat-".concat(g,".zip"))}))}))}))}return Object(n.useEffect)((function(){var e=F.a.parse(window.location.search);void 0!==e&&null!==e&&""!==e&&Y(e.id);var t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(t){t.data.data.map((function(t,a){C(t._id);try{k.a.get("/api/user-role/".concat(t._id,"/").concat(gl.userId)).then((function(t){200===t.data.status&&t.data.data.length>0&&(p(t.data.data[0].role),l(t.data.data[0].role_id),function(e){Se.apply(this,arguments)}(t.data.data[0].role_id),function(e,t){Pe.apply(this,arguments)}(e.id,t.data.data[0].role))}))}catch(Vc){console.log(Vc)}return!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}}),[]),r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+g),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),K.map((function(e,t){return r.a.createElement(y.r,{key:t},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{minHeight:"77vh",padding:"2.5vw",borderRadius:"10px"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",null,r.a.createElement("b",null,H()(e.letter_date,"dd mmm yyyy"))),r.a.createElement("p",null,r.a.createElement("b",null,e.accepted_time))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"columns",style:{justifyContent:"space-between",paddingLeft:"10px"}},r.a.createElement("div",{className:"level-item"},r.a.createElement("p",null,"[Incoming Letter]")),r.a.createElement("div",{className:"level-item",style:{alignItems:"end"}},!m.includes("Customer")&&D?r.a.createElement(_.a,{to:"/sism/letter-out/form?letter_in_id=".concat(e._id)},r.a.createElement("button",{className:"button  is-primary",style:{borderRadius:"5px"}},r.a.createElement("i",{className:"fa fa-share"})," \xa0 Reply")):"","\xa0",r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button  is-info",style:{borderRadius:"5px"}},r.a.createElement("i",{className:"fa fa-print"})," \xa0 Print")},content:function(){return we}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(bl,{ref:function(e){return we=e},role:m,data:K,disposition:he,sender:ue})))),r.a.createElement("p",null,r.a.createElement("h4",null,r.a.createElement("b",null,e.subject))),r.a.createElement("p",null,r.a.createElement("b",null,"From:")),m.includes("Customer")?r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{label:r.a.createElement(y.s,{label:"PT MSO Purwokerto",iconBefore:!0},r.a.createElement(y.c,null,"PT MSO Purwokerto".charAt(0))),style:{margin:"3px",paddingLeft:"20px",paddingTop:"8px",paddingRight:"8px",paddingBottom:"8px",fontSize:"9pt"}}),r.a.createElement("p",null,"\xa0")):ue.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{label:r.a.createElement(y.s,{label:null===e.client_name?e.sender:e.client_name,iconBefore:!0},r.a.createElement(y.c,null,null===e.client_code?e.sender.charAt(0):e.client_code)),style:{margin:"3px",paddingLeft:"20px",paddingTop:"8px",paddingRight:"8px",paddingBottom:"8px",fontSize:"9pt"}}),r.a.createElement("p",null,"\xa0"))})),""===e.message||null===e.message?"":r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.message}})),Z.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"level",style:{justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Attachments:"))),r.a.createElement("div",null,r.a.createElement("button",{className:"button  is-info",style:{borderRadius:"5px"},onClick:Ae},r.a.createElement("i",{className:"fa fa-download"})," \xa0 Download"))),Z.map((function(e,t){var a=e.file_url.split("."),n=a[a.length-1];return"png"===n||"jpg"===n||"jpeg"===n?r.a.createElement("img",{src:e.file_url,alt:"file_image",style:{width:"75%"}}):r.a.createElement("iframe",{src:e.file_url,frameBorder:"0",style:{width:"100%",height:"75vh"}})})),r.a.createElement("br",null)):"",r.a.createElement("br",null),ne.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Tags:")),ne.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(y.j,{className:"state-chip",label:e.tag}),"\xa0")})),r.a.createElement("br",null)):"",r.a.createElement("br",null),se.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Replies Letter:")),se.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement("span",{className:"tag",style:{margin:"5px",fontSize:"12pt"}},r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number+" - "+e.subject)))," ",r.a.createElement("br",null))})),r.a.createElement("br",null)):"",function(){if(!m.includes("Customer"))return r.a.createElement(n.Fragment,null,he.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Disposition:")),he.map((function(e,t){return r.a.createElement("div",{className:"notification is-light",style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},null!==e.avatar_url?r.a.createElement(y.c,{src:e.avatar_url}):r.a.createElement(y.c,null,e.full_name.charAt(0))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("b",null,e.full_name," - ",e.structure," ")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("i",null,H()(e.created_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.disposition}})))))}))):"",function(){if(m.includes("Direktur Utama")&&he.length<1)return ke?r.a.createElement(pl,{role:m,active:ke,module_id:P,_id:W,closeFormDisposition:function(e){return Me(e)}}):r.a.createElement("button",{className:"button is-info ",onClick:function(){return xe(!0)}},r.a.createElement("i",{className:"fa fa-pencil"})," \xa0 Write Disposition");if(e.handled_by_user_id===x){if(m.includes("Direktur")&&he.length<2)return ke?r.a.createElement(pl,{role:m,active:ke,module_id:P,_id:W,closeFormDisposition:function(e){return Me(e)}}):r.a.createElement("button",{className:"button is-info ",onClick:function(){return xe(!0)}},r.a.createElement("i",{className:"fa fa-pencil"})," \xa0 Write Disposition");if(m.includes("Ka Div")&&he.length<3)return ke?r.a.createElement(hl,{role:m,active:ke,module_id:P,_id:W,closeFormDisposition:function(e){return Me(e)}}):r.a.createElement("button",{className:"button is-info ",onClick:function(){return xe(!0)}},r.a.createElement("i",{className:"fa fa-arrow-right"})," \xa0 Forward")}}())}()))))))}))))}},name:"Detail"},_l={routeProps:{path:"/sism/letter-in/detail-unapprove",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:"",data:[],file_url:[],handled_by:"",to_division:"",letter_number_original:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.ticket_id}),void 0!==t&&null!==t&&""!==t&&this.setState({_id:t.id}),console.log(this.state._id),e.prev=4,e.next=7,k.a.get("/api/sism-letter_in-unapprove/".concat(t.id)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,letter_number_original:e.data.data[0].letter_number_original})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/sism-letter-in-file-by-letter-in/".concat(t.id)).then((function(e){200===e.data.status&&a.setState({file_url:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:return this.state.data.map(function(){var e=Object(o.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{k.a.get("/api/letter_out_replies/".concat(t.id)).then((function(e){200===e.data.status&&(a.replies=e.data.data)}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),e.prev=21,e.next=24,k.a.get("/api/sism-letter_in_to_division-id/".concat(t.id)).then((function(e){if(200===e.data.status){var t="";e.data.data.map((function(e,a){return t+=e.structure+", ",!1})),a.state.to_division=t}}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:return e.prev=29,e.next=32,k.a.get("/api/letter_in_handled_by_user/".concat(t.id)).then((function(e){if(200===e.data.status){var t="";e.data.data.map((function(e,a){return t+=e.full_name+", ",!1})),a.state.handled_by=t}}));case 32:e.next=37;break;case 34:e.prev=34,e.t3=e.catch(29),console.log(e.t3);case 37:console.log(this.state.to_division),console.log(this.state.handled_by);case 39:case"end":return e.stop()}}),e,this,[[4,9],[12,17],[21,26],[29,34]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.data;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+this.state.letter_number_original),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),t.map((function(t,a){return r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{minHeight:"77vh",padding:"2.5vw"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("table",{className:"table is-striped is-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"Information"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Letter Date"),r.a.createElement("td",null,H()(t.date_in,"dd mmm yyyy"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Letter No."),r.a.createElement("td",null,t.letter_number_original)),r.a.createElement("tr",null,r.a.createElement("td",null,"Subject"),r.a.createElement("td",null,t.subject)),r.a.createElement("tr",null,r.a.createElement("td",null,"From BPR/Client/Other"),r.a.createElement("td",null,""!==t.sender_name?t.sender_name:t.client_name)),r.a.createElement("tr",null,r.a.createElement("td",null,"To Division"),r.a.createElement("td",null,t.to_division)),r.a.createElement("tr",null,r.a.createElement("td",null,"Accepted at"),r.a.createElement("td",null,H()(t.date_taken,"dd mmm yyyy")," ",t.accepted_time)),r.a.createElement("tr",null,r.a.createElement("td",null,"Disposition from Dirut"),r.a.createElement("td",null,t.disposition_1)),r.a.createElement("tr",null,r.a.createElement("td",null,"Disposition from Dirops"),r.a.createElement("td",null,t.disposition_2)),r.a.createElement("tr",null,r.a.createElement("td",null,"Handled By"),r.a.createElement("td",null,t.full_name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Status"),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+t.label_color},t.status)," ")),r.a.createElement("tr",null,r.a.createElement("td",null,"Replies"),r.a.createElement("td",null,null!==t.replies&&void 0!==t.replies?r.a.createElement(n.Fragment,null,t.replies.map((function(e,t){return r.a.createElement("p",null,e.letter_number)}))):"-")),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"Files"),e.state.file_url.map((function(e,t){var a=e.file_url.split("."),n=a[a.length-1];return console.log(n),"png"===n||"jpg"===n||"jpeg"===n?r.a.createElement("img",{src:e.file_url,alt:"file_image",style:{width:"75%"}}):r.a.createElement("iframe",{src:e.file_url,frameborder:"0",style:{width:"100%",height:"75vh"}})})))))))))))}))))}}]),t}(n.Component)},name:"DetailUnApprove"},yl=x.Session.get().payload;new FormData;function vl(e){var t=Object(n.useState)(null),a=Object(ol.a)(t,2),l=(a[0],a[1],Object(n.useState)("")),c=Object(ol.a)(l,2),s=c[0],d=c[1],u=Object(n.useState)(""),m=Object(ol.a)(u,2),p=m[0],f=m[1],h=Object(n.useState)(""),g=Object(ol.a)(h,2),b=(g[0],g[1]),E=Object(n.useState)(""),_=Object(ol.a)(E,2),v=(_[0],_[1],Object(n.useState)("")),x=Object(ol.a)(v,2),w=x[0],P=x[1],C=Object(n.useState)(""),N=Object(ol.a)(C,2),O=N[0],D=N[1],j=Object(n.useState)(""),T=Object(ol.a)(j,2),I=(T[0],T[1],Object(n.useState)([])),R=Object(ol.a)(I,2),M=R[0],A=R[1],L=Object(n.useState)([]),z=Object(ol.a)(L,2),V=(z[0],z[1],Object(n.useState)(0)),B=Object(ol.a)(V,2),q=B[0],W=(B[1],Object(n.useState)([])),Y=Object(ol.a)(W,2),X=(Y[0],Y[1],Object(n.useState)([])),G=Object(ol.a)(X,2),K=G[0],J=G[1],Q=Object(n.useState)(!1),$=Object(ol.a)(Q,2),Z=($[0],$[1],Object(n.useState)(!1)),ee=Object(ol.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(ol.a)(ne,2),le=re[0],se=re[1],ie=Object(n.useState)(""),oe=Object(ol.a)(ie,2),de=oe[0],ue=oe[1],me=Object(n.useState)(new Date),pe=Object(ol.a)(me,2),fe=pe[0],he=pe[1],ge=Object(n.useState)(""),be=Object(ol.a)(ge,2),Ee=be[0],_e=be[1],ye=Object(n.useState)(""),ve=Object(ol.a)(ye,2),ke=ve[0],xe=ve[1],Se=Object(n.useState)(""),Pe=Object(ol.a)(Se,2),Ce=Pe[0],Ne=Pe[1],Oe=Object(n.useState)(""),De=Object(ol.a)(Oe,2),je=De[0],Te=De[1],Ie=Object(n.useState)([]),Re=Object(ol.a)(Ie,2),Me=Re[0],Ae=Re[1],Fe=Object(n.useState)([]),Le=Object(ol.a)(Fe,2),He=Le[0],ze=Le[1],Ve=Object(n.useState)(yl.userId),Be=Object(ol.a)(Ve,2),Ue=Be[0],qe=Be[1],We=Object(n.useState)([]),Ye=Object(ol.a)(We,2),Xe=Ye[0],Ge=Ye[1];function Ke(){return(Ke=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.includes("Customer")?et():(tt(),at()),""!==t&&null!==t&&void 0!==t&&(Je(t),Qe(t,a),$e(t),Ze(t),xe(ke));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){U()(".summernote").summernote({placeholder:"Message",height:"20vh"});try{k.a.get("/api/sism-letter_in/".concat(e)).then((function(e){if(200===e.data.status&&e.data.data.length>0){qe(e.data.data[0].created_by),Te(e.data.data[0].letter_number),he(H()(e.data.data[0].letter_date,"m/dd/yyyy")),Ne(e.data.data[0].subject),function(e){xe(e),console.log(ke);document.getElementsByClassName("note-editable")[0];U()(".summernote").summernote("code",e)}(e.data.data[0].message);var t=e.data.data[0].accepted_time.toLocaleString().split(":");_e((t[0]+":"+t[1]).replace(":","."))}}))}catch(t){console.log(t)}window.document.getElementsByClassName("note-editable")[0]}function Qe(e,t){if(!t.includes("Customer"))try{k.a.get("/api/sism-letter-in-sender-by-letter-in/".concat(e)).then((function(e){if(200===e.data.status){e.data.data.map((function(e,t){return se(e.sender),ue(e.sender),!1})),console.log([])}}))}catch(a){console.log(a)}}function $e(e){try{k.a.get("/api/sism-letter-in-tag-by-letter-in/".concat(e)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.tag,value:e.tag_id};return t[a]=n,!1})),Ae(t)}}))}catch(t){console.log(t)}}function Ze(e){try{k.a.get("/api/sism-letter-in-file-by-letter-in/".concat(e)).then((function(e){if(200===e.data.status&&200===e.data.status){var t=[];e.data.data.map((function(e,a){return t[a]=e.file_url.replace("/sism/files/",""),!1})),Ge(t)}}))}catch(t){console.log(t)}}function et(){try{k.a.get("/api/user/".concat(Ue)).then((function(e){200===e.data.status&&se(e.data.data[0].client_id)}))}catch(e){console.log(e)}}function tt(){try{k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.client_code+" - "+e.client_name,value:e._id};return t[a]=n,!1})),A(t)}}))}catch(e){console.log(e)}}function at(){if(!p.includes("Customer"))try{k.a.get("/api/sism-tags").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.tag,value:e._id};return t[a]=n,!1})),ze(t)}}))}catch(e){console.log(e)}}Object(n.useEffect)((function(){var e=F.a.parse(window.location.search);void 0!==e&&null!==e&&""!==e&&D(e.id);var t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(t){t.data.data.map((function(t,a){d(t._id);try{k.a.get("/api/user-role/".concat(t._id,"/").concat(yl.userId)).then((function(t){200===t.data.status&&(f(t.data.data[0].role),b(t.data.data[0].role_id),function(e,t){Ke.apply(this,arguments)}(e.id,t.data.data[0].role))}))}catch(Vc){console.log(Vc)}return!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}U()(".summernote").summernote({placeholder:"Message",height:"20vh"})}),[]);var nt=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function rt(e){he(e)}function lt(e,t){console.log(e),console.log(t),_e(e)}function ct(e){ue(""),0===M.findIndex((function(t){return t.value===e}))?ae(!0):(ue(""),ae(!1),se(e))}function st(e){ue(e)}function it(e,t){var a=[].concat(Object(we.a)(Xe),[e.name]),n=[].concat(Object(we.a)(K),[e]);Ge(a),J(n)}function ot(e){console.log(e),console.log(Xe);var t=K.filter((function(t){return!t.name.includes(e)})),a=Xe;console.log();var n=a.indexOf(e);n>-1&&a.splice(n,1),Ge(t)}function dt(){}function ut(e){P(e)}function mt(e){"Enter"===e.key&&(ft(w),P(""))}function pt(e){w!==e&&ft(e)}function ft(e){var t=He.findIndex((function(t){return t.value==e}));if(t<0)var a={label:e,value:""},n=[].concat(Object(we.a)(Me),[a]);else n=[].concat(Object(we.a)(Me),[He[t]]);Ae(n),console.log(Me)}function ht(){return(ht=Object(o.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.document.getElementsByClassName("note-editable")[0],a={subject:Ce,created_by:Ue,file_url:Xe,module_id:s,message:t.innerHTML,letter_number:je},p.includes("Customer")?(a.handled_by_user_id="",a.sender=le,a.letter_date=H()(new Date,"yyyy-mm-dd"),a.accepted_time=H()(new Date,"HH:MM:ss"),a.tags=[],a.status_id=q):(a.sender=""!==le?le:de,a.handled_by_user_id="",a.letter_date=fe,a.accepted_time=Ee,a.tags=Me,a.status_id=q),""===O||null===O||void 0===O){e.next=14;break}return e.prev=4,e.next=7,k.a.put("/api/sism-letter_in/".concat(O),a).then((function(e){if(console.log(e),200===e.data.status){if(Xe.length>0){var t=new FormData;K.map((function(e,a){t.append("file",e)})),console.log(t);try{k.a.post("/upload-file-sism",t).then((function(e){e.data.success&&console.log("succes upload")}))}catch(Vc){console.log(Vc)}}nt("SUCCESS","Letter Submitted"),p.includes("Customer")?ce("Insert New Outgoing Letter",s):ce("Insert New Incoming Letter",s),window.history.go(-1)}}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.post("/api/sism-letter_in/",a).then((function(e){if(console.log(e),200===e.data.status){if(Xe.length>0){var t=new FormData;K.map((function(e,a){t.append("file",e)})),console.log(t);try{k.a.post("/upload-file-sism",t).then((function(e){e.data.success&&console.log("succes upload")}))}catch(Vc){console.log(Vc)}}nt("SUCCESS","Letter Submitted"),p.includes("Customer")?ce("Insert New Outgoing Letter",s):ce("Insert New Incoming Letter",s),window.history.go(-1)}}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:p.includes("Customer")?r.a.createElement("b",null,"New Letter"):r.a.createElement("b",null,"Form Incoming Letter"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw",borderRadius:8}},p.includes("Customer")?r.a.createElement(y.D,{icon:r.a.createElement(y.q,null,"how_to_reg"),disabled:!0,placeholder:"To",label:"To",value:"PT MSO Purwokerto",inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6"}):"",r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-list-ol"}),placeholder:"Letter No",label:"Letter No",onChange:function(e){Te(e)},value:je,inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-align-left"}),placeholder:"Subject",label:"Subject",onChange:function(e){Ne(e)},value:Ce,inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6"}),p.includes("Customer")?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"summernote"}," "),r.a.createElement("br",null),Xe.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:e,removable:!0,onClick:function(){return ot(e)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:it,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(n.Fragment,null,r.a.createElement(y.k,{leftIcon:"fa fa-calendar",onChange:rt,value:fe,placeholder:"Date Letter",className:"md-cell md-cell--4-tablet md-cell--6",style:{marginTop:20}}),r.a.createElement(y.E,{leftIcon:"fa fa-calendar",onChange:lt,value:Ee,placeholder:"Accepted Time ",locales:"da-DK",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.y,{id:"select-field-2",placeholder:"Select BPR/Client",menuItems:M,anchor:{x:y.w.HorizontalAnchors.CENTER,y:y.w.VerticalAnchors.TOP},onChange:ct,value:null===de?le:de,className:"md-cell md-cell--4-tablet md-cell--6"}),te?r.a.createElement(y.D,{icon:r.a.createElement(y.q,null,"how_to_reg"),placeholder:"Sender Name",label:"Sender Name",onChange:st,value:de,inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6",style:{marginBottom:20}}):"",r.a.createElement("div",{className:"summernote",style:{marginTop:20}}," "),r.a.createElement("br",null),Xe.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:e,removable:!0,onClick:function(){return ot(e)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:it,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("br",null),r.a.createElement("br",null),Me.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{className:"state-chip",label:e.label,removable:!0,onClick:function(){return function(e){var t=Me.filter((function(t){return!t.label.includes(e)}));Ae(t)}(e.label)}}),"\xa0")})),r.a.createElement(y.b,{id:"select-field-tags",label:"Tags",autoComplete:"on",dataLabel:"label",clearOnAutocomplete:!0,dataValue:"value",data:He,filter:y.b.fuzzyFilter,value:w,onFocus:dt,onChange:ut,onKeyDown:mt,onAutocomplete:pt,className:"md-cell md-cell--4-tablet md-cell--12"}),r.a.createElement("br",null)),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return ht.apply(this,arguments)}},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:function(){return window.history.go(-1)}},"Cancel")))))}var kl={routeProps:{path:"/sism/letter-in/form",exact:!0,component:vl},name:"Form"},xl={routeProps:{path:"/sism/letter-in/form/:id",exact:!0,component:vl},name:"FormEdit"},wl=x.Session.get().payload,Sl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.fetchData()},a.fetchData=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a.setState({module_id:e._id}),!1}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user-role/".concat(a.state.module_id,"/").concat(a.state.created_by)).then((function(e){200===e.data.status&&(a.setState({role:e.data.data[0].role}),a.setState({role_id:e.data.data[0].role_id}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.post("/api/role-control-by-link-role-id",{link:window.location.pathname,role_id:a.state.role_id}).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){"read"===e.type_control&&a.setState({role_read:!0}),"create"===e.type_control&&a.setState({role_create:!0}),"update"===e.type_control&&a.setState({role_update:!0}),"delete"===e.type_control&&a.setState({role_delete:!0})}))}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:if(!a.state.role.includes("Customer")){e.next=53;break}return e.prev=27,e.next=30,k.a.get("/api/user/".concat(a.state.created_by)).then((function(e){200===e.data.status&&(a.state.client_id=e.data.data[0].client_id)}));case 30:e.next=35;break;case 32:e.prev=32,e.t3=e.catch(27),console.log(e.t3);case 35:return e.prev=35,e.next=38,k.a.get("/api/sism-letters_in-total?client_id=".concat(a.state.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 38:e.next=43;break;case 40:e.prev=40,e.t4=e.catch(35),console.log(e.t4);case 43:return e.prev=43,e.next=46,k.a.get("/api/sism-letters_in?client_id=".concat(a.state.client_id,"&currentPage=").concat(a.state.currentPage,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 46:e.next=51;break;case 48:e.prev=48,e.t5=e.catch(43),console.log(e.t5);case 51:e.next=63;break;case 53:return a.loadClients(),e.prev=54,e.next=57,k.a.get("/api/sism-letters_out-total").then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 57:e.next=62;break;case 59:e.prev=59,e.t6=e.catch(54),console.log(e.t6);case 62:try{k.a.get("/api/sism-letters_out?currentPage=".concat(a.state.currentPage,"&displayPerPage=").concat(a.state.displayPerPage)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(n){console.log(n)}case 63:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[18,23],[27,32],[35,40],[43,48],[54,59]])}))),a.loadClients=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(e.client_code>0){var n={label:e.client_code+"-"+e.client_name,value:e.client_name};t[a]=n}return!1})),a.setState({clients:t})}}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.search=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=14;break}return e.prev=3,e.next=6,k.a.get("/api/sism-letters_in-total?currentPage=".concat(0,"&displayPerPage=",0,"&key=",t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:try{k.a.get("/api/sism-letters_in?currentPage=".concat(1,"&displayPerPage=",a.state.displayPerPage,"&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}e.next=16;break;case 14:try{k.a.get("/api/sism-letters_out-total?key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(r){console.log(r)}try{k.a.get("/api/sism-letters_out?currentPage=".concat(1,"&displayPerPage=",a.state.displayPerPage,"&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}case 16:a.setState({currentPage:1}),console.log(a.state.total_data);case 18:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e}),a.setState({dialogDeleteVisible:!0})},a.deleteLetter=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.role.includes("Customer")){e.next=11;break}return e.prev=1,e.next=4,k.a.delete("/api/sism-letter_in/".concat(a.state._id)).then((function(e){200===e.data.status&&(a.notify("SUCCESS",e.data.message),a.setState({_id:""}),a.setState({dialogDeleteVisible:!1}),a.fetchData())}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:e.next=19;break;case 11:return e.prev=11,e.next=14,k.a.delete("/api/sism-letter_out/".concat(a.state._id)).then((function(e){200===e.data.status&&(a.notify("SUCCESS",e.data.message),a.setState({_id:""}),a.setState({dialogDeleteVisible:!1}),a.fetchData())}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[1,6],[11,16]])}))),a.notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.setActivePage=function(e){a.setState({currentPage:e}),a.loadDataByPage(e)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=13;break}return e.prev=3,e.next=6,k.a.get("/api/sism-letters_in?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=21;break;case 13:return e.prev=13,e.next=16,k.a.get("/api/sism-letters_out?currentPage=".concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[3,8],[13,18]])})));return function(t){return e.apply(this,arguments)}}(),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=13;break}return e.prev=3,e.next=6,k.a.get("/api/sism-letters_in?currentPage=".concat(0,"&displayPerPage=",0,"&key=",a.state.key).concat(n)).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.To="PT MSO Purwokerto",r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=21;break;case 13:return e.prev=13,e.next=16,k.a.get("/api/sism-letters_out?currentPage=".concat(0,"&displayPerPage=",0,"&key=",a.state.key).concat(n)).then((function(e){if(200===e.data.status){var a=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).No=n+1,r["Letter Number"]=t.letter_number,r.Subject=t.subject,r.To="",null!==t.client_name&&""!==t.client_name&&void 0!==t.client_name&&(r.To+=t.client_name),r.To+=",",null!==t.client_name_non_bpr&&""!==t.client_name_non_bpr&&void 0!==t.client_name_non_bpr&&(r.To+=t.client_name_non_bpr),r.Date=H()(t.letter_date,"dd mmm yyyy"),a.push(r),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=a}}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",r="All Outgoing Letter  per ".concat(H()(new Date,"dd-mm-yyyy")),l=We.utils.json_to_sheet(t),c={Sheets:{data:l},SheetNames:["data"]},s=We.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(d,r+".xlsx");case 30:case"end":return e.stop()}}),e,null,[[3,8],[13,18]])}))),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),!a.state.role.includes("Customer")){e.next=12;break}return e.prev=2,e.next=5,k.a.get("/api/sism-letters_in?currentPage=".concat(0,"&displayPerPage=",0,"&key=",a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=20;break;case 12:return e.prev=12,e.next=15,k.a.get("/api/sism-letters_out?currentPage=".concat(0,"&displayPerPage=",0,"&key=",a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,7],[12,17]])}))),a.onChangeClientId=function(e){a.setState({client_id:e})},a.onChangeFromDate=function(e){a.setState({date_from:e})},a.onChangeToDate=function(e){a.setState({date_to:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),t=a.state.key,!a.state.role.includes("Customer")){e.next=19;break}if(""!==a.state.date_from||""!==a.state.date_from){e.next=16;break}return n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id),e.prev=5,e.next=8,k.a.get("/api/sism-letters_in-total?currentPage=".concat(0,"&displayPerPage=",0,"&key=",t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:try{k.a.get("/api/sism-letters_in?currentPage=".concat(1,"&displayPerPage=",a.state.displayPerPage,"&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}e.next=17;break;case 16:a.fetchData();case 17:e.next=20;break;case 19:if(""===a.state.date_from&&""===a.state.date_from){n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id);try{k.a.get("/api/sism-letters_out-total?key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}))}catch(r){console.log(r)}try{k.a.get("/api/sism-letters_out?currentPage=".concat(1,"&displayPerPage=",a.state.displayPerPage,"&key=").concat(t).concat(n)).then((function(e){200===e.data.status&&(a.setState({data:e.data.data}),a.setState({isLoading:!1}))}))}catch(r){console.log(r)}}else a.fetchData();case 20:a.setState({currentPage:1});case 21:case"end":return e.stop()}}),e,null,[[5,10]])}))),a.resetFilter=function(e){a.state.role.includes("Customer")?a.setState({date_from:"",date_to:""}):a.setState({client_id:"",date_from:"",date_to:""})},a.setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.LetterOutAll=function(){for(var e=a.state.role.includes("Customer")?[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"Subject",width:"15%"},{label:"To",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}]:[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"",width:"5%"},{label:"Subject",width:"15%"},{label:"To",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}],t=[],l=a.state.currentPage+2,c=Math.ceil(a.state.total_data/a.state.displayPerPage),s=l>c?c:l,i=a.state.currentPage-3;i<=s;i++)t[i-1]=i;return r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),value:a.state.key,placeholder:"Search ... ",onChange:a.search})),r.a.createElement(y.i,{size:2,style:{alignItems:"right"}},r.a.createElement("button",{className:"button is-small is-link",onClick:function(){return a.setState({isFilter:!a.state.isFilter})},style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0 ",r.a.createElement("b",null,"Filter")),r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:a.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:a.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return a.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary",style:{borderRadius:"4px"}},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Cl,{ref:function(e){return a.componentRef=e},role:a.state.role,data:a.state.dataToExportPDF})))),a.state.isFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px",overflowX:"scroll"}},r.a.createElement("h4",null,"Filter"),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeFromDate,value:a.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--12",displayMode:"landscape",onChange:a.onChangeToDate,value:a.state.date_to}),a.state.role.includes("Customer")?"":r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client",fullWidth:!0,menuItems:a.state.clients,onChange:a.onChangeClientId,value:a.state.client_id}),r.a.createElement("br",null),r.a.createElement(y.d,{raised:!0,primary:!0,onClick:a.filter},"Apply"),r.a.createElement(y.d,{flat:!0,onClick:a.resetFilter},"Reset")))):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px"}},r.a.createElement("table",{className:"table  is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,e.map((function(e,t){return r.a.createElement("th",null,e.label)})))),r.a.createElement("tbody",null,a.state.data.map((function(e,t){return a.state.role.includes("Customer")?r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},r.a.createElement(y.c,null,"PT MSO Purwokerto".charAt(0))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",{width:"20%"},"PT MSO Purwokerto"),r.a.createElement("td",{width:"12%"},H()(e.letter_date,"dd mmm yyyy")),a.state.role_delete&&a.state.role_update?r.a.createElement("td",null,r.a.createElement(Pl,{id:e._id,setUpdate:function(e){return a.setUpdate(e)},setDelete:function(e){return a.setDelete(e)}})):""):r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},r.a.createElement(y.c,null,null===e.client_code?"-":e.client_code)),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,e.total_approved>0?r.a.createElement("span",{className:"tag is-success",style:{padding:"10px"}},r.a.createElement("i",{className:"fa fa-check"})," \xa0 APPROVED"):""),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",{width:"20%"},null===e.client_name?"":e.client_name," , ",null===e.client_name_non_bpr?"":e.client_name_non_bpr),r.a.createElement("td",{width:"12%"},H()(e.letter_date,"dd mmm yyyy")),a.state.role_delete&&a.state.role_update?r.a.createElement("td",null,r.a.createElement(Pl,{id:e._id,setUpdate:function(e){return a.setUpdate(e)},setDelete:function(e){return a.setDelete(e)}})):"")}))))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,null,t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(e){return a.isActive(e)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return a.setActivePage(e)}},r.a.createElement("b",null,e)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return a.setActivePage(e)}},r.a.createElement("b",null,e))})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:a.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))},a.state={isLoading:null,module_id:"",role:"",role_id:"",data:[],dataToExport:[],dataToExportPDF:[],total_data:0,unapproved_letter_in:[],modules:[],key:"",toasts:"",_id:"",isFilter:!1,dialogVisible:!1,dialogDeleteVisible:!1,created_by:wl.userId,date_from:"",date_to:"",clients:[],client_id:"",list_contain:"letter-out-all",role_create:!1,role_update:!1,role_read:!1,role_delete:!1,currentPage:1,displayPerPage:50},G()(K).on("LETTER_OUT_ADDED",(function(e){a.fetchData()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[{color:"#348066",action:"letter-out-all",icon:"fa fa-envelope-open",tooltip:r.a.createElement("b",null,"All \xa0 (",this.state.total_data,")")}];return this.state.isLoading?r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading data ...")):r.a.createElement("div",null,this.state.role_create?r.a.createElement(_.a,{to:"/sism/letter-out/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):"",r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Outgoing Letters")),r.a.createElement(y.i,{size:6})),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,t.map((function(t,a){return e.state.list_contain===t.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0",t.tooltip," ")):r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,padding:"10px 5px 0 0 "}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0 ",t.tooltip," "))})))),function(){switch(e.state.list_contain){case"letter-out-all":return r.a.createElement(e.LetterOutAll,null);default:return""}}(),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.deleteLetter},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component),Pl=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[];return t=this.props.is_reply_required?[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/sism/letter-out/form?id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:r.a.createElement(_.a,{to:"/sism/letter-out/form?letter_in_id=".concat(this.props.id)},"Reply \xa0",r.a.createElement("i",{className:"fa fa-share"})," "),style:{top:0,backgroundColor:"lightgreen",marginTop:"0em"}})]:[r.a.createElement(y.u,{key:1,primaryText:r.a.createElement(_.a,{to:"/sism/letter-out/form?id=".concat(this.props.id)},"Edit \xa0",r.a.createElement("i",{className:"fa fa-pencil"})," "),style:{backgroundColor:"lightblue"}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})],r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),Cl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={role:a.props.role},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=(this.state.role.includes("Customer"),[{label:"",width:"5%"},{label:"Letter No",width:"15%"},{label:"Subject",width:"15%"},{label:"To",width:"15%"},{label:"Date",width:"10%"},{label:"",width:"2%"}]);return r.a.createElement("div",{style:{padding:"2.5%"}},r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:6},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Outgoing Letters"),r.a.createElement("p",null,"per ",H()(new Date,"dd mmm yyyy, HH:MM"))),r.a.createElement(y.i,{size:6})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"8px"}},r.a.createElement("table",{className:"table  is-striped",style:{fontSize:"9pt"}},r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",null,e.label)})))),r.a.createElement("tbody",null,this.props.data.map((function(t,a){return e.state.role.includes("Customer")?r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},a+1),r.a.createElement("td",null,t.letter_number),r.a.createElement("td",null,t.subject),r.a.createElement("td",{width:"20%"},"PT MSO Purwokerto"),r.a.createElement("td",{width:"12%"},H()(t.letter_date,"dd mmm yyyy"))):r.a.createElement("tr",null,r.a.createElement("td",{width:"5%"},a+1),r.a.createElement("td",null,t.letter_number),r.a.createElement("td",null,t.subject),r.a.createElement("td",{width:"20%"},null===t.client_name?"":t.client_name," , ",null===t.client_name_non_bpr?"":t.client_name_non_bpr),r.a.createElement("td",{width:"12%"},H()(t.letter_date,"dd mmm yyyy")))}))))))))}}]),t}(n.Component),Nl={routeProps:{path:"/sism/letter-out",exact:!0,component:Sl},name:"LetterOut"},Ol=x.Session.get().payload;new FormData;function Dl(e){var t=Object(n.useState)(""),a=Object(ol.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),d=Object(ol.a)(s,2),u=(d[0],d[1],Object(n.useState)([])),m=Object(ol.a)(u,2),p=(m[0],m[1],Object(n.useState)([])),f=Object(ol.a)(p,2),h=(f[0],f[1],Object(n.useState)([])),g=Object(ol.a)(h,2),b=(g[0],g[1],Object(n.useState)([])),E=Object(ol.a)(b,2),_=(E[0],E[1],Object(n.useState)("")),v=Object(ol.a)(_,2),x=(v[0],v[1],Object(n.useState)(Ol.userId)),w=Object(ol.a)(x,2),P=(w[0],w[1],Object(n.useState)("")),C=Object(ol.a)(P,2),N=(C[0],C[1],Object(n.useState)(Ol.userId)),O=Object(ol.a)(N,2),D=O[0];O[1];function j(){return(j=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{k.a.get("/api/user/".concat(Ol.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return console.log(e.structure_id),!1}))}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){U()(".summernote").summernote({placeholder:"Add Rejection Note",height:"20vh"});var e=F.a.parse(window.location.search);console.log(e),c(e.ticket_id),void 0!==e&&null!==e&&""!==e&&c(e.id),function(){j.apply(this,arguments)}()}),[]);var T=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function I(){return(I=Object(o.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.document.getElementsByClassName("note-editable")[0],n={letter_out_id:l,note:'<span class="tag is-danger" style="padding:10px" ><i class="fa fa-minus-circle"></i> &nbsp; REJECTED</span> <br /><br />'+a.innerHTML,created_by:Ol.userId,reviewed_by_user_id:D,is_approved:0,module_id:e.module_id},t.prev=2,t.next=5,k.a.post("/api/sism-letter-out-approval",n).then((function(t){200===t.data.status?(T("SUCCESS","You Rejected!"),R(),e.successRejectApproval(l)):T("ERROR","Failed Processing data")}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),T("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function R(){e.closeFormRejectApproval(!1)}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:" box  md-cell md-cell--12"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Reject  Outgoing Letter"),r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"summernote"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return I.apply(this,arguments)}},"Reject "),r.a.createElement(y.d,{raised:!0,onClick:R},"Cancel"))),r.a.createElement(S.a,null))}var jl=x.Session.get().payload;var Tl=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"20px"}},this.props.data.map((function(t,a){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-item",style:{textAlign:"center"}},r.a.createElement("p",{style:{fontWeight:"bold",textAlign:"center",textDecoration:"underline"}},"LEMBAR SURAT KELUAR"))),r.a.createElement("br",null),r.a.createElement("table",{border:0},r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Surat Kpd"),r.a.createElement("td",null,":"),r.a.createElement("td",null,e.props.role.includes("Customer")?"PT MSO Purwokerto":e.props.recipient.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("span",null,null===e.client_name?e.recipient:e.client_name),",\xa0")})))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Nomor Surat"),r.a.createElement("td",null,":"),r.a.createElement("td",null,t.letter_number," "),e.props.role.includes("Customer")?"":r.a.createElement("td",{rowSpan:5,style:{width:"10%",border:"1px"}},"Paraf Adm. Umum")),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Tanggal Surat"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},H()(t.letter_date,"dd/mm/yyyy"))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Dikirim Tanggal"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},H()(t.letter_date,"dd/mm/yyyy"))),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Jam"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2},t.accepted_time," ")),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Nomor Agenda"),r.a.createElement("td",null,":"),r.a.createElement("td",{colSpan:2})),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Sifat"),r.a.createElement("td",null,":"),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Perihal"),r.a.createElement("td",null,":"),r.a.createElement("td",null,t.subject," ")),r.a.createElement("tr",null,r.a.createElement("td",{width:"15%"},"Isi Pesan"),r.a.createElement("td",null,":"),r.a.createElement("td",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.message}})))),e.props.role.includes("Customer")?"":r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"columns",style:{marginTop:"20vh"}},r.a.createElement("div",{className:"column is-8"}),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf Dirut")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf DirOps")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}},r.a.createElement("table",{border:1,cellPadding:8},r.a.createElement("tr",null,r.a.createElement("td",{style:{minWidth:"100px"}},"Paraf Spv")),r.a.createElement("tr",null,r.a.createElement("td",{style:{height:"10vh"}})))),r.a.createElement("div",{className:"column is-1",style:{border:"1px",padding:"10px"}}))))})))}}]),t}(n.Component),Il={routeProps:{path:"/sism/letter-out/detail",exact:!0,component:function(e){var t=Object(n.useState)(""),a=Object(ol.a)(t,2),l=(a[0],a[1]),c=Object(n.useState)(!0),s=Object(ol.a)(c,2),d=(s[0],s[1],Object(n.useState)("")),u=Object(ol.a)(d,2),m=u[0],p=u[1],f=Object(n.useState)(null),h=Object(ol.a)(f,2),g=(h[0],h[1]),b=Object(n.useState)(null),E=Object(ol.a)(b,2),v=(E[0],E[1]),x=Object(n.useState)(null),w=Object(ol.a)(x,2),P=(w[0],w[1]),N=Object(n.useState)(null),O=Object(ol.a)(N,2),D=(O[0],O[1]),j=Object(n.useState)(""),T=Object(ol.a)(j,2),I=T[0],R=T[1],M=Object(n.useState)(jl.userId),A=Object(ol.a)(M,2),L=A[0],z=(A[1],Object(n.useState)("")),V=Object(ol.a)(z,2),B=V[0],U=V[1],q=Object(n.useState)(""),W=Object(ol.a)(q,2),Y=W[0],X=W[1],G=Object(n.useState)(""),K=Object(ol.a)(G,2),J=K[0],Q=K[1],$=Object(n.useState)(""),Z=Object(ol.a)($,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(""),ne=Object(ol.a)(ae,2),re=ne[0],le=(ne[1],Object(n.useState)([])),ce=Object(ol.a)(le,2),se=ce[0],ie=ce[1],oe=Object(n.useState)([]),de=Object(ol.a)(oe,2),ue=de[0],me=de[1],pe=Object(n.useState)([]),fe=Object(ol.a)(pe,2),he=fe[0],ge=fe[1],Ee=Object(n.useState)([]),_e=Object(ol.a)(Ee,2),ye=_e[0],ve=_e[1],ke=Object(n.useState)(0),xe=Object(ol.a)(ke,2),we=xe[0],Se=xe[1],Pe=Object(n.useState)([]),Ce=Object(ol.a)(Pe,2),Ne=Ce[0],Oe=Ce[1],De=Object(n.useState)(""),je=Object(ol.a)(De,2),Te=(je[0],je[1],Object(n.useState)(!1)),Ie=Object(ol.a)(Te,2),Re=Ie[0],Me=Ie[1],Ae=Object(n.useState)(!1),Fe=Object(ol.a)(Ae,2),Le=Fe[0],He=Fe[1],ze=Object(n.useRef)(null);function Ve(){return(Ve=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/role-control-by-link-role-id",{link:"/sism/letter-out",role_id:t}).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){"read"===e.type_control&&v(!0),"create"===e.type_control&&g(!0),"update"===e.type_control&&P(!0),"delete"===e.type_control&&D(!0)}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Be(){return(Be=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a.includes("Customer")?(We(t),Xe(t)):(Ue(t),Ye(t),Ge(t),Ke(t),Je(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){try{k.a.get("/api/sism-letter_out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(ie(e.data.data),R(e.data.data[0].letter_number),function(e){try{k.a.get("/api/sism-letter_in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(X(e.data.data[0].letter_number),Q(e.data.data[0].subject))}))}catch(t){console.log(t)}}(e.data.data[0].letter_in_id))}))}catch(t){console.log(t)}}function We(e){try{k.a.get("/api/sism-letter_in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(ie(e.data.data),R(e.data.data[0].letter_number))}))}catch(t){console.log(t)}}function Ye(e){try{k.a.get("/api/sism-letter-out-file-by-letter-out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&me(e.data.data)}))}catch(t){console.log(t)}}function Xe(e){try{k.a.get("/api/sism-letter-in-file-by-letter-in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&me(e.data.data)}))}catch(t){console.log(t)}}function Ge(e){try{k.a.get("/api/sism-letter-out-tag-by-letter-out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&ge(e.data.data)}))}catch(t){console.log(t)}}function Ke(e){try{k.a.get("/api/sism-letter-out-recipient-by-letter-out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&Oe(e.data.data)}))}catch(t){console.log(t)}}function Je(e){try{k.a.get("/api/sism-letter-out-approval-by-letter-out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(ve(e.data.data),e.data.data.map((function(e,t){1===e.is_approved&&Se(we+1)})))}))}catch(t){console.log(t)}}Object(n.useEffect)((function(){var e=F.a.parse(window.location.search);console.log(e),void 0!==e&&null!==e&&""!==e&&te(e.id);var t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(t){t.data.data.map((function(t,a){U(t._id);try{k.a.get("/api/user-role/".concat(t._id,"/").concat(jl.userId)).then((function(t){200===t.data.status&&t.data.data.length>0&&(p(t.data.data[0].role),l(t.data.data[0].role_id),function(e){Ve.apply(this,arguments)}(t.data.data[0].role_id),function(e,t){Be.apply(this,arguments)}(e.id,t.data.data[0].role))}))}catch(Vc){console.log(Vc)}return!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}}),[]);var Qe=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function $e(){return($e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={letter_out_id:ee,note:'<span class="tag is-success" style="padding:10px" ><i class="fa fa-check"></i> &nbsp; APPROVE</span>',is_approved:1,created_by:jl.userId,reviewed_by_user_id:L,letter_created_by:re,module_id:B},e.prev=1,e.next=4,k.a.post("/api/sism-letter-out-approval",t).then((function(e){200===e.data.status?(Qe("SUCCESS","You Approved this!"),Me(!1),Je(ee)):Qe("ERROR","Failed Processing")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Qe("ERROR",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Ze(){var e=new dl,t=0;ue.map((function(a,n){ul.getBinaryContent(a.file_url,(function(n,r){if(n)throw n;var l=a.file_url.replace(/.*\//g,"");e.file(l,r,{binary:!0}),++t==ue.length&&e.generateAsync({type:"blob"}).then((function(e){qe.saveAs(e,"file-surat-".concat(I,".zip"))}))}))}))}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail #"+I),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),se.map((function(e,t){return r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{minHeight:"77vh",padding:"2.5vw",borderRadius:"10px"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("p",null,r.a.createElement("b",null,H()(e.letter_date,"dd mmm yyyy"))),r.a.createElement("p",null,r.a.createElement("b",null,e.sent_time))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"columns",style:{justifyContent:"space-between",paddingLeft:"10px"}},r.a.createElement("div",{className:"level-item"},r.a.createElement("p",null,"[Outgoing Letter]")),r.a.createElement("div",{className:"level-item",style:{alignItems:"end"}},r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button  is-info",style:{borderRadius:"5px"}},r.a.createElement("i",{className:"fa fa-print"})," \xa0 Print")},content:function(){return ze}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Tl,{ref:function(e){return ze=e},role:m,data:se,approval:ye,recipient:Ne})))),r.a.createElement("p",null,r.a.createElement("h4",null,r.a.createElement("b",null,e.subject))),r.a.createElement("p",null,r.a.createElement("b",null,"To:")),m.includes("Customer")?r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{label:r.a.createElement(y.s,{label:"PT MSO Purwokerto",iconBefore:!0},r.a.createElement(y.c,null,"PT MSO Purwokerto".charAt(0))),style:{margin:"3px",paddingLeft:"20px",paddingTop:"8px",paddingRight:"8px",paddingBottom:"8px",fontSize:"9pt"}}),r.a.createElement("p",null,"\xa0")):r.a.createElement(n.Fragment,null,Ne.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{label:r.a.createElement(y.s,Object(C.a)({style:{marginRight:"10px",padding:"3px",fontSize:"9pt"},label:null===e.client_name?e.recipient:e.client_name,iconBefore:!0},"style",{marginBottom:10}),r.a.createElement(y.c,{style:{marginRight:"15px"}},null===e.client_code?e.recipient.charAt(0):e.client_code)),style:{margin:"3px",paddingLeft:"20px",paddingTop:"8px",paddingRight:"8px",paddingBottom:"8px",fontSize:"9pt"}}),"\xa0")})),r.a.createElement("p",null,"\xa0")),""===e.message||null===e.message?"":r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.message}})),ue.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"level",style:{justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Attachments:"))),r.a.createElement("div",null,r.a.createElement("button",{className:"button  is-info",style:{borderRadius:"5px"},onClick:Ze},r.a.createElement("i",{className:"fa fa-download"})," \xa0 Download"))),ue.map((function(e,t){var a=e.file_url.split("."),n=a[a.length-1];return console.log(n),"png"===n||"jpg"===n||"jpeg"===n?r.a.createElement("img",{src:e.file_url,alt:"file_image",style:{width:"75%"}}):r.a.createElement("iframe",{src:e.file_url,frameborder:"0",style:{width:"100%",height:"75vh"}})})),r.a.createElement("br",null)):"",he.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Tags:")),he.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{className:"state-chip",label:e.tag}),"\xa0")})),r.a.createElement("br",null)):"",r.a.createElement("br",null),""===e.letter_in_id||m.includes("Customer")?"":r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Incoming Letter:")),r.a.createElement("span",{className:"tag",style:{margin:"5px",fontSize:"12pt"}},r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e.letter_in_id)},r.a.createElement("b",null,Y+" - "+J)))," ",r.a.createElement("br",null)),r.a.createElement("br",null),function(){if(!m.includes("Customer"))return r.a.createElement(n.Fragment,null,ye.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Approval:")),ye.map((function(e,t){return r.a.createElement("div",{className:"notification is-light",style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},null!==e.avatar_url?r.a.createElement(y.c,{src:e.avatar_url}):r.a.createElement(y.c,null,e.full_name.charAt(0))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("b",null,e.full_name," - ",e.structure," ")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("i",null,H()(e.created_at,"dd mmm yyyy, HH:MM"))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.note}})))))}))):"",we<=0&&(m.includes("Admin")||m.includes("admin")||m.includes("Direktur Utama"))?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Select Action:")),Le?r.a.createElement(Dl,{module_id:B,_id:ee,closeFormRejectApproval:function(e){return function(e){He(e)}(e)},successRejectApproval:function(e){return function(e){Je(e)}(e)}}):r.a.createElement(n.Fragment,null,r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return Me(!0)}},"APPROVE "),"\xa0",r.a.createElement(y.d,{raised:!0,style:{backgroundColor:"pink"},onClick:function(){return He(!0)}},"REJECT"))):"")}()))))))}))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:Re,onHide:function(){return Me(!1)},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:function(){return $e.apply(this,arguments)}},"YES"),r.a.createElement(y.d,{onClick:function(){return Me(!1)}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure to proceed?")))}},name:"Detail"},Rl=x.Session.get().payload;new FormData;function Ml(e){var t=Object(n.useState)(null),a=Object(ol.a)(t,2),l=(a[0],a[1],Object(n.useState)("")),c=Object(ol.a)(l,2),s=c[0],d=c[1],u=Object(n.useState)(""),m=Object(ol.a)(u,2),p=m[0],f=m[1],h=Object(n.useState)(""),g=Object(ol.a)(h,2),b=(g[0],g[1]),E=Object(n.useState)(""),v=Object(ol.a)(E,2),x=(v[0],v[1],Object(n.useState)("")),w=Object(ol.a)(x,2),P=w[0],C=w[1],N=Object(n.useState)(""),O=Object(ol.a)(N,2),D=O[0],j=O[1],T=Object(n.useState)(""),I=Object(ol.a)(T,2),R=I[0],M=I[1],A=Object(n.useState)(""),L=Object(ol.a)(A,2),z=L[0],V=L[1],B=Object(n.useState)(""),q=Object(ol.a)(B,2),W=q[0],Y=q[1],X=Object(n.useState)(""),G=Object(ol.a)(X,2),K=G[0],J=G[1],Q=Object(n.useState)(""),$=Object(ol.a)(Q,2),Z=($[0],$[1],Object(n.useState)("")),ee=Object(ol.a)(Z,2),te=(ee[0],ee[1],Object(n.useState)([])),ae=Object(ol.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)([]),se=Object(ol.a)(le,2),ie=(se[0],se[1],Object(n.useState)(0)),oe=Object(ol.a)(ie,2),de=oe[0],ue=(oe[1],Object(n.useState)([])),me=Object(ol.a)(ue,2),pe=(me[0],me[1],Object(n.useState)([])),fe=Object(ol.a)(pe,2),he=fe[0],ge=fe[1],be=Object(n.useState)(!1),Ee=Object(ol.a)(be,2),_e=(Ee[0],Ee[1],Object(n.useState)(!1)),ye=Object(ol.a)(_e,2),ve=(ye[0],ye[1],Object(n.useState)("")),ke=Object(ol.a)(ve,2),xe=ke[0],Se=ke[1],Pe=Object(n.useState)(""),Ce=Object(ol.a)(Pe,2),Ne=(Ce[0],Ce[1],Object(n.useState)(new Date)),Oe=Object(ol.a)(Ne,2),De=(Oe[0],Oe[1]),je=Object(n.useState)(""),Te=Object(ol.a)(je,2),Ie=(Te[0],Te[1],Object(n.useState)("")),Re=Object(ol.a)(Ie,2),Me=Re[0],Ae=Re[1],Fe=Object(n.useState)(""),Le=Object(ol.a)(Fe,2),He=Le[0],ze=Le[1],Ve=Object(n.useState)(""),Be=Object(ol.a)(Ve,2),Ue=Be[0],qe=Be[1],We=Object(n.useState)(""),Ye=Object(ol.a)(We,2),Xe=(Ye[0],Ye[1],Object(n.useState)([])),Ge=Object(ol.a)(Xe,2),Ke=Ge[0],Je=Ge[1],Qe=Object(n.useState)([]),$e=Object(ol.a)(Qe,2),Ze=$e[0],et=$e[1],tt=Object(n.useState)([]),at=Object(ol.a)(tt,2),nt=at[0],rt=at[1],lt=Object(n.useState)(Rl.userId),ct=Object(ol.a)(lt,2),st=ct[0],it=ct[1],ot=Object(n.useState)([]),dt=Object(ol.a)(ot,2),ut=dt[0],mt=dt[1];function pt(){return(pt=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),""!==t&&null!==t&&void 0!==t&&(ft(t),ht(t),gt(t),bt(t)),Et(),_t(),yt();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){try{k.a.get("/api/sism-letter_out/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(it(e.data.data[0].created_by),qe(e.data.data[0].letter_number),De(e.data.data[0].letter_date),ze(e.data.data[0].subject),Ae(e.data.data[0].message),U()(".summernote").summernote("code",e.data.data[0].message))}))}catch(t){console.log(t)}console.log(Me),window.document.getElementsByClassName("note-editable")[0].innerHTML=Me}function ht(e){try{k.a.get("/api/sism-letter-out-recipient-by-letter-out/".concat(e)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:null===e.client_name?e.recipient:e.client_code+" - "+e.client_name,value:e.recipient};return t[a]=n,!1})),rt(t)}}))}catch(t){console.log(t)}}function gt(e){try{k.a.get("/api/sism-letter-out-tag-by-letter-out/".concat(e)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.tag,value:e.tag_id};return t[a]=n,!1})),Je(t)}}))}catch(t){console.log(t)}}function bt(e){try{k.a.get("/api/sism-letter-out-file-by-letter-out/".concat(e)).then((function(e){if(200===e.data.status&&200===e.data.status){var t=[];e.data.data.map((function(e,a){return t[a]=e.file_url.replace("/sism/files/",""),!1})),mt(t)}}))}catch(t){console.log(t)}}function Et(){if(p.includes("Customer"))try{k.a.get("/api/user/".concat(st)).then((function(e){200===e.data.status&&Se(e.data.data[0].client_id)}))}catch(e){console.log(e)}}function _t(){if(""===xe&&!p.includes("Customer"))try{k.a.get("/api/clients").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.client_code+" - "+e.client_name,value:e._id};return t[a]=n,!1})),re(t)}}))}catch(e){console.log(e)}}function yt(){if(!p.includes("Customer"))try{k.a.get("/api/sism-tags").then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:e.tag,value:e._id};return t[a]=n,!1})),et(t)}}))}catch(e){console.log(e)}}Object(n.useEffect)((function(){U()(".summernote").summernote({placeholder:"Message",height:"20vh"});var e=F.a.parse(window.location.search);void 0!==e.id&&null!==e.id&&""!==e.id&&C(e.id),void 0!==e.letter_in_id&&null!==e.letter_in_id&&""!==e.letter_in_id&&(V(e.letter_in_id),function(e){try{k.a.get("/api/sism-letter_in/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&(Y(e.data.data[0].letter_number),J(e.data.data[0].subject))}))}catch(t){console.log(t)}}(e.letter_in_id),function(e){try{k.a.get("/api/sism-letter-in-sender-by-letter-in/".concat(e)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){var n={label:null===e.client_name?e.sender:e.client_code+" - "+e.client_name,value:e.sender};return t[a]=n,!1})),rt(t)}}))}catch(t){console.log(t)}}(e.letter_in_id));var t=window.location.href.split("/");try{k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){d(e._id);try{k.a.get("/api/user-role/".concat(e._id,"/").concat(Rl.userId)).then((function(e){200===e.data.status&&(f(e.data.data[0].role),b(e.data.data[0].role_id))}))}catch(Vc){console.log(Vc)}return!1}))}))}catch(Vc){console.error("Data Not Loaded ",Vc)}!function(e){pt.apply(this,arguments)}(e.id)}),[]);var vt=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})};function kt(e,t){var a=[].concat(Object(we.a)(ut),[e.name]),n=[].concat(Object(we.a)(he),[e]);mt(a),ge(n)}function xt(e){var t=he.filter((function(t){return!t.name.includes(e)})),a=ut,n=a.indexOf(e);n>-1&&a.splice(n,1),mt(t)}function wt(e){j(e)}function St(e){"Enter"===e.key&&(Ct(D),j(""))}function Pt(e){D!==e&&Ct(e)}function Ct(e){var t=Ze.findIndex((function(t){return t.value==e}));if(t<0)var a={label:e,value:""},n=[].concat(Object(we.a)(Ke),[a]);else n=[].concat(Object(we.a)(Ke),[Ze[t]]);Je(n),console.log(Ke)}function Nt(e){M(e)}function Ot(e){"Enter"===e.key&&(jt(R),M(""))}function Dt(e){D!==e&&jt(e)}function jt(e){var t=ne.findIndex((function(t){return t.value==e}));if(t<0)var a={label:e,value:""},n=[].concat(Object(we.a)(nt),[a]);else n=[].concat(Object(we.a)(nt),[ne[t]]);rt(n)}function Tt(){return(Tt=Object(o.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.document.getElementsByClassName("note-editable")[0],a={subject:He,created_by:st,file_url:ut,module_id:s,letter_in_id:z,letter_number:Ue},p.includes("Customer")?(a.handled_by_user_id="",a.sender=xe,a.letter_date=H()(new Date,"yyyy-mm-dd"),a.accepted_time=H()(new Date,"HH:MM:ss"),a.tags=[],a.status_id=de):(a.recipients=nt,a.handled_by_user_id="",a.letter_date=H()(new Date,"yyyy-mm-dd"),a.sent_time=H()(new Date,"HH:MM:ss"),a.tags=Ke,a.status_id=de),""!==P&&null!==P&&void 0!==P){e.next=15;break}return a.message=t.innerHTML,e.prev=5,e.next=8,k.a.post("/api/sism-letter_out",a).then((function(e){if(console.log(e),200===e.data.status){if(ut.length>0){var t=new FormData;he.map((function(e,a){t.append("file",e)})),console.log(t);try{k.a.post("/upload-file-sism",t).then((function(e){e.data.success&&console.log("succes upload")}))}catch(Vc){console.log(Vc)}}vt("SUCCESS","Letter Submitted"),ce("Insert New Outgoing Letter",s),window.history.go(-1)}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:e.next=24;break;case 15:return a.message=t.innerHTML,e.prev=16,e.next=19,k.a.put("/api/sism-letter_out/".concat(P),a).then((function(e){if(console.log(e),200===e.data.status){if(ut.length>0){var t=new FormData;he.map((function(e,a){t.append("file",e)})),console.log(t);try{k.a.post("/upload-file-sism",t).then((function(e){e.data.success&&console.log("succes upload")}))}catch(Vc){console.log(Vc)}}vt("SUCCESS","Letter Submitted"),ce("Insert New Outgoing Letter",s),window.history.go(-1)}}));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log(e.t1);case 24:case"end":return e.stop()}}),e,null,[[5,10],[16,21]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:p.includes("Customer")?r.a.createElement("b",null,"New Letter"):r.a.createElement("b",null,"New  Outgoing Letter"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw",borderRadius:8}},""!==z?r.a.createElement(y.x,{style:{padding:"2.5vw",borderRadius:8}},r.a.createElement("b",null,"IN REPLY TO : ",r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(z)},W," \xa0 - \xa0 ",K)," ")):"",r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-list-ol"}),placeholder:"Letter No",label:"Letter No",onChange:function(e){qe(e)},value:Ue,inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-align-left"}),placeholder:"Subject",label:"Subject",onChange:function(e){ze(e)},value:He,inputClassName:"txt_subject",className:"md-cell md-cell--4-tablet md-cell--6"}),p.includes("Customer")?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"summernote"},Me),r.a.createElement("br",null),ut.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:e,removable:!0,onClick:function(){return xt(e)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:kt,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(n.Fragment,null,nt.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{className:"state-chip",label:e.label,removable:!0,onClick:function(){return function(e){var t=nt.filter((function(t){return!t.label.includes(e)}));console.log(t),rt(t)}(e.label)}}),"\xa0")})),r.a.createElement(y.b,{id:"select-field-recipients",label:"Recipients",autoComplete:"on",dataLabel:"label",placeholder:"Type, then press ENTER",clearOnAutocomplete:!0,dataValue:"value",data:ne,filter:y.b.fuzzyFilter,value:R,onChange:Nt,onKeyDown:Ot,onAutocomplete:Dt,className:"md-cell md-cell--4-tablet md-cell--12",style:{marginBottom:20}}),r.a.createElement("div",{className:"summernote",style:{marginTop:20}},Me),r.a.createElement("br",null),ut.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(y.j,{className:"state-chip",label:e,removable:!0,onClick:function(){return xt(e)}}),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement(y.p,{id:"multiple-file-upload",multiple:!0,onLoad:kt,style:{backgroundColor:"#359ce6"},name:"multipart-file-upload",label:"Select files"}),r.a.createElement("br",null),r.a.createElement("br",null),Ke.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(y.j,{className:"state-chip",label:e.label,removable:!0,onClick:function(){return function(e){var t=Ke.filter((function(t){return!t.label.includes(e)}));Je(t)}(e.label)}}),"\xa0")})),r.a.createElement(y.b,{id:"select-field-tags",label:"Tags",autoComplete:"on",dataLabel:"label",clearOnAutocomplete:!0,dataValue:"value",data:Ze,filter:y.b.fuzzyFilter,value:D,onChange:wt,onKeyDown:St,onAutocomplete:Pt,className:"md-cell md-cell--4-tablet md-cell--12"}),r.a.createElement("br",null)),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:function(){return Tt.apply(this,arguments)}},"Submit"),r.a.createElement(y.d,{raised:!0,onClick:function(){return window.history.go(-1)}},"Cancel")))))}var Al={routeProps:{path:"/sism/letter-out/form",exact:!0,component:Ml},name:"Form"},Fl={routeProps:{path:"/sism/letter-out/form/:id",exact:!0,component:Ml},name:"FormEdit"},Ll=(a(571),x.Session.get().payload),Hl={routeProps:{path:"/sism/tracking",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).loadLetterOutReplies=function(e){try{k.a.get("/api/letter_out_replies/".concat(e)).then((function(e){200===e.data.status&&e.data.data.length>0&&a.setState({replies:e.data.data})}))}catch(t){console.log(t)}},a.addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.onChangeKey=function(e){a.setState({key:e})},a.searchLetterIn=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===t.keyCode&&(window.location.href="/sism/tracking?key=".concat(a.state.key));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showDetail=function(e){var t=a.state.data[e].clicked;a.state.data[e].clicked=!t,a.setState({clicked:!a.state.clicked})},a.state={toasts:[],_id:"",data:[],replies:[],dispositions:[],dialogVisible:!1,key:"",clicked:!1,created_by:Ll.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({clicked:[]}),void 0!==(t=F.a.parse(window.location.search))&&null!==t&&""!==t&&this.setState({key:t.key}),""!==t.key){e.next=7;break}this.state.data=[],e.next=15;break;case 7:return e.prev=7,e.next=10,k.a.get("/api/sism-letters_in?key=".concat(t.key)).then((function(e){if(200===e.data.status){e.data.data.map((function(e,t){e.clicked=!1,e.replies=[],e.dispositions=[];try{k.a.get("/api/letter_out_replies/".concat(e._id)).then((function(t){200===t.data.status&&t.data.data.length>0&&(e.replies=t.data.data)}))}catch(a){console.log(a)}try{k.a.get("/api/sism-letter-in-disposition-by-letter-in/".concat(e._id)).then((function(t){200===t.data.status&&t.data.data.length>0&&(e.dispositions=t.data.data)}))}catch(a){console.log(a)}})),a.setState({data:e.data.data})}}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[7,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Tracking"),r.a.createElement(y.i,{size:12},r.a.createElement(y.D,{placeholder:"Enter Keyword ... (Letter No, Subject, BPR .. )",fullWidth:!0,className:"md-cell md-cell--4-tablet md-cell--12",onChange:this.onChangeKey,onKeyUp:this.searchLetterIn})),r.a.createElement(y.i,{size:12},this.state.data.length>0?r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h3",null,"Results"),r.a.createElement("table",{className:"table is-striped is-small is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"20%"},"Letter No"),r.a.createElement("th",{width:"45%"},"Subject"),r.a.createElement("th",{width:"35%"},"Current Progress"))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(t._id)},r.a.createElement("b",null,t.letter_number)),r.a.createElement("p",null,null===t.client_name?t.sender:t.client_name)),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(t._id)},r.a.createElement("b",null,t.subject))),r.a.createElement("td",null,r.a.createElement("ul",null,r.a.createElement("li",{style:{color:"green"}},"Created at \xa0 ",H()(t.created_at,"dd mmm yyyy, HH:MM")),!0===t.clicked?r.a.createElement(n.Fragment,null,void 0!==t.dispositions&&t.dispositions.length>0?t.dispositions.map((function(e){return r.a.createElement("li",{style:{color:"blue"}},"Dispoisition from ",r.a.createElement("b",null,e.full_name)," to ",r.a.createElement("b",null,e.full_name_to)," : ",r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.disposition}})," ")})):"",void 0!==t.replies&&t.replies.length>0?t.replies.map((function(e){return r.a.createElement("li",{style:{color:"orange"}},r.a.createElement("b",null,e.full_name)," replied at ",H()(e.created_at,"dd/mmm/yyyy, HH:MM")," : ",r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject)))})):""):""),r.a.createElement("button",{onClick:function(){return e.showDetail(a)},style:{marginLeft:"10px"}},t.clicked?"Close":"Detail")))}))))):r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h3",null,"Results"),r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No Result ... "))))))}}]),t}(n.Component)},name:"Tracking"},zl=x.Session.get().payload,Vl={routeProps:{path:"/sism/archives",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.searchClient=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({key:t}),e.prev=1,e.next=4,k.a.get("/api/clients-total-letter?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={toasts:[],key:"",_id:"",data:[],dialogVisible:!1,created_by:zl.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/clients-total-letter").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Archives")),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"columns",style:{justifyContent:"space-between",alignItems:"center"}},r.a.createElement(y.i,{size:6}),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),placeholder:"Search ...",fullWidth:!0,value:this.state.key,onChange:this.searchClient})))),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("h5",null,"All BPR/Clients"),this.state.data.length>0?r.a.createElement("table",{className:"table is-striped"},r.a.createElement("thead",null,r.a.createElement("tr",{style:{fontSize:"8pt"}},r.a.createElement("td",null,"BPR /Client"),r.a.createElement("td",null,"Total Incoming Letters"),r.a.createElement("td",null,"Total Sent Letters"))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,e.client_name.includes("Lainnya ")?r.a.createElement(_.a,{to:"/sism/archives/detail?client_id=others"},r.a.createElement("b",null,r.a.createElement("i",{className:"fa fa-folder-o"})," \xa0 ",e.client_code+" - "+e.client_name)):r.a.createElement(_.a,{to:"/sism/archives/detail?client_id=".concat(e._id)},r.a.createElement("b",null,r.a.createElement("i",{className:"fa fa-folder-o"})," \xa0 ",e.client_code+" - "+e.client_name))),r.a.createElement("td",null,e.total_letter_in),r.a.createElement("td",null,e.client_name.includes("Lainnya ")?e.total_letter_out_lainnya:e.total_letter_out))})))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"No data showed ... "))))))}}]),t}(n.Component)},name:"Archives"},Bl=x.Session.get().payload,Ul=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).changeKey=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id,"&status_id=").concat(a.state.status_id),""===t){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/sism-letters_in?key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/sism-letters_in").then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),a.changeClientId=function(e){a.setState({client_id:e})},a.changeStatusId=function(e){a.setState({status_id:e})},a.changeDateFrom=function(e){a.setState({date_from:e})},a.changeDateTo=function(e){a.setState({date_to:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id,"&status_id=").concat(a.state.status_id),e.prev=2,e.next=5,k.a.get("/api/sism-letters_in?key=".concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.resetFilter=function(){a.setState(Object(C.a)({date_to:"",date_from:"",client_id:"",status_id:""},"date_to",""))},a.state={toasts:[],_id:"",data:[],showFilter:!1,unapproved_letter_in:0,created_by:Bl.userId,clients:[],key:"",date_from:"",date_to:"",status_id:"",client_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-letters_in").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/sism-letters_in-not-approved").then((function(e){200===e.data.status&&t.setState({unapproved_letter_in:e.data.data.length})}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.client_code+" - "+e.client_name,value:e._id};return a[t]=n,!1})),t.setState({clients:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:return e.prev=24,e.next=27,k.a.get("/api/sism-status").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.status),value:e._id};return a[t]=n,!1})),t.setState({status:a})}}));case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(24),console.log(e.t3);case 32:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21],[24,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:8},r.a.createElement("button",{onClick:function(){return e.setState({showFilter:!e.state.showFilter})},className:"button  is-small is-info"},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Filter"),"\xa0",r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(ql,{ref:function(t){return e.componentRef=t},data:this.state.data}))),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{className:"md-cell md-cell--12",placeholder:"Search ... ",onChange:this.changeKey}))),this.state.showFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:this.changeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:this.changeDateTo,value:this.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client ",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:this.state.clients,onChange:this.changeClientId,value:this.state.client_id}),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary is-small",onClick:this.filter},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Apply"),"\xa0",r.a.createElement("button",{className:"button  is-small",onClick:this.resetFilter},r.a.createElement("i",{className:"fa fa-refresh"}),"\xa0Reset")))):"",r.a.createElement(y.r,{className:"grid-example",style:{overflowX:"scroll"}},r.a.createElement(y.i,{size:12},this.state.data.length>0?r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Date",width:"10%"},{label:"Letter No",width:"15%"},{label:"From",width:"15%"},{label:"Subject",width:"15%"},{label:"To Division"},{label:"Handled By"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.letter_date,"dd mmm yyyy")),r.a.createElement("td",null,e.is_reply_required?r.a.createElement("i",{className:"fa fa-warning",style:{color:"orange"}}):"","\xa0",r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))," "),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",null,""!==e.client_name?e.client_name:e.sender),r.a.createElement("td",null,e.to_division),r.a.createElement("td",null,e.full_name))})))):r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"No data showed ...")))))}}]),t}(n.Component),ql=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Incoming Letters"),r.a.createElement(y.r,{className:"grid-example",style:{overflowX:"scroll"}},r.a.createElement(y.i,{size:12},this.props.data.length>0?r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Date",width:"10%"},{label:"Letter No",width:"15%"},{label:"From",width:"15%"},{label:"Subject",width:"15%"},{label:"To Division"},{label:"Handled By"},{label:"Status",width:"10%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.date_in,"dd mmm yyyy")),r.a.createElement("td",null,e.is_reply_required?r.a.createElement("i",{className:"fa fa-warning",style:{color:"orange"}}):"","\xa0",r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number_original))," "),r.a.createElement("td",null,""!==e.sender_name?e.sender_name:e.client_name),r.a.createElement("td",null,e.subject),r.a.createElement("td",null,e.to_division),r.a.createElement("td",null,e.handled_by),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+e.label_color},e.status)))})))):r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"No data showed ...")))))}}]),t}(n.Component),Wl=(n.Component,x.Session.get().payload),Yl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).changeKey=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({key:t}),"",n="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id,"&status_id=").concat(a.state.status_id),""===t){e.next=14;break}return e.prev=4,e.next=7,k.a.get("/api/sism-letters_out?key=".concat(t).concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,k.a.get("/api/sism-letters_out").then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[4,9],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),a.changeClientId=function(e){a.setState({client_id:e})},a.changeStatusId=function(e){a.setState({status_id:e})},a.changeDateFrom=function(e){a.setState({date_from:e})},a.changeDateTo=function(e){a.setState({date_to:e})},a.filter=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="&date_from=".concat(a.state.date_from,"&date_to=").concat(a.state.date_to,"&client_id=").concat(a.state.client_id,"&status_id=").concat(a.state.status_id),e.prev=2,e.next=5,k.a.get("/api/sism-letters_out?key=".concat(a.state.key).concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.resetFilter=function(){a.setState(Object(C.a)({date_to:"",date_from:"",client_id:"",status_id:""},"date_to",""))},a.state=Object(C.a)({toasts:[],client_id:"",_id:"",data:[],showFilter:!1,created_by:Wl.userId,clients:[],key:"",date_from:"",date_to:"",status_id:""},"client_id",""),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-letters_out").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,e.next=11,k.a.get("/api/clients").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:e.client_code+" - "+e.client_name,value:e._id};return a[t]=n,!1})),t.setState({clients:a})}}));case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.log(e.t1);case 16:return e.prev=16,e.next=19,k.a.get("/api/sism-status").then((function(e){if(200===e.data.status){var a=[];e.data.data.map((function(e,t){var n={label:r.a.createElement("span",{className:"tag "+e.label_color},e.status),value:e._id};return a[t]=n,!1})),t.setState({status:a})}}));case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(16),console.log(e.t2);case 24:case"end":return e.stop()}}),e,null,[[0,5],[8,13],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.r,null,r.a.createElement(y.i,{size:8},r.a.createElement("button",{onClick:function(){return e.setState({showFilter:!e.state.showFilter})},className:"button  is-small is-info"},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Filter"),"\xa0",r.a.createElement(be.a,{trigger:function(){return r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))},content:function(){return e.componentRef}}),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(Xl,{ref:function(t){return e.componentRef=t},data:this.state.data}))),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{className:"md-cell md-cell--12",placeholder:"Search ... ",onChange:this.changeKey}))),this.state.showFilter?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-portrait",label:"From Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:this.changeDateFrom,value:this.state.date_from}),r.a.createElement(y.k,{fullWidth:!0,id:"appointment-date-landscape",label:"To Date",className:"md-cell md-cell--12-tablet md-cell--6",displayMode:"landscape",onChange:this.changeDateTo,value:this.state.date_to}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select BPR/Client ",className:"md-cell md-cell--12-tablet md-cell--8",menuItems:this.state.clients,onChange:this.changeClientId,value:this.state.client_id}),r.a.createElement(y.y,{leftIcon:"view_list",label:"Select Status",className:"md-cell md-cell--12-tablet md-cell--4",menuItems:this.state.status,onChange:this.changeStatusId,value:this.state.status_id}),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary is-small",onClick:this.filter},r.a.createElement("i",{className:"fa fa-filter"}),"\xa0Apply"),"\xa0",r.a.createElement("button",{className:"button  is-small",onClick:this.resetFilter},r.a.createElement("i",{className:"fa fa-refresh"}),"\xa0Reset")))):"",r.a.createElement(y.r,{className:"grid-example",style:{overflowX:"scroll"}},r.a.createElement(y.i,{size:12},this.state.data.length>0?r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Date",width:"8%"},{label:"Letter No",width:"8%"},{label:"Subject",width:"13%"},{label:"BPR/Client Name",width:"10%"},{label:"Issued By",width:"35%"},{label:"Handled By"},{label:"Status",width:"10%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.letter_date,"dd mmm yyyy")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))," "),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))),r.a.createElement("td",null,""!==e.client_name?e.client_name:e.recipient),r.a.createElement("td",null,e.to_division),r.a.createElement("td",null,e.full_name))})))):r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"No data showed ...")))))}}]),t}(n.Component),Xl=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Sent Letters"),r.a.createElement(y.r,{className:"grid-example"},this.props.data.length>0?r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Date",width:"8%"},{label:"Letter No",width:"8%"},{label:"BPR/Client Name",width:"10%"},{label:"Issued By",width:"35%"},{label:"Handled By"},{label:"Status",width:"10%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.date_letter,"dd/mmm/yyyy")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,null!==e.client_name_non_bpr?e.client_name_non_bpr:e.client_name),r.a.createElement("td",null,e.structure),r.a.createElement("td",null,e.full_name),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+e.label_color},e.status)))})))):r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty ..."))))}}]),t}(n.Component),Gl=x.Session.get().payload,Kl={routeProps:{path:"/sism/report",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.setUpdate=function(e){alert(e)},a.setDelete=function(e){alert(e)},a.setTabList=function(e){"create"===e?a.setState({contain:e}):a.setState({list_contain:e})},a.state={toasts:[],_id:"",data:[],collapsed:!0,dialogVisible:!1,list_contain:"letter-in",created_by:Gl.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({list_contain:"letter-in"});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Report")),r.a.createElement("div",{className:"tabs",style:{border:"none"}},r.a.createElement("ul",null,[{color:"#348066",action:"letter-in",icon:"fa fa-envelope",tooltip:"Incoming Letters"},{color:"darkblue",action:"letter-out",icon:"fa fa-envelope-o",tooltip:"Sent Letters"}].map((function(t,a){return e.state.list_contain===t.action?r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,backgroundColor:"#c7d6eb",padding:"10px 5px 0 0 ",borderTopRightRadius:"8px",borderTopLeftRadius:"8px"}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0",t.tooltip," ")):r.a.createElement("li",{style:{borderBottom:"solid 3px "+t.color,padding:"10px 5px 0 0 "}},r.a.createElement("a",{onClick:function(){return e.setTabList(t.action)}},r.a.createElement("i",{className:t.icon}),"\xa0 ",t.tooltip," "))})))),function(){switch(e.state.list_contain){case"letter-in":return r.a.createElement(Ul,null);case"letter-out":return r.a.createElement(Yl,null);default:return r.a.createElement(Ul,null)}}())}}]),t}(n.Component)},name:"Report"},Jl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUpdate=function(e){a.props.setUpdate(e)},a.setDelete=function(e){a.props.setDelete(e)},a.state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(y.u,{key:1,primaryText:"Edit",rightIcon:r.a.createElement("i",{className:"fa fa-pencil"}),style:{backgroundColor:"lightblue"},onClick:function(){return e.setUpdate(e.props.id)}}),r.a.createElement(y.u,{key:2,primaryText:"Delete",rightIcon:r.a.createElement("i",{className:"fa fa-trash"}),style:{top:0,backgroundColor:"pink",marginTop:"0em"},onClick:function(){return e.setDelete(e.props.id)}})];return r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:t,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),Ql=x.Session.get().payload,$l={routeProps:{path:"/sism/status",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",dialogVisible:!0,status:"",label_color:"",description:""})},a.onChangeStatus=function(e){a.setState({status:e})},a.onChangeLabelColor=function(e){a.setState({label_color:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-status/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,n){return a.setState({_id:t,dialogVisible:!0,status:e.status,label_color:e.label_color,description:e.description}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/sism-status/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!1,_id:"",status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={status:a.state.status,label_color:a.state.label_color,description:a.state.description},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/sism-status",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,_id:"",status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.created_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/sism-status/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!a.state.dialogVisible,_id:"",status:"",label_color:"",description:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,status:"",label_color:"",description:"",module_short_name:"",created_by:Ql.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-status").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Status"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Status",width:"8%"},{label:"Color",width:"10%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.label_color),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement(Jl,{id:t._id,setUpdate:function(){return e.setUpdate(t._id)},setDelete:function(){return e.setDelete(t._id)}})))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Status"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Status",placeholder:"Status",value:this.state.status,onChange:this.onChangeStatus}),r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Label Color",placeholder:"e.g. is-danger OR is-warning OR is-success etc",value:this.state.label_color,onChange:this.onChangeLabelColor}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{flat:!0,onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}},"NO")],title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component)},name:"Status"},Zl=x.Session.get().payload,ec={routeProps:{path:"/sism/sending-methods",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.showForm=function(){a.setState({_id:"",dialogVisible:!0,status:"",label_color:"",description:""})},a.onChangeMethod=function(e){a.setState({method:e})},a.onChangeDescription=function(e){a.setState({description:e})},a.setUpdate=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-sending_method/".concat(t)).then((function(e){200===e.data.status&&e.data.data.map((function(e,n){return a.setState({_id:t,dialogVisible:!0,method:e.method,description:e.description}),!1}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.setState({_id:e,dialogDeleteVisible:!0})},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/sism-sending_method/".concat(a.state._id)).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!1,_id:"",method:"",description:""})):a.addToast(e.data.message)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={method:a.state.method,description:a.state.description},""!==a.state._id){e.next=13;break}return t.created_by=a.state.created_by,e.prev=3,e.next=6,k.a.post("/api/sism-sending_method",t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!1,_id:"",method:"",description:""})):a.addToast(e.data.message)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:return t.created_by=a.state.created_by,e.prev=14,e.next=17,k.a.put("/api/sism-sending_method/".concat(a.state._id),t).then((function(e){200===e.data.status?(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogVisible:!1,_id:"",method:"",description:""})):a.addToast(e.data.message)}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])}))),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,method:"",description:"",created_by:Zl.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-sending_methods").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({secondary:!0,children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},onClick:this.showForm,secondary:!0,floating:!0,iconClassName:"fa fa-plus"}),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Sending Methods"),r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... "}))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Method",width:"8%"},{label:"Description",width:"35%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement(Jl,{id:t._id,setUpdate:function(){return e.setUpdate(t._id)},setDelete:function(){return e.setDelete(t._id)}})))}))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:t,title:"Manage Sending Method"},r.a.createElement(y.D,{id:"simple-action-dialog-field",label:"Method",placeholder:"Method",value:this.state.method,onChange:this.onChangeMethod}),r.a.createElement(y.D,{rows:2,id:"simple-action-dialog-field",label:"Description",placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{flat:!0,onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}},"NO")],title:"Confirmation"},"Are you sure delete this item?"),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}))}}]),t}(n.Component)},name:"SendingMethods"},tc=x.Session.get().payload,ac=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={menus:[],module_id:"",role:"",role_id:"",user_id:tc.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props),t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a.setState({module_id:e._id}),!1}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return"",e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(this.state.module_id,"/").concat(this.state.user_id)).then((function(e){200===e.data.status&&(a.setState({role:e.data.data[0].role}),a.state.role_id=e.data.data[0].role_id,e.data.data[0].role_id)}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return e.prev=19,e.next=22,k.a.get("/api/menu-by-module-link-role-id/".concat(t[3],"/").concat(this.state.role_id)).then((function(e){200===e.data.status&&a.setState({menus:e.data.data})}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.error("Data Not Loaded ",e.t2);case 27:case"end":return e.stop()}}),e,this,[[2,7],[11,16],[19,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=["#ebbe8a","#7bede2","#bff0a3","#edc2c2","#9ec8f7","#be86f7","#e693d8"];Object.keys(y.v.HorizontalAnchors),Object.keys(y.v.VerticalAnchors);return r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},this.state.role.includes("Customer")?r.a.createElement(_.a,{to:"/sism/letter-in/form"},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"})):r.a.createElement(y.n,{adjusted:!1,raised:!0,primary:!0,menuItems:[{leftIcon:r.a.createElement(y.q,null,"mail"),primaryText:r.a.createElement(_.a,{to:"/sism/letter-in/form",style:{textDecoration:"none"}},"Incoming Letter")},{leftIcon:r.a.createElement(y.q,null,"drafts"),primaryText:r.a.createElement(_.a,{to:"/sism/letter-out/form",style:{textDecoration:"none"}},"Outgoing Letter")}],simplifiedMenu:!1,repositionOnScroll:!1,anchor:{x:y.n.HorizontalAnchors.RIGHT,y:y.n.VerticalAnchors.TOP}},r.a.createElement(y.d,{style:{position:"fixed",right:"10px",bottom:"20px",float:"bottom"},secondary:!0,floating:!0,iconClassName:"fa fa-plus"})),r.a.createElement(y.e,{style:{padding:"2.5%",borderRadius:"10px"}},r.a.createElement("div",{className:"columns  is-multiline",style:{justifyContent:"center"}},this.state.menus.map((function(t,a){if("Home"!==t.menu)return r.a.createElement(_.a,{to:t.link,key:a},r.a.createElement(y.e,{className:"",style:{width:220,height:120,borderRadius:"8px",border:"1px solid #999",padding:"20px",alignItems:"center",marginRight:"5px",marginLeft:"5px",marginTop:"5px"}},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("h4",{style:{height:"1.4"}},t.menu)," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"column is-6"},r.a.createElement(y.q,{style:{fontSize:64,color:e[a]}},t.icon)))))}))))))}}]),t}(n.Component),nc=x.Session.get().payload,rc={routeProps:{path:"/sism",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:"",role:"",data:[],contain:"",announcements:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(nc.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:return e.prev=19,e.next=22,k.a.get("/api/announcements-by-module-id/".concat(t)).then((function(e){if(200===e.data.status){var t=[];e.data.data.map((function(e,a){if(H()(e.star_date,"yyyy-mm-dd")<=H()(new Date,"yyyy-mm-dd")&&H()(e.end_date,"yyyy-mm-dd")>=H()(new Date,"yyyy-mm-dd")){var n=e;t.push(n)}return!1})),n.setState({announcements:t})}}));case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(19),console.log(e.t2);case 27:case"end":return e.stop()}}),e,this,[[3,8],[11,16],[19,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,null===nc.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Hi, ",nc.username,"  ",r.a.createElement("p",null,e.state.role)),r.a.createElement(y.i,{size:12},e.state.announcements.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Announcements"),e.state.announcements.map((function(e,t){return r.a.createElement("div",{className:"notification is-warning"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}}))}))):""),r.a.createElement(y.i,{size:12},r.a.createElement(ac,null))))}}]),t}(n.Component)},name:"SISM"},lc={routeProps:{path:"/sism/setting/preferences",exact:!0,component:q},name:"Preferences"},cc={routeProps:{path:"/sism/setting/profile",exact:!0,component:V},name:"Profile"},sc={routeProps:{path:"/sism/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"},ic=x.Session.get().payload,oc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addToast=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(t){var a=t.toasts.slice();return a.push({text:e}),{toasts:a}}))},a.delete=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/sism-letter_in/".concat(a.state._id)).then((function(e){200===e.data.status&&(a.addToast(e.data.message),a.componentDidMount(),a.setState({dialogDeleteVisible:!1,_id:""}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.approveLetter=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={is_approved:1},e.prev=1,e.next=4,k.a.put("/api/sism-letter_in-approve/".concat(t),n).then((function(e){200===e.data.status&&(a.addToast("Succes!"),a.componentDidMount())}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.searchLetterIn=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.state.data=[],e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/sism-search_letter_in?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={toasts:[],_id:"",data:[],modules:[],dialogVisible:!1,dialogDeleteVisible:!1,module:"",link:"",description:"",module_short_name:"",unapproved_letter_in:0,created_by:ic.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-letters_in-not-approved").then((function(e){200===e.data.status&&t.setState({data:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"Submit")),t.push({children:"Cancel",onClick:function(){return e.setState({dialogVisible:!e.state.dialogVisible})}}),r.a.createElement("div",null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Request Incoming Letter"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:4}),r.a.createElement(y.i,{size:4,offset:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.searchLetterIn}))),r.a.createElement(y.r,{className:"grid-example",style:{overflowX:"scroll"}},r.a.createElement(y.i,{size:12},this.state.data.length>0?r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"10pt"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Letter No",width:"15%"},{label:"From",width:"15%"},{label:"Subject",width:"15%"},{label:"Date",width:"10%"},{label:"To Division"},{label:"Handled By"},{label:"Status",width:"10%"},{label:"",width:"2%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.is_reply_required?r.a.createElement("i",{className:"fa fa-warning",style:{color:"orange"}}):"","\xa0",r.a.createElement(_.a,{to:"/sism/letter-in/detail-unapprove?id=".concat(t._id)},r.a.createElement("b",null,t.letter_number_original))," "),r.a.createElement("td",null,""!==t.sender_name?t.sender_name:t.client_name),r.a.createElement("td",null,t.subject),r.a.createElement("td",null,H()(t.date_in,"dd mmm yyyy")),r.a.createElement("td",null,t.to_division),r.a.createElement("td",null,t.handled_by),r.a.createElement("td",null,r.a.createElement("span",{className:"tag "+t.label_color},t.status)),r.a.createElement("td",null,r.a.createElement(dc,{is_reply_required:t.is_reply_required,id:t._id,setDelete:function(t){return e.setDelete(t)},approveLetter:function(t){return e.approveLetter(t)}})))})))):r.a.createElement("div",{className:"notification is-fullwidth"},r.a.createElement("p",null,"No data showed ...")))),r.a.createElement(y.B,{id:"example-snackbar",toasts:this.state.toasts,autohideTimeout:300}),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogDeleteVisible,onHide:function(){return!e.state.dialogDeleteVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogDeleteVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure delete this item?")))}}]),t}(n.Component),dc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setUpdate=function(e){a.props.setUpdate(e)},a.approveLetter=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.approveLetter(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setDelete=function(e){a.props.setDelete(e)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this;this.props.id;return e=[r.a.createElement(y.u,{key:1,onClick:function(){return t.approveLetter(t.props.id)},primaryText:"Approve",rightIcon:r.a.createElement("i",{className:"fa fa-check"}),style:{backgroundColor:"lightblue"}})],r.a.createElement(y.v,{id:"kebabmenu",icon:!0,menuItems:e,listInline:!0,centered:!0,listStyle:{textDecoration:"none",listStyle:"none",justifyItems:"center"}}," more_vert")}}]),t}(n.Component),uc={routeProps:{path:"/sism/letter-in-unapproved",exact:!0,component:oc},name:"LetterInUnApproved"},mc={routeProps:{path:"/sism/archives/detail",exact:!0,component:function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={_id:"",keyIncoming:"",keyOutgoing:"",client_name:"",client_id:"",data:[],file_url:[],letter_in:[],letter_out:[],total_data:0,currentPage:1,displayPerPage:10,total_dataOutgoing:0,currentPageOutgoing:1,displayPerPageOutgoing:10},a.searchIncoming=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({keyIncoming:t,currentPage:1}),e.prev=1,e.next=4,k.a.get("/api/sism-letters_in-total?client_id=".concat(a.state.client_id,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/sism-letters_in?client_id=".concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({letter_in:e.data.data})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.searchOutgoing=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({keyOutgoing:t,currentPageOutgoing:1}),e.prev=1,e.next=4,k.a.get("/api/sism-letters_out-total?client_id=".concat(a.state.client_id,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_dataOutgoing:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/sism-letters_out?client_id=".concat(a.state.client_id,"&currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPageOutgoing,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({letter_out:e.data.data})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.setActivePageIncoming=function(e){a.setState({currentPage:e}),a.loadDataByPageIncoming(e)},a.isActiveIncoming=function(e){if(e===a.state.currentPage)return!0},a.setPageEndIncoming=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPageIncoming(e)},a.setPageStartIncoming=function(){a.setState({currentPage:1}),a.loadDataByPageIncoming(1)},a.loadDataByPageIncoming=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-letters_in?client_id=".concat(a.state.client_id,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPageOutgoing,"&key=").concat(a.state.keyIncoming)).then((function(e){200===e.data.status&&a.setState({letter_in:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.setActivePageOutgoing=function(e){a.setState({currentPageOutgoing:e}),a.loadDataByPageOutgoing(e)},a.isActiveOutgoing=function(e){if(e===a.state.currentPageOutgoing)return!0},a.setPageEndOutgoing=function(){var e=Math.ceil(a.state.total_dataOutgoing/a.state.currentPageOutgoing);a.setState({currentPageOutgoing:e}),a.loadDataByPageOutgoing(e)},a.setPageStartOutgoing=function(){a.setState({currentPageOutgoing:1}),a.loadDataByPageOutgoing(1)},a.loadDataByPageOutgoing=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/sism-letters_out?client_id=".concat(a.state.client_id,"&currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPageOutgoing,"&key=").concat(a.state.keyOutgoing)).then((function(e){200===e.data.status&&a.setState({letter_out:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),this.setState({_id:t.client_id}),void 0!==t&&null!==t&&""!==t&&this.setState({client_id:t.client_id}),console.log(t.client_id),e.prev=4,e.next=7,k.a.get("/api/client/".concat(t.client_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({client_name:e.client_name}),!1}))}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,e.next=15,k.a.get("/api/sism-letters_in-total?client_id=".concat(t.client_id)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.log(e.t1);case 20:return e.prev=20,e.next=23,k.a.get("/api/sism-letters_in?client_id=".concat(t.client_id,"&currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&a.setState({letter_in:e.data.data})}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.log(e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/sism-letters_out-total?client_id=".concat(t.client_id)).then((function(e){200===e.data.status&&a.setState({total_dataOutgoing:e.data.data[0].total})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return e.prev=36,e.next=39,k.a.get("/api/sism-letters_out?client_id=".concat(t.client_id,"&currentPage=").concat(this.state.currentPageOutgoing,"&displayPerPage=").concat(this.state.displayPerPageOutgoing)).then((function(e){200===e.data.status&&a.setState({letter_out:e.data.data})}));case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(36),console.log(e.t4);case 44:case"end":return e.stop()}}),e,this,[[4,9],[12,17],[20,25],[28,33],[36,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"setPageNextIncoming",value:function(){var e=this.state.currentPage,t=Math.ceil(this.state.total_data/this.state.displayPerPage),a=e+1>t?t:e+1;this.setState({currentPage:a}),this.loadDataByPageIncoming(a)}},{key:"setPagePreviousIncoming",value:function(){var e=this.state.currentPage,t=e-1<1?1:e-1;this.setState({currentPage:t}),this.loadDataByPageIncoming(t)}},{key:"setPageNextOutgoing",value:function(){var e=this.state.currentPageOutgoing,t=Math.ceil(this.state.total_dataOutgoing/this.state.displayPerPageOutgoing),a=e+1>t?t:e+1;this.setState({currentPageOutgoing:a}),this.loadDataByPageOutgoing(a)}},{key:"setPagePreviousOutgoing",value:function(){var e=this.state.currentPageOutgoing,t=e-1<1?1:e-1;this.setState({currentPageOutgoing:t}),this.loadDataByPageOutgoing(t)}},{key:"render",value:function(){for(var e=this,t=[],a=this.state.currentPage+2,l=Math.ceil(this.state.total_data/this.state.displayPerPage),c=a>l?l:a,s=this.state.currentPage-3;s<=c;s++)t[s-1]=s;var i=[],o=this.state.currentPageOutgoing+2,d=Math.ceil(this.state.total_dataOutgoing/this.state.displayPerPageOutgoing),u=o>d?d:o;for(s=this.state.currentPageOutgoing-3;s<=u;s++)i[s-1]=s;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail "+this.state.client_name),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{borderRadius:"10px"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:6,style:{padding:"2.5vw",border:"1px solid grey",borderRadius:"10px"}},r.a.createElement("div",{className:"columns",style:{justifyContent:"space-between",alignItems:"center"}},r.a.createElement(y.i,{size:6},r.a.createElement("h4",null,"Incoming Letter")),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),value:this.state.keyIncoming,placeholder:"Search ... ",onChange:this.searchIncoming}))),r.a.createElement("table",{className:"table is-small is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"No"),r.a.createElement("td",null,"Date Letter"),r.a.createElement("td",null,"Letter No"),r.a.createElement("td",null,"Subject"))),r.a.createElement("tbody",null,this.state.letter_in.length>0?r.a.createElement(n.Fragment,null,this.state.letter_in.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.letter_date,"dd/mmm/yyyy")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-in/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))))}))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty ...")))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},t.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStartIncoming},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePreviousIncoming},r.a.createElement("i",{className:"fa fa-angle-left"})),t.map((function(t){return e.isActiveIncoming(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePageIncoming(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePageIncoming(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNextIncoming},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEndIncoming},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):""))),r.a.createElement(y.i,{size:6,style:{padding:"2.5vw",border:"1px solid grey",borderRadius:"10px"}},r.a.createElement("div",{className:"columns",style:{justifyContent:"space-between",alignItems:"center"}},r.a.createElement(y.i,{size:6},r.a.createElement("h4",null,"Outgoing Letter")),r.a.createElement(y.i,{size:6},r.a.createElement(y.D,{icon:r.a.createElement("i",{className:"fa fa-search"}),value:this.state.keyOutgoing,placeholder:"Search ... ",onChange:this.searchOutgoing}))),r.a.createElement("table",{className:"table is-small is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"No"),r.a.createElement("td",null,"Date Letter"),r.a.createElement("td",null,"Letter No"),r.a.createElement("td",null,"Subject"))),r.a.createElement("tbody",null,this.state.letter_out.length>0?r.a.createElement(n.Fragment,null,this.state.letter_out.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.letter_date,"dd/mmm/yyyy")),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.letter_number))),r.a.createElement("td",null,r.a.createElement(_.a,{to:"/sism/letter-out/detail?id=".concat(e._id)},r.a.createElement("b",null,e.subject))))}))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty ...")))))),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},i.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStartOutgoing},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePreviousOutgoing},r.a.createElement("i",{className:"fa fa-angle-left"})),i.map((function(t){return e.isActiveOutgoing(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePageOutgoing(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePageOutgoing(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNextOutgoing},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEndOutgoing},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))))))))}}]),t}(n.Component)},name:"Detail"},pc={routeProps:{path:"/sism/tracking/detail",exact:!0,component:function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={_id:"",data:[],file_url:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.a.parse(window.location.search),this.setState({_id:t.letter_in_id}),void 0!==t&&null!==t&&""!==t&&this.setState({_id:t.id}),console.log(this.state._id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Detail"),r.a.createElement(n.Fragment,null,r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Detail "),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))}))))}}]),t}(n.Component)},name:"Detail"},fc=x.Session.get().payload,hc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).search=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({key:t}),e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id-total/".concat(a.state.module_id,"?key=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:return e.prev=9,e.next=12,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",1,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:a.setState({key:t,currentPage:1});case 18:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t){return e.apply(this,arguments)}}(),a.setSorting=function(e){a.setState({asc:-1*a.state.asc});var t=a.state.data;a.sortArray(t,e,a.state.asc),a.setState({data:t})},a.sortArray=function(e,t,a){return a=a||1,e.sort((function(e,n){var r=0;return e[t]>n[t]?r=1*a:e[t]<n[t]&&(r=-1*a),r})),e},a.setActivePage=function(e){console.log(e),a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.isActive=function(e){if(e===a.state.currentPage)return!0},a.setPageEnd=function(){var e=Math.ceil(a.state.total_data/a.state.displayPerPage);a.setState({currentPage:e}),a.loadDataByPage(e),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageStart=function(){a.setState({currentPage:1}),a.loadDataByPage(1),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPageNext=function(){var e=a.state.currentPage,t=Math.ceil(a.state.total_data/a.state.displayPerPage),n=e+1>t?t:e+1;a.setState({currentPage:n}),a.loadDataByPage(n),window.scrollTo(0,a.tableData.current.offsetTop)},a.setPagePrevious=function(){var e=a.state.currentPage,t=e-1<1?1:e-1;a.setState({currentPage:t}),a.loadDataByPage(t),window.scrollTo(0,a.tableData.current.offsetTop)},a.loadDataByPage=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=").concat(t,"&displayPerPage=").concat(a.state.displayPerPage,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:a.setState({currentPage:t});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.beforeGetContent=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){200===e.data.status&&a.setState({dataToExportPDF:e.data.data,isLoading:!1})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),a.exportXLS=Object(o.a)(i.a.mark((function e(){var t,n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,k.a.get("/api/logs-by-module-id/".concat(a.state.module_id,"?currentPage=",0,"&displayPerPage=",0,"&key=").concat(a.state.key)).then((function(e){if(200===e.data.status&&200===e.data.status){var n=[];e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).NO=a+1,r.Time=H()(t.timestamp,"dd/mm/yyyy, HH:MM:ss"),r.User=null!==t.full_name?t.full_name:t.client_name,r.Activity=t.log,r.IP=t.from_ip,r.UserAgent=t.user_agent,n.push(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t=n,a.setState({dataToExport:t})}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx","",n="All Logs SISM  per ".concat(H()(new Date,"dd-mm-yyyy")),r=We.utils.json_to_sheet(t),l={Sheets:{data:r},SheetNames:["data"]},c=We.write(l,{bookType:"xlsx",type:"array"}),s=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),qe.saveAs(s,n+".xlsx");case 18:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.state={data:[],dataToExportPDF:[],dataToExport:[],toasts:[],module_id:"",total_data:0,_id:"",isLoading:!0,dialogVisible:!1,dialogDeleteVisible:!1,category:"",description:"",created_by:fc.userId,key:"",asc:1,currentPage:1,displayPerPage:25},a.tableData=r.a.createRef(),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id,n.setState({module_id:t})}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/logs-by-module-id-total/".concat(t)).then((function(e){200===e.data.status&&n.setState({total_data:e.data.data[0].total})}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.log(e.t1);case 18:return e.prev=18,e.next=21,k.a.get("/api/logs-by-module-id/".concat(t,"?currentPage=").concat(this.state.currentPage,"&displayPerPage=").concat(this.state.displayPerPage)).then((function(e){200===e.data.status&&n.setState({data:e.data.data,isLoading:!1})}));case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(18),console.log(e.t2);case 26:ce("Access Logs Page",t);case 27:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[18,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.delete},"YES")),t.push({children:"NO",onClick:function(){return e.setState({dialogDeleteVisible:!e.state.dialogDeleteVisible})}});for(var a=[],n=this.state.currentPage,l=n+2,c=Math.ceil(this.state.total_data/this.state.displayPerPage),s=l>c?c:l,i=n-3;i<=s;i++)a[i-1]=i;this.state.currentPage,this.state.displayPerPage,this.state.displayPerPage;return r.a.createElement("div",{style:{marginBottom:"8%"}},r.a.createElement(y.r,{className:"grid-example"},r.a.createElement("h2",{className:"md-cell md-cell--12"},"Logs"),r.a.createElement(y.i,{size:7}),r.a.createElement(y.i,{size:1},r.a.createElement(y.v,{id:"menu-button-2",style:{listStyle:"none"},menuItems:[{primaryText:r.a.createElement("p",{onClick:this.exportXLS},"XLS")},{primaryText:r.a.createElement(be.a,{onBeforeGetContent:this.beforeGetContent,trigger:function(){return r.a.createElement("p",null,"PDF")},content:function(){return e.componentRef}})}],centered:!0,anchor:{x:y.v.HorizontalAnchors.CENTER,y:y.v.VerticalAnchors.CENTER}},r.a.createElement("button",{className:"button is-small is-primary"},r.a.createElement("i",{className:"fa fa-print"}),"\xa0",r.a.createElement("b",null,"Print"))),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(gc,{ref:function(t){return e.componentRef=t},data:this.state.dataToExportPDF,role:this.props.role}))),r.a.createElement(y.i,{size:4},r.a.createElement(y.D,{placeholder:"Search ... ",onChange:this.search}))),r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.state.data.length>0?this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))),r.a.createElement(y.i,{size:8}),r.a.createElement(y.i,{size:4,style:{alignItems:"right"}},a.length>0?r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageStart},r.a.createElement("i",{className:"fa fa-angle-double-left"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPagePrevious},r.a.createElement("i",{className:"fa fa-angle-left"})),a.map((function(t){return e.isActive(t)?r.a.createElement("button",{className:"button is-small is-primary",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t)):r.a.createElement("button",{className:"button is-small ",onClick:function(){return e.setActivePage(t)}},r.a.createElement("b",null,t))})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageNext},r.a.createElement("i",{className:"fa fa-angle-right"})),r.a.createElement("button",{className:"button is-small is-info",onClick:this.setPageEnd},r.a.createElement("i",{className:"fa fa-angle-double-right"}))):"")))}}]),t}(n.Component),gc=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.r,{className:"grid-example",style:{height:"80vh",marginBottom:"3%"},ref:this.tableData},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"10px",borderRadius:"10px"}},r.a.createElement("table",{className:"table is-striped is-bordered is-fullwidth",style:{fontSize:"9pt",overflowY:"scroll"}},r.a.createElement("thead",null,[{label:"No",width:"2%"},{label:"Time",width:"8%"},{label:"User",width:"8%"},{label:"Activity",width:"32%"},{label:"IP",width:"10%"},{label:"User Agent",width:"30%"}].map((function(e,t){return r.a.createElement("th",{width:e.width,key:t},e.label)}))),r.a.createElement("tbody",null,this.props.data.length>0?this.props.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,H()(e.timestamp,"dd/mm/yyyy, HH:MM:ss")),r.a.createElement("td",null,null!==e.full_name?e.full_name:e.client_name),r.a.createElement("td",null,e.log),r.a.createElement("td",null,e.from_ip),r.a.createElement("td",null,e.user_agent))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Data is empty")))))))))}}]),t}(n.Component),bc={routeProps:{path:"/sism/log",exact:!0,component:hc},name:"Logs"},Ec=x.Session.get().payload,_c=[il,Nl,Hl,Vl,Kl,$l,ec,rc,lc,cc,sc,El,Il,kl,xl,Al,Fl,uc,mc,pc,bc,_l,{routeProps:{path:"/sism/notifications",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/module-by-link/".concat(n[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return a.setState({module_id:t}),r=F.a.parse(window.location.search),a.setState({_id:r.id}),e.prev=13,e.next=16,k.a.get("/api/notifications-per-user-total/".concat(Ec.userId,"?displayPerPage=",0,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({total_data:e.data.data[0].total})}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:return e.prev=21,e.next=24,k.a.get("/api/notifications-per-user/".concat(Ec.userId,"?displayPerPage=").concat(a.state.displayPerPage,"&module_id=").concat(t)).then((function(e){200===e.data.status&&a.setState({data:e.data.data,isLoading:!1})}));case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(21),console.log(e.t2);case 29:case"end":return e.stop()}}),e,null,[[2,7],[13,18],[21,26]])}))),a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentPage+1,n=a.state.displayPerPage*t,e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(Ec.userId,"?displayPerPage=").concat(n)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a.setState({currentPage:t,totalShowed:n});case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),a.state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress",currentPage:1,displayPerPage:25,totalShowed:0,isLoading:!0},a.socket=G()(K),a.socket.on("RECEIVE_NOTIFICATION",(function(e){e.to_user_id===Ec.userId&&a.componentDidMount()})),a.socket.on("READ_NOTIFICATION",(function(e){a.componentDidMount()})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,"Loading ... ")))):r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(t,a){return r.a.createElement(_.a,{to:t.link,onClick:function(){return e.readNotif(t._id)}},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:t.avatar_url}),primaryText:r.a.createElement(n.Fragment,null," ",r.a.createElement("b",null,""!==t.full_name&&null!==t.full_name?t.full_name:t.client_name)," \xa0 ",0===t.is_read?r.a.createElement("span",{className:"tag ",style:{backgroundColor:"#cae7fa"}},r.a.createElement("b",null,"UNREAD")):""," "),secondaryText:r.a.createElement(n.Fragment,null,"  ",t.notification," \xa0 ",r.a.createElement("p",null,H()(t.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))),this.state.totalShowed<this.state.total_data?r.a.createElement("a",{onClick:this.loadMore},r.a.createElement("h4",null,"Load More ... ")):"")))}}]),t}(n.Component)},name:"Notifications"}],yc=x.Session.get().payload,vc=[],kc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,module_id:"",position:"left",module_title:a.props.module_title,avatar_url:""},a.openDrawerLeft=function(){a.setState({visible:!0,position:"left"})},a.closeDrawer=function(){a.setState({visible:!1})},a.handleVisibility=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title="SISM PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/menu-by-module-link/".concat(t[3])).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),vc=t}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user/".concat(yc.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){a.setState({avatar_url:e.avatar_url})}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return"",t=window.location.href.split("/"),e.prev=20,e.next=23,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map(function(){var e=Object(o.a)(i.a.mark((function e(n,l){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._id,a.setState({module_id:n._id}),e.prev=2,e.next=5,k.a.get("/api/user-role/".concat(n._id,"/").concat(yc.userId)).then(function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.data.status){e.next=11;break}return a.state.role=n.data.data[0].role,a.state.role_id=n.data.data[0].role_id,e.prev=3,e.next=6,k.a.get("/api/menu-by-module-link-role-id/".concat(t[3],"/").concat(n.data.data[0].role_id)).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),vc=t}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}())}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.error("Data Not Loaded ",e.t2);case 28:console.log(this.state.role_id);case 29:case"end":return e.stop()}}),e,this,[[2,7],[10,15],[20,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.position,l="left"===n,c=r.a.createElement(y.d,{icon:!0,onClick:this.closeDrawer},l?"arrow_back":"close");return""===yc.userId||null===yc.userId||void 0===yc.userId?r.a.createElement(E.a,{to:"/"}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,themed:!0,nav:r.a.createElement(y.d,{icon:!0,onClick:this.openDrawerLeft},"menu"),title:this.state.module_title,style:{backgroundColor:this.props.bg_color},actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})]}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,_c.map((function(t,a){return r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role,role_id:e.state.role_id})}})})))),r.a.createElement(y.m,{id:"simple-drawer-example",type:y.m.DrawerTypes.TEMPORARY,visible:a,position:n,onVisibilityChange:this.handleVisibility,navItems:vc,header:r.a.createElement(y.F,{nav:l?r.a.createElement(y.d,{icon:!0,onClick:function(){return window.location.href="/"}},"home"):c,actions:l?c:null,className:"md-divider-border md-divider-border--bottom"})})))}}]),t}(n.Component),xc={routeProps:{path:"/sism",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(kc,{module_title:"SISM",bg_color:"#fafafa"})}}]),t}(n.Component)},name:"SISM"},wc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).searchModule=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.componentDidMount(),e.next=12;break;case 4:return e.prev=4,e.next=7,k.a.get("/api/search_module?key=".concat(t)).then((function(e){200===e.data.status&&a.setState({modules:e.data.data})}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={modules:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/modules").then((function(e){200===e.data.status&&t.setState({modules:e.data.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundImage:"/images/home.jpg"}},r.a.createElement(y.e,{primary:!0,style:{height:"100vh",backgroundColor:"lightblue",background:"/images/home.jpg"},className:"md-block-centered"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column is-1",style:{alignItems:"center"}},r.a.createElement("figure",null,r.a.createElement("img",{width:"100px",src:"/LogoMSObaru.png"}))),r.a.createElement("div",{className:"column is-11"},r.a.createElement("h4",null,r.a.createElement("b",null,"PT MITRANET SOFTWARE ONLINE")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("b",null,"IT Consultant & Software Develpment")),r.a.createElement("p",{style:{fontSize:"8pt"}},r.a.createElement("a",{target:"_blank",href:"https://www.microbanking-online.com"},"www.microbanking-online.com"))))),r.a.createElement(y.g,null,r.a.createElement("div",{className:"level box"},r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement(y.D,{leftIcon:r.a.createElement(y.q,null,"search"),className:"md-cell md-cell-tablet--8",placeholder:"Search ...",fullWidth:!0,style:{width:"400px"},onChange:this.searchModule}))))),r.a.createElement("div",{className:"columns is-multiline is-centered box"},this.state.modules.map((function(e,t){return r.a.createElement("div",{className:"column is-2"},r.a.createElement(_.a,{to:e.link},r.a.createElement("figure",null,r.a.createElement("img",{width:"100px",src:e.icon})),r.a.createElement("br",null),r.a.createElement("b",null,e.module)))}))))))}}]),t}(n.PureComponent),Sc=x.Session.get().payload,Pc=[{routeProps:{path:"/landing/",exact:!0,component:function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:"",role:"",data:[],contain:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({contain:"form"}),t="",a=window.location.href.split("/"),e.prev=3,e.next=6,k.a.get("/api/module-by-link/".concat(a[3])).then((function(e){e.data.data.map((function(e,a){t=e._id}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Data Not Loaded ",e.t0);case 11:return e.prev=11,e.next=14,k.a.get("/api/user-role/".concat(t,"/").concat(Sc.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role})}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,this,[[3,8],[11,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=F.a.parse(window.location.search);console.log(e);void 0!==e.tab_name&&e.tab_name;return r.a.createElement("div",null,r.a.createElement(wc,null))}}]),t}(n.Component)},name:"Landingpage"},{routeProps:{path:"/landing/setting/preferences",exact:!0,component:q},name:"Preferences"},{routeProps:{path:"/landing/setting/profile",exact:!0,component:V},name:"Profile"},{routeProps:{path:"/landing/setting/changepwd",exact:!0,component:Y},name:"ChangePassword"}],Cc=x.Session.get().payload,Nc=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,position:"left",module_title:a.props.module_title,avatar_url:""},a.handleVisibility=function(e){a.setState({visible:e})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.document.title=" PT MSO",t=window.location.href.split("/"),e.prev=2,e.next=5,k.a.get("/api/menu-by-module-link/".concat(t[3])).then((function(e){var t=[];e.data.data.map((function(e,a){e.menu,e.link;t[a]=r.a.createElement(Z,{key:a,label:e.menu,to:e.link,icon:e.icon})})),t}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Data Not Loaded ",e.t0);case 10:return e.prev=10,e.next=13,k.a.get("/api/user/".concat(Cc.userId)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){n.setState({avatar_url:e.avatar_url})}))}));case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),console.error("Data Not Loaded ",e.t1);case 18:return a="",t=window.location.href.split("/"),e.prev=20,e.next=23,k.a.get("/api/module-by-link/".concat(t[3])).then((function(e){e.data.data.map((function(e,t){return a=e._id,!1}))}));case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(20),console.error("Data Not Loaded ",e.t2);case 28:return e.prev=28,e.next=31,k.a.get("/api/user-role/".concat(a,"/").concat(Cc.userId)).then((function(e){200===e.data.status&&n.setState({role:e.data.data[0].role})}));case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(28),console.log(e.t3);case 36:return e.prev=36,e.next=39,k.a.get("/api/ccs-notifications-per-user/".concat(Cc.userId)).then((function(e){200===e.data.status&&n.setState({notifications:e.data.data})}));case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(36),console.log(e.t4);case 44:case"end":return e.stop()}}),e,null,[[2,7],[10,15],[20,25],[28,33],[36,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=(t.visible,"left"===t.position);r.a.createElement(y.d,{icon:!0,onClick:this.closeDrawer},a?"arrow_back":"close");return r.a.createElement(h.a,null,r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(y.F,{fixed:!0,colored:!0,nav:r.a.createElement("a",{href:"/",style:{color:"#fff"}},r.a.createElement(y.d,{icon:!0},"home")),title:this.state.module_title,style:{backgroundColor:this.props.bg_color},actions:[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:this.state.avatar_url})]}),r.a.createElement("div",{className:"content"},r.a.createElement(g.a,null,Pc.map((function(t,a){return r.a.createElement(b.a,{path:t.routeProps.path,exact:t.routeProps.exact,key:t.name,component:function(){return r.a.createElement(t.routeProps.component,{role:e.state.role})}})}))))))}}]),t}(n.Component),Oc={routeProps:{path:"/landing/",exact:!0,component:function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(Nc,{module_title:"PT MSO",bg_color:"#fff"})}}]),t}(n.Component)},name:"Clients"},Dc=x.Session.get().payload,jc=[gn,Hn,Tr,nl,xc,Oc,{routeProps:{path:"/notifications",exact:!0,component:function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],_id:"",avg_rating:0,client_code:"",client_name:"",tab:"onprogress"},a.componentDidMount=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),a.setState({_id:t.id}),e.prev=2,e.next=5,k.a.get("/api/notifications-per-user/".concat(Dc.userId)).then((function(e){200===e.data.status&&a.setState({data:e.data.data})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(y.r,null,r.a.createElement(y.i,{size:12},r.a.createElement(y.F,{title:r.a.createElement("b",null,"All Notifications"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.t,{className:"md-cell ",style:{width:"100%",listStyle:"none"}},r.a.createElement(y.C,{primaryText:"Notifications"}),this.state.data.map((function(e,t){return r.a.createElement(_.a,{to:e.link},r.a.createElement(y.u,{leftAvatar:r.a.createElement(y.c,{src:e.avatar_url}),primaryText:r.a.createElement("b",null,""!==e.full_name&&null!==e.full_name?e.full_name:e.client_name),secondaryText:r.a.createElement(n.Fragment,null,"  ",e.notification," \xa0 ",r.a.createElement("p",null,H()(e.created_at,"dd mmm yyyy, HH:MM"))," "),threeLines:!0}))}))))))}}]),t}(n.Component)},name:"Notifications"}],Tc=x.Session.get().payload,Ic=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeOldPassword=function(e){a.setState({old_password:e})},a.onChangeNewPassword=function(e){a.setState({new_password:e})},a.onChangeNewPasswordConfim=function(e){a.setState({new_password_confirm:e})},a.confirmReset=function(){a.state.new_password===a.state.new_password_confirm?a.setState({dialogVisible:!0}):a.notify("ERROR","Invalid New Password Confirmation !")},a.checkPassword=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={password_hash:a.state.old_password},e.prev=1,e.next=4,k.a.post("/api/check_password/".concat(a.state._id),t).then((function(e){200==e.data.status&&1===e.data.data.length?a.setState({validOldPassword:!0}):a.notify("ERROR","Wrong Old Password!")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.save=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.validOldPassword){e.next=16;break}if(a.state.new_password!==a.state.new_password_confirm){e.next=13;break}return t={password_hash:a.state.new_password,updated_by:a.state.created_by},e.prev=3,e.next=6,k.a.put("/api/edit_profile/".concat(a.state._id),t).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.data.status?(a.componentDidMount(),a.setState({validOldPassword:!1,dialogVisible:!1,old_password:"",new_password:"",new_password_confirm:""}),a.notify("SUCCESS","Password Changed!")):a.notify("ERROR","Failed Change Password !");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=14;break;case 13:a.notify("ERROR","Invalid New Password Confirmation !");case 14:e.next=17;break;case 16:a.notify("ERROR","Invalid Old Password !");case 17:case"end":return e.stop()}}),e,null,[[3,8]])}))),a.state={_id:"",validOldPassword:!1,dialogVisible:!1,old_password:"",new_password:"",new_password_confirm:"",created_by:Tc.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.a.parse(window.location.search),console.log(t.user_id),this.setState({_id:t.user_id});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Change Password"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},this.state.validOldPassword?r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{label:"New Password",placeholder:"New Password",type:"password",value:this.state.new_password,onChange:this.onChangeNewPassword,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{type:"password",label:"Confirm New Password",placeholder:"Confirm New Password",value:this.state.new_password_confirm,onChange:this.onChangeNewPasswordConfim,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.confirmReset},"Change")):r.a.createElement(n.Fragment,null,r.a.createElement(y.D,{placeholder:"Old Password",type:"password",label:"Old Password",value:this.state.old_password,onChange:this.onChangeOldPassword,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.checkPassword},"Submit"))))),r.a.createElement(y.l,{width:"600px",id:"simple-action-dialog",visible:this.state.dialogVisible,onHide:function(){return!e.state.dialogVisible},actions:[r.a.createElement(y.d,{raised:!0,primary:!0,onClick:this.save},"YES"),r.a.createElement(y.d,{onClick:function(){return e.setState({dialogVisible:!1})}},"NO")],title:"Confirmation"},r.a.createElement("p",null,"Are you sure CHANGE the password?")))}}]),t}(n.Component),Rc=x.Session.get().payload,Mc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.onChangeUsername=function(e){a.setState({username:e})},a.onChangeFullName=function(e){a.setState({full_name:e})},a.onChangePhoneNumber=function(e){a.setState({phone_number:e})},a.onChangeEmail=function(e){a.setState({email:e})},a.onChangeAddress=function(e){a.setState({address:e})},a.save=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:a.state.username,avatar_url:a.state.avatar_url},n={email:a.state.email,phone_number:a.state.phone_number,full_name:a.state.full_name},r={email:a.state.email,phone_number:a.state.phone_number,client_name:a.state.full_name,address:a.state.address},t.updated_by=a.state.created_by,e.prev=4,e.next=7,k.a.put("/api/edit_profile/".concat(a.state._id),t).then(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.data.status){e.next=24;break}if(a.componentDidMount(),null===a.state.employee_id){e.next=13;break}return e.prev=3,e.next=6,k.a.put("/api/employee/".concat(a.state.employee_id),n).then((function(e){200==e.data.status?a.notify("SUCCESS",t.data.message):a.notify("ERROR","FAILED")}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:e.next=22;break;case 13:if(null===a.state.client_id){e.next=22;break}return e.prev=14,e.next=17,k.a.put("/api/client/".concat(a.state.client_id),r).then((function(e){200==e.data.status?a.notify("SUCCESS",t.data.message):a.notify("ERROR","FAILED")}));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.log(e.t1);case 22:e.next=25;break;case 24:a.notify("ERROR","FAILED");case 25:case"end":return e.stop()}}),e,null,[[3,8],[14,19]])})));return function(t){return e.apply(this,arguments)}}());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),a.handleLoad=function(e,t){a.setState({avatar_url:t}),console.log(t)},a.deleteFile=function(e){a.setState({avatar_url:"",formdata:{}})},a.state={_id:"",client_id:"",avatar_url:"",username:"",employee_id:"",full_name:"",temp_avatar:"",created_by:Rc.userId},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.a.parse(window.location.search),console.log(t.user_id),this.setState({_id:t.user_id}),e.prev=3,e.next=6,k.a.get("/api/user/".concat(t.user_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({_id:e._id,username:e.username,employee_id:e.employee_id,client_id:e.client_id,avatar_url:e.avatar_url}),!1}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:if(console.log(this.state.client_id),null===this.state.employee_id){e.next=23;break}return e.prev=13,e.next=16,k.a.get("/api/employee/".concat(this.state.employee_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({full_name:e.full_name,email:e.email,phone_number:e.phone_number}),!1}))}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:e.next=32;break;case 23:if(null===this.state.client_id){e.next=32;break}return e.prev=24,e.next=27,k.a.get("/api/client/".concat(this.state.client_id)).then((function(e){200===e.data.status&&e.data.data.map((function(e,t){return a.setState({full_name:e.client_name,email:e.email,phone_number:e.phone_number,address:e.address}),!1}))}));case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(24),console.log(e.t2);case 32:case"end":return e.stop()}}),e,this,[[3,8],[13,18],[24,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,null),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Profile"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.r,null,r.a.createElement(y.i,{size:9},r.a.createElement(y.D,{label:"Username",placeholder:"Username",value:this.state.username,onChange:this.onChangeUsername,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Full Name",placeholder:"Full Name",value:this.state.full_name,onChange:this.onChangeFullName,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Phone Number",placeholder:"Phone Number",value:this.state.phone_number,onChange:this.onChangePhoneNumber,className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{label:"Email",placeholder:"Email",value:this.state.email,onChange:this.onChangeEmail,className:"md-cell md-cell--4-tablet md-cell--6"}),null!==this.state.client_id?r.a.createElement(y.D,{rows:3,label:"Address",placeholder:"Address",value:this.state.address,onChange:this.onChangeAddress,className:"md-cell md-cell--4-tablet md-cell--6"}):"",r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.save},"Update Profile")),r.a.createElement(y.i,{size:3},""!==this.state.avatar_url?r.a.createElement("div",null,r.a.createElement("img",{src:""!==this.state.temp_avatar?this.state.temp_avatar:this.state.avatar_url,width:"100vw"}),r.a.createElement("br",null),r.a.createElement(y.j,{className:"state-chip",label:"remove",removable:!0,onClick:function(){return e.deleteFile(e.state.avatar_url)}}),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(y.p,{label:"Select Avatar",id:"a-file-upload",accept:"image/*",name:"images",onLoad:this.handleLoad,style:{backgroundColor:"#359ce6"}}))))))))}}]),t}(n.Component),Ac=(x.Session.get().payload,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={_id:""},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return r.a.createElement("div",null,r.a.createElement(y.F,(e={colored:!0,title:"",style:{backgroundColor:"#4aa6ed"}},Object(C.a)(e,"style",{backgroundColor:"#fff"}),Object(C.a)(e,"actions",[r.a.createElement(M,null),r.a.createElement($,null),r.a.createElement(T,{avatar:"/avatar/user.png"})]),e)),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.F,{title:r.a.createElement("b",null,"Preferences"),nav:r.a.createElement("a",{onClick:function(){return window.history.go(-1)}},r.a.createElement(y.d,{icon:!0},"arrow_back"))})),r.a.createElement(y.r,{className:"grid-example"},r.a.createElement(y.i,{size:12},r.a.createElement(y.e,{style:{padding:"2.5vw"}},r.a.createElement(y.D,{placeholder:"Old Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{placeholder:"New Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement(y.D,{placeholder:"Confirm New Password",className:"md-cell md-cell--4-tablet md-cell--6"}),r.a.createElement("br",null),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Submit"),r.a.createElement(y.d,{primary:!0,raised:!0,onClick:this.handleSubmit},"Change"),r.a.createElement(y.d,{raised:!0,onClick:function(){return window.history.go(-1)}},"Cancel")))))}}]),t}(n.Component)),Fc=x.Session.get().payload,Lc=x.Session.getSession(),Hc=(new Audio("/sounds/just-saying.mp3"),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).notify=function(e,t){return Object(S.b)(t,{type:S.b.TYPE[e],position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.readNotif=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={is_read:1};try{k.a.put("/api/notification/".concat(t),a).then((function(e){e.data.status}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={userId:Fc.userId,username:Fc.username,loggedIn:!!Lc.isValid},a.socket=G()(K),a.socket.on("RECEIVE_MESSAGE",(function(e){})),a.socket.on("RECEIVE_NOTIFICATION",(function(e){if(e.to_user_id===Fc.userId){console.log(e);try{k.a.get("/api/user/".concat(e.from_user_id)).then((function(t){if(200===t.data.status){var l=t.data.data[0],c=r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container",style:{paddingRight:"20px",width:"30vw",height:"10vh"}},r.a.createElement("div",{className:"media",style:{borderRadius:"10px"}},r.a.createElement("div",{className:"media-left"},r.a.createElement(y.c,{src:l.avatar_url})),r.a.createElement("div",{className:"media-content"},r.a.createElement("b",null,""!==l.full_name&&null!==l.full_name?l.full_name:l.client_name),r.a.createElement("p",null,e.notification)))));a.notify("",c)}}))}catch(t){console.log(t)}}})),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(g.a,null,jc.map((function(e){return r.a.createElement(b.a,e.routeProps)})),jc.map((function(e){return r.a.createElement(b.a,{path:e.routeProps.path+"/:menu_name",exact:!1,component:e.routeProps.component})})),r.a.createElement(b.a,{exact:!0,path:"/"},this.state.loggedIn?r.a.createElement(O,null):r.a.createElement(E.a,{to:"/login-page"})),r.a.createElement(b.a,{exact:!0,path:"/login-page"},this.state.loggedIn?r.a.createElement(E.a,{to:"/"}):r.a.createElement(w,null)),r.a.createElement(b.a,{path:"/forgot-pwd",component:P}),r.a.createElement(b.a,{exact:!0,path:"/setting/profile",component:Mc}),r.a.createElement(b.a,{exact:!0,path:"/setting/changepwd",component:Ic}),r.a.createElement(b.a,{exact:!0,path:"/setting/preferences",component:Ac}))),r.a.createElement(S.a,null))}}]),t}(n.Component)),zc=a(242);a.n(zc).a.load({google:{families:["Roboto:300,400,500,700","Material Icons"]}}),c.a.render(r.a.createElement(Hc,null),document.getElementById("root"))}},[[271,1,2]]]);
//# sourceMappingURL=main.07f73ad9.chunk.js.map